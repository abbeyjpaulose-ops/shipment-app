{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nexport let NewShipmentComponent = /*#__PURE__*/(() => {\n  class NewShipmentComponent {\n    constructor() {\n      // Section 1: Basic Details\n      this.ewaybillNumber = '';\n      this.consignmentNumber = this.getNextConsignmentNumber();\n      this.date = new Date().toISOString().split('T')[0];\n      this.origin = '';\n      this.destination = '';\n      this.bookingBranch = {\n        address: '',\n        state: '',\n        district: '',\n        pincode: ''\n      };\n      this.destinationBranch = {\n        address: '',\n        state: '',\n        district: '',\n        pincode: ''\n      };\n      // Section 2: Consignment & Payment Mode\n      this.consignor = '';\n      this.consignorGST = '';\n      this.consignee = '';\n      this.consigneeGST = '';\n      this.paymentMode = 'Account Credit';\n      this.externalRefId = '';\n      // Section 3: Invoice Details\n      this.invoices = [{\n        number: '',\n        value: 0\n      }];\n      // Section 4: Package Details\n      this.packages = [{\n        quantity: 1,\n        type: '',\n        product: '',\n        actualWeight: 0,\n        chargedWeight: 0,\n        rateType: '',\n        amount: 0\n      }];\n      // Section 5: Charges\n      this.charges = {\n        odc: 0,\n        unloading: 0,\n        docket: 0,\n        other: 0,\n        ccc: 0\n      };\n      this.finalAmount = 0;\n    }\n    // --- Methods ---\n    addInvoice() {\n      this.invoices.push({\n        number: '',\n        value: 0\n      });\n    }\n    addPackage() {\n      this.packages.push({\n        quantity: 1,\n        type: '',\n        product: '',\n        actualWeight: 0,\n        chargedWeight: 0,\n        rateType: '',\n        amount: 0\n      });\n    }\n    calculateFinalAmount() {\n      const invoiceTotal = this.invoices.reduce((sum, i) => sum + (i.value || 0), 0);\n      const packageTotal = this.packages.reduce((sum, p) => sum + (p.amount || 0), 0);\n      const chargeTotal = Object.values(this.charges).reduce((sum, c) => sum + (Number(c) || 0), 0);\n      this.finalAmount = invoiceTotal + packageTotal + chargeTotal;\n    }\n    resetForm() {\n      Object.assign(this, new NewShipmentComponent());\n    }\n    saveShipment() {\n      alert('Shipment saved successfully!');\n      console.log('Shipment Data:', this);\n    }\n    // --- Serial Number logic ---\n    getNextConsignmentNumber() {\n      const today = new Date();\n      const fiscalYear = today.getMonth() >= 3 ? today.getFullYear() : today.getFullYear() - 1;\n      const key = `consignment_${fiscalYear}`;\n      let last = parseInt(localStorage.getItem(key) || '0', 10);\n      last++;\n      localStorage.setItem(key, last.toString());\n      return last;\n    }\n    static {\n      this.ɵfac = function NewShipmentComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || NewShipmentComponent)();\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: NewShipmentComponent,\n        selectors: [[\"app-new-shipment\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 2,\n        vars: 0,\n        template: function NewShipmentComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"h2\");\n            i0.ɵɵtext(1, \"New-Shipment\");\n            i0.ɵɵelementEnd();\n          }\n        },\n        dependencies: [CommonModule, FormsModule],\n        styles: [\".shipment-form[_ngcontent-%COMP%]{padding:20px}fieldset[_ngcontent-%COMP%]{margin-bottom:20px;padding:15px;border:1px solid #ccc}legend[_ngcontent-%COMP%]{font-weight:700;padding:0 5px}label[_ngcontent-%COMP%]{display:block;margin-top:10px;font-weight:500}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{display:block;margin-top:5px;padding:6px;width:100%;max-width:400px}\"]\n      });\n    }\n  }\n  return NewShipmentComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}