{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet TpartnerComponent = class TpartnerComponent {\n  constructor(http) {\n    this.http = http;\n    this.partners = [];\n    this.showAddPartnerPopup = false;\n    this.newPartner = {\n      partnerName: '',\n      address: '',\n      city: '',\n      state: '',\n      pinCode: '',\n      GSTIN: '',\n      vehicleNumbers: [],\n      rateType: 'km',\n      rateValue: 0,\n      status: 'active'\n    };\n    this.newVehicle = {\n      number: '',\n      phone: ''\n    };\n    this.editVehicleField = {\n      number: '',\n      phone: ''\n    };\n    this.editing = null;\n  }\n  ngOnInit() {\n    this.loadPartners();\n  }\n  // Add Vehicle to new Partner form\n  addVehicle() {\n    if (this.newVehicle.number.trim() && this.newVehicle.phone.trim()) {\n      this.newPartner.vehicleNumbers.push({\n        ...this.newVehicle\n      });\n      this.newVehicle = {\n        number: '',\n        phone: ''\n      };\n    }\n  }\n  removeVehicle(i) {\n    this.newPartner.vehicleNumbers.splice(i, 1);\n  }\n  // Edit Mode vehicle add/remove\n  addEditingVehicle() {\n    if (this.editVehicleField.number.trim() && this.editVehicleField.phone.trim()) {\n      this.editing.vehicleNumbers.push({\n        ...this.editVehicleField\n      });\n      this.editVehicleField = {\n        number: '',\n        phone: ''\n      };\n    }\n  }\n  removeEditingVehicle(i) {\n    this.editing.vehicleNumbers.splice(i, 1);\n  }\n  // Fetch Data\n  loadPartners() {\n    this.http.get(`http://localhost:3000/api/tpartners`).subscribe(res => this.partners = res);\n  }\n  openAddPartnerPopup() {\n    this.showAddPartnerPopup = true;\n  }\n  closeAddPartnerPopup() {\n    this.showAddPartnerPopup = false;\n  }\n  // Add Partner\n  addPartner() {\n    this.http.post('http://localhost:3000/api/tpartners/add', this.newPartner).subscribe({\n      next: () => {\n        alert('Transport Partner added!');\n        this.loadPartners();\n        this.resetForm();\n        this.closeAddPartnerPopup();\n      },\n      error: err => alert(err.error.message)\n    });\n  }\n  // Reset after save\n  resetForm() {\n    this.newPartner = {\n      partnerName: '',\n      address: '',\n      city: '',\n      state: '',\n      pinCode: '',\n      GSTIN: '',\n      vehicleNumbers: [],\n      rateType: 'km',\n      rateValue: 0,\n      status: 'active'\n    };\n  }\n  // Edit\n  editPartner(p) {\n    this.editing = JSON.parse(JSON.stringify(p));\n  }\n  saveEdit() {\n    this.http.put(`http://localhost:3000/api/tpartners/${this.editing._id}`, this.editing).subscribe(() => {\n      alert('Updated Successfully');\n      this.editing = null;\n      this.loadPartners();\n    });\n  }\n  // Status Toggle\n  toggleStatus(p) {\n    this.http.patch(`http://localhost:3000/api/tpartners/${p._id}/status`, {}).subscribe(() => this.loadPartners());\n  }\n};\nTpartnerComponent = __decorate([Component({\n  selector: 'app-transport-partner',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './tpartner.component.html',\n  styleUrls: ['./tpartner.component.css']\n})], TpartnerComponent);\nexport { TpartnerComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}