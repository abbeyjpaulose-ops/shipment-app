{"ast":null,"code":"import { NgFor, NgIf } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/forms\";\nfunction RoleSettingsComponent_ng_container_0_option_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const b_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", b_r3.branchName);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(b_r3.branchName);\n  }\n}\nfunction RoleSettingsComponent_ng_container_0_tr_61_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\", 20);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 20);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 20);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 20);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 20);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 20);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 20)(14, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function RoleSettingsComponent_ng_container_0_tr_61_ng_container_1_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const u_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.startEdit(u_r5));\n    });\n    i0.ɵɵtext(15, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function RoleSettingsComponent_ng_container_0_tr_61_ng_container_1_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const u_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.deleteUser(u_r5._id));\n    });\n    i0.ɵɵtext(17, \"Delete\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const u_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(u_r5._id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(u_r5.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(u_r5.username);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(u_r5.phoneNumber || \"-\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(u_r5.role);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(u_r5.branches && u_r5.branches.length ? u_r5.branches.join(\", \") : u_r5.branch);\n  }\n}\nfunction RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_option_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const b_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", b_r7.branchName);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(b_r7.branchName);\n  }\n}\nfunction RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"td\", 20)(3, \"input\", 23);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.editUser.email, $event) || (ctx_r1.editUser.email = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\", 20)(5, \"input\", 23);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.editUser.username, $event) || (ctx_r1.editUser.username = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"td\", 20)(7, \"input\", 23);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.editUser.phoneNumber, $event) || (ctx_r1.editUser.phoneNumber = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\", 20)(9, \"select\", 10);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_Template_select_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.editUser.role, $event) || (ctx_r1.editUser.role = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"change\", function RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_Template_select_change_9_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.onEditRoleChange());\n    });\n    i0.ɵɵelementStart(10, \"option\", 11);\n    i0.ɵɵtext(11, \"User\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"option\", 12);\n    i0.ɵɵtext(13, \"Admin\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"td\", 20)(15, \"select\", 13);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_Template_select_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.editUser.branches, $event) || (ctx_r1.editUser.branches = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵtemplate(16, RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_option_16_Template, 2, 2, \"option\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 24)(18, \"input\", 25);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_Template_input_ngModelChange_18_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.editUser.password, $event) || (ctx_r1.editUser.password = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"td\", 20)(20, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_Template_button_click_20_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.saveEdit());\n    });\n    i0.ɵɵtext(21, \"Save\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_Template_button_click_22_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.cancelEdit());\n    });\n    i0.ɵɵtext(23, \"Cancel\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const u_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(u_r5._id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.editUser.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.editUser.username);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.editUser.phoneNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.editUser.role);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.editUser.branches);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.editUser.role === \"admin\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.branches);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.editUser.password);\n  }\n}\nfunction RoleSettingsComponent_ng_container_0_tr_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, RoleSettingsComponent_ng_container_0_tr_61_ng_container_1_Template, 18, 6, \"ng-container\", 2)(2, RoleSettingsComponent_ng_container_0_tr_61_ng_template_2_Template, 24, 9, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const u_r5 = ctx.$implicit;\n    const editRow_r8 = i0.ɵɵreference(3);\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.editId !== u_r5._id)(\"ngIfElse\", editRow_r8);\n  }\n}\nfunction RoleSettingsComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h2\");\n    i0.ɵɵtext(2, \"Roles Settings\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"Create/manage users for this company here.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 3)(6, \"h3\", 4);\n    i0.ɵɵtext(7, \"Add User\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 5)(9, \"div\")(10, \"label\");\n    i0.ɵɵtext(11, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"input\", 6);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RoleSettingsComponent_ng_container_0_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.newUser.email, $event) || (ctx_r1.newUser.email = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\")(14, \"label\");\n    i0.ɵɵtext(15, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"input\", 7);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RoleSettingsComponent_ng_container_0_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.newUser.username, $event) || (ctx_r1.newUser.username = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\")(18, \"label\");\n    i0.ɵɵtext(19, \"Phone Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"input\", 8);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RoleSettingsComponent_ng_container_0_Template_input_ngModelChange_20_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.newUser.phoneNumber, $event) || (ctx_r1.newUser.phoneNumber = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\")(22, \"label\");\n    i0.ɵɵtext(23, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"input\", 9);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RoleSettingsComponent_ng_container_0_Template_input_ngModelChange_24_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.newUser.password, $event) || (ctx_r1.newUser.password = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"div\")(26, \"label\");\n    i0.ɵɵtext(27, \"Role\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"select\", 10);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RoleSettingsComponent_ng_container_0_Template_select_ngModelChange_28_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.newUser.role, $event) || (ctx_r1.newUser.role = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"change\", function RoleSettingsComponent_ng_container_0_Template_select_change_28_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onNewRoleChange());\n    });\n    i0.ɵɵelementStart(29, \"option\", 11);\n    i0.ɵɵtext(30, \"User\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"option\", 12);\n    i0.ɵɵtext(32, \"Admin\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(33, \"div\")(34, \"label\");\n    i0.ɵɵtext(35, \"Branch\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"select\", 13);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RoleSettingsComponent_ng_container_0_Template_select_ngModelChange_36_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.newUser.branches, $event) || (ctx_r1.newUser.branches = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵtemplate(37, RoleSettingsComponent_ng_container_0_option_37_Template, 2, 2, \"option\", 14);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(38, \"div\")(39, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function RoleSettingsComponent_ng_container_0_Template_button_click_39_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.createUser());\n    });\n    i0.ɵɵtext(40, \"Add\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(41, \"h3\");\n    i0.ɵɵtext(42, \"Users\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"table\", 16)(44, \"thead\")(45, \"tr\")(46, \"th\", 17);\n    i0.ɵɵtext(47, \"User ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(48, \"th\", 17);\n    i0.ɵɵtext(49, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"th\", 17);\n    i0.ɵɵtext(51, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(52, \"th\", 17);\n    i0.ɵɵtext(53, \"Phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(54, \"th\", 17);\n    i0.ɵɵtext(55, \"Role\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(56, \"th\", 17);\n    i0.ɵɵtext(57, \"Branch\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(58, \"th\", 17);\n    i0.ɵɵtext(59, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(60, \"tbody\");\n    i0.ɵɵtemplate(61, RoleSettingsComponent_ng_container_0_tr_61_Template, 4, 2, \"tr\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.newUser.email);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.newUser.username);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.newUser.phoneNumber);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.newUser.password);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.newUser.role);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.newUser.branches);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.newUser.role === \"admin\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.branches);\n    i0.ɵɵadvance(24);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.users);\n  }\n}\nfunction RoleSettingsComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\");\n    i0.ɵɵtext(1, \"No privileges\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Only admins can access Roles Settings.\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let RoleSettingsComponent = /*#__PURE__*/(() => {\n  class RoleSettingsComponent {\n    constructor(http) {\n      this.http = http;\n      this.isAdmin = String(localStorage.getItem('role') || '').toLowerCase() === 'admin';\n      this.email = localStorage.getItem('email') || '';\n      this.branches = [];\n      this.users = [];\n      this.newUser = {\n        branches: [],\n        email: '',\n        username: '',\n        phoneNumber: '',\n        password: '',\n        role: 'user'\n      };\n      this.editId = null;\n      this.editUser = {\n        branches: [],\n        email: '',\n        username: '',\n        phoneNumber: '',\n        password: '',\n        role: 'user'\n      };\n    }\n    ngOnInit() {\n      if (!this.isAdmin) return;\n      this.loadBranches();\n      this.loadUsers();\n    }\n    loadBranches() {\n      this.http.get(`http://localhost:3000/api/branches`).subscribe({\n        next: data => {\n          this.branches = data || [];\n        },\n        error: () => {\n          this.branches = [];\n        }\n      });\n    }\n    loadUsers() {\n      this.http.get('http://localhost:3000/api/admin/users').subscribe({\n        next: data => {\n          this.users = data || [];\n        },\n        error: () => {\n          this.users = [];\n        }\n      });\n    }\n    onNewRoleChange() {\n      if (String(this.newUser.role).toLowerCase() === 'admin') {\n        this.newUser.branches = ['All Branches'];\n      }\n    }\n    createUser() {\n      if (!this.newUser.email || !this.newUser.username || !this.newUser.password) {\n        alert('Email, username, and password are required');\n        return;\n      }\n      if (String(this.newUser.role).toLowerCase() !== 'admin' && !this.newUser.branches.length) {\n        alert('At least one branch is required');\n        return;\n      }\n      this.http.post('http://localhost:3000/api/admin/users', this.newUser).subscribe({\n        next: () => {\n          this.newUser = {\n            branches: [],\n            email: '',\n            username: '',\n            phoneNumber: '',\n            password: '',\n            role: 'user'\n          };\n          this.loadUsers();\n        },\n        error: err => {\n          alert(err?.error?.message || 'Failed to create user');\n        }\n      });\n    }\n    startEdit(row) {\n      this.editId = Number(row?._id);\n      this.editUser = {\n        branches: Array.isArray(row?.branches) ? row.branches : row?.branch ? [row.branch] : [],\n        email: row?.email || '',\n        username: row?.username || '',\n        phoneNumber: row?.phoneNumber || '',\n        password: '',\n        role: row?.role || 'user'\n      };\n    }\n    cancelEdit() {\n      this.editId = null;\n      this.editUser = {\n        branches: [],\n        email: '',\n        username: '',\n        phoneNumber: '',\n        password: '',\n        role: 'user'\n      };\n    }\n    onEditRoleChange() {\n      if (String(this.editUser.role).toLowerCase() === 'admin') {\n        this.editUser.branches = ['All Branches'];\n      }\n    }\n    saveEdit() {\n      if (this.editId === null) return;\n      const payload = {\n        branches: this.editUser.branches,\n        email: this.editUser.email,\n        username: this.editUser.username,\n        phoneNumber: this.editUser.phoneNumber,\n        role: this.editUser.role\n      };\n      if (this.editUser.password) payload.password = this.editUser.password;\n      this.http.put(`http://localhost:3000/api/admin/users/${this.editId}`, payload).subscribe({\n        next: () => {\n          this.cancelEdit();\n          this.loadUsers();\n        },\n        error: err => {\n          alert(err?.error?.message || 'Failed to update user');\n        }\n      });\n    }\n    deleteUser(id) {\n      const userId = Number(id);\n      if (!Number.isFinite(userId)) return;\n      if (!confirm('Delete this user?')) return;\n      this.http.delete(`http://localhost:3000/api/admin/users/${userId}`).subscribe({\n        next: () => this.loadUsers(),\n        error: err => alert(err?.error?.message || 'Failed to delete user')\n      });\n    }\n    static {\n      this.ɵfac = function RoleSettingsComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RoleSettingsComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: RoleSettingsComponent,\n        selectors: [[\"app-roleSettings\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 3,\n        vars: 2,\n        consts: [[\"noPrivileges\", \"\"], [\"editRow\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [2, \"margin\", \"12px 0\", \"padding\", \"12px\", \"border\", \"1px solid #ddd\", \"border-radius\", \"8px\"], [2, \"margin-top\", \"0\"], [2, \"display\", \"grid\", \"grid-template-columns\", \"1fr 1fr\", \"gap\", \"10px\", \"align-items\", \"end\"], [\"placeholder\", \"user@example.com\", 2, \"width\", \"100%\", 3, \"ngModelChange\", \"ngModel\"], [\"placeholder\", \"username\", 2, \"width\", \"100%\", 3, \"ngModelChange\", \"ngModel\"], [\"placeholder\", \"phone number\", 2, \"width\", \"100%\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"password\", \"placeholder\", \"password\", 2, \"width\", \"100%\", 3, \"ngModelChange\", \"ngModel\"], [2, \"width\", \"100%\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"user\"], [\"value\", \"admin\"], [\"multiple\", \"\", 2, \"width\", \"100%\", \"min-height\", \"80px\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [2, \"width\", \"100%\", 3, \"click\"], [2, \"width\", \"100%\", \"border-collapse\", \"collapse\"], [2, \"text-align\", \"left\", \"border-bottom\", \"1px solid #ddd\", \"padding\", \"6px\"], [4, \"ngFor\", \"ngForOf\"], [3, \"ngValue\"], [2, \"padding\", \"6px\", \"border-bottom\", \"1px solid #f0f0f0\"], [3, \"click\"], [2, \"margin-left\", \"6px\", 3, \"click\"], [2, \"width\", \"100%\", 3, \"ngModelChange\", \"ngModel\"], [2, \"margin-top\", \"6px\"], [\"type\", \"password\", \"placeholder\", \"new password (optional)\", 2, \"width\", \"100%\", 3, \"ngModelChange\", \"ngModel\"]],\n        template: function RoleSettingsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtemplate(0, RoleSettingsComponent_ng_container_0_Template, 62, 9, \"ng-container\", 2)(1, RoleSettingsComponent_ng_template_1_Template, 4, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n          }\n          if (rf & 2) {\n            const noPrivileges_r9 = i0.ɵɵreference(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.isAdmin)(\"ngIfElse\", noPrivileges_r9);\n          }\n        },\n        dependencies: [NgIf, NgFor, FormsModule, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.SelectControlValueAccessor, i2.SelectMultipleControlValueAccessor, i2.NgControlStatus, i2.NgModel],\n        styles: [\"h2[_ngcontent-%COMP%]{color:#1976d2}\"]\n      });\n    }\n  }\n  return RoleSettingsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}