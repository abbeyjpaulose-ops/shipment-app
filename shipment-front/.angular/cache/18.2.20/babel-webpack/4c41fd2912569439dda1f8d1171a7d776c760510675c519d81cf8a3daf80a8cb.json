{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet PkgComponent = class PkgComponent {\n  constructor(http) {\n    this.http = http;\n    this.pkgs = [];\n    this.showAddPkgPopup = false;\n    this.showEditPkgPopup = false;\n    this.showPkgDetailsPopup = false;\n    this.newPkg = {\n      pkgName: '',\n      rate: 0,\n      status: 'active',\n      email: localStorage.getItem('email'),\n      username: localStorage.getItem('username')\n    };\n    this.editingPkg = null;\n    this.selectedPkg = null;\n  }\n  ngOnInit() {\n    this.loadPkgs();\n  }\n  loadPkgs() {\n    const email = localStorage.getItem('email');\n    this.http.get(`http://localhost:3000/api/pkgs?email=${email}`).subscribe({\n      next: data => {\n        this.pkgs = data || [];\n      },\n      error: err => console.error('Error loading pkgs:', err)\n    });\n  }\n  openAddPkgPopup() {\n    this.showAddPkgPopup = true;\n  }\n  closeAddPkgPopup() {\n    this.showAddPkgPopup = false;\n  }\n  openPkgDetailsPopup(pkg) {\n    this.selectedPkg = pkg;\n    this.showPkgDetailsPopup = true;\n  }\n  closePkgDetailsPopup() {\n    this.selectedPkg = null;\n    this.showPkgDetailsPopup = false;\n  }\n  editPkgFromDetails() {\n    if (!this.selectedPkg) return;\n    const pkg = this.selectedPkg;\n    this.closePkgDetailsPopup();\n    this.editPkg(pkg);\n  }\n  addPkg() {\n    this.http.post('http://localhost:3000/api/pkgs/add', this.newPkg, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).subscribe({\n      next: () => {\n        alert('Package type added successfully!');\n        this.loadPkgs();\n        this.resetNewPkg();\n        this.closeAddPkgPopup();\n      },\n      error: err => {\n        console.error('Error saving pkg:', err);\n        alert('Error: ' + (err?.error?.message || err?.message || 'Unable to save'));\n      }\n    });\n  }\n  editPkg(pkg) {\n    this.editingPkg = {\n      ...pkg\n    };\n    this.showEditPkgPopup = true;\n  }\n  saveEdit() {\n    this.http.put(`http://localhost:3000/api/pkgs/${this.editingPkg._id}`, this.editingPkg).subscribe(() => {\n      this.loadPkgs();\n      this.editingPkg = null;\n      this.showEditPkgPopup = false;\n    });\n  }\n  closeEditPkgPopup() {\n    this.editingPkg = null;\n    this.showEditPkgPopup = false;\n  }\n  toggleStatus(pkg) {\n    this.http.patch(`http://localhost:3000/api/pkgs/${pkg._id}/status`, {}).subscribe(() => this.loadPkgs());\n  }\n  resetNewPkg() {\n    this.newPkg = {\n      pkgName: '',\n      rate: 0,\n      status: 'active',\n      email: localStorage.getItem('email'),\n      username: localStorage.getItem('username')\n    };\n  }\n};\nPkgComponent = __decorate([Component({\n  selector: 'app-pkg',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './pkg.component.html',\n  styleUrls: ['./pkg.component.css']\n})], PkgComponent);\nexport { PkgComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}