{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet ViewShipmentsComponent = class ViewShipmentsComponent {\n  constructor(http) {\n    this.http = http;\n    this.shipments = [];\n    this.filteredShipments = [];\n    this.searchText = '';\n    this.filterDate = '';\n    this.filterStatus = '';\n    this.filterConsignor = '';\n    this.selectedShipment = null; // ✅ for modal popup\n  }\n  ngOnInit() {\n    this.loadShipments();\n  }\n  loadShipments() {\n    this.http.get('http://localhost:3000/api/newshipments', {\n      params: {\n        email: localStorage.getItem('email') || ''\n      }\n    }).subscribe({\n      next: res => {\n        this.shipments = res.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n        this.filteredShipments = [...this.shipments];\n      },\n      error: err => console.error('❌ Error loading shipments:', err)\n    });\n  }\n  getInvoiceAmountTotal(products) {\n    if (!products || !Array.isArray(products)) {\n      alert(\"hello\");\n      return 0;\n    }\n    return products.reduce((sum, p) => sum + (p.amount || 0), 0);\n  }\n  applyFilters() {\n    this.filteredShipments = this.shipments.filter(s => {\n      const matchesSearch = this.searchText ? s.consignmentNumber?.toLowerCase().includes(this.searchText.toLowerCase()) || s.consignor?.toLowerCase().includes(this.searchText.toLowerCase()) : true;\n      const matchesDate = this.filterDate ? new Date(s.date).toDateString() === new Date(this.filterDate).toDateString() : true;\n      const matchesStatus = this.filterStatus ? s.shipmentStatus === this.filterStatus : true;\n      const matchesConsignor = this.filterConsignor ? s.consignor?.toLowerCase().includes(this.filterConsignor.toLowerCase()) : true;\n      return matchesSearch && matchesDate && matchesStatus && matchesConsignor;\n    });\n  }\n  // ✅ open details modal\n  openShipmentDetails(shipment) {\n    this.selectedShipment = shipment;\n  }\n  // ✅ close details modal\n  closeShipmentDetails() {\n    this.selectedShipment = null;\n  }\n};\nViewShipmentsComponent = __decorate([Component({\n  selector: 'app-view-shipments',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './view-shipments.component.html',\n  styleUrls: ['./view-shipments.component.css']\n})], ViewShipmentsComponent);\nexport { ViewShipmentsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}