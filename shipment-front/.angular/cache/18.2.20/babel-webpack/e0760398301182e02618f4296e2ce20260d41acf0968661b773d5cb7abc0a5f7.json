{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nexport let NewShipmentComponent = /*#__PURE__*/(() => {\n  class NewShipmentComponent {\n    constructor() {\n      // Section 1: Basic Details\n      this.ewaybillNumber = '';\n      this.consignmentNumber = this.getNextConsignmentNumber();\n      this.date = new Date().toISOString().split('T')[0];\n      this.origin = '';\n      this.destination = '';\n      this.bookingBranch = {\n        address: '',\n        state: '',\n        district: '',\n        pincode: ''\n      };\n      this.destinationBranch = {\n        address: '',\n        state: '',\n        district: '',\n        pincode: ''\n      };\n      // Section 2: Consignment & Payment Mode\n      this.consignor = '';\n      this.consignorGST = '';\n      this.consignee = '';\n      this.consigneeGST = '';\n      this.paymentMode = 'Account Credit';\n      this.externalRefId = '';\n      // Section 3: Invoice Details\n      this.invoices = [{\n        number: '',\n        value: 0\n      }];\n      // Section 4: Package Details\n      this.packages = [{\n        quantity: 1,\n        type: '',\n        product: '',\n        actualWeight: 0,\n        chargedWeight: 0,\n        rateType: '',\n        amount: 0\n      }];\n      // Section 5: Charges\n      this.charges = {\n        odc: 0,\n        unloading: 0,\n        docket: 0,\n        other: 0,\n        ccc: 0\n      };\n      this.finalAmount = 0;\n    }\n    // --- Methods ---\n    addInvoice() {\n      this.invoices.push({\n        number: '',\n        value: 0\n      });\n    }\n    addPackage() {\n      this.packages.push({\n        quantity: 1,\n        type: '',\n        product: '',\n        actualWeight: 0,\n        chargedWeight: 0,\n        rateType: '',\n        amount: 0\n      });\n    }\n    calculateFinalAmount() {\n      const invoiceTotal = this.invoices.reduce((sum, i) => sum + (i.value || 0), 0);\n      const packageTotal = this.packages.reduce((sum, p) => sum + (p.amount || 0), 0);\n      const chargeTotal = Object.values(this.charges).reduce((sum, c) => sum + (Number(c) || 0), 0);\n      this.finalAmount = invoiceTotal + packageTotal + chargeTotal;\n    }\n    resetForm() {\n      Object.assign(this, new NewShipmentComponent());\n    }\n    saveShipment() {\n      alert('Shipment saved successfully!');\n      console.log('Shipment Data:', this);\n    }\n    // --- Serial Number logic ---\n    getNextConsignmentNumber() {\n      const today = new Date();\n      const fiscalYear = today.getMonth() >= 3 ? today.getFullYear() : today.getFullYear() - 1;\n      const key = `consignment_${fiscalYear}`;\n      let last = parseInt(localStorage.getItem(key) || '0', 10);\n      last++;\n      localStorage.setItem(key, last.toString());\n      return last;\n    }\n    static {\n      this.ɵfac = function NewShipmentComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || NewShipmentComponent)();\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: NewShipmentComponent,\n        selectors: [[\"app-new-shipment\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 65,\n        vars: 1,\n        consts: [[1, \"shipment-form\"], [3, \"ngSubmit\", \"formGroup\"], [\"formGroupName\", \"basicDetails\"], [\"type\", \"text\", \"formControlName\", \"ewaybillNumber\"], [\"type\", \"text\", \"formControlName\", \"consignmentNumber\", \"disabled\", \"\"], [\"type\", \"date\", \"formControlName\", \"date\"], [\"type\", \"text\", \"formControlName\", \"origin\"], [\"type\", \"text\", \"formControlName\", \"destination\"], [\"formGroupName\", \"bookingBranch\"], [\"type\", \"text\", \"placeholder\", \"Address\", \"formControlName\", \"address\"], [\"type\", \"text\", \"placeholder\", \"State\", \"formControlName\", \"state\"], [\"type\", \"text\", \"placeholder\", \"District\", \"formControlName\", \"district\"], [\"type\", \"text\", \"placeholder\", \"Pincode\", \"formControlName\", \"pincode\"], [\"formGroupName\", \"destinationBranch\"], [\"formGroupName\", \"consignmentPayment\"], [\"type\", \"text\", \"formControlName\", \"consignor\"], [\"type\", \"text\", \"formControlName\", \"consignorGSTIN\"], [\"type\", \"text\", \"formControlName\", \"consignee\"], [\"type\", \"text\", \"formControlName\", \"consigneeGSTIN\"], [\"formControlName\", \"paymentMode\"], [\"type\", \"text\", \"formControlName\", \"externalReferenceId\"], [\"type\", \"submit\"]],\n        template: function NewShipmentComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2, \"New Shipment\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"form\", 1);\n            i0.ɵɵlistener(\"ngSubmit\", function NewShipmentComponent_Template_form_ngSubmit_3_listener() {\n              return ctx.submitShipment();\n            });\n            i0.ɵɵelementStart(4, \"fieldset\", 2)(5, \"legend\");\n            i0.ɵɵtext(6, \"Basic Details\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"label\");\n            i0.ɵɵtext(8, \"E-Waybill Number:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(9, \"input\", 3);\n            i0.ɵɵelementStart(10, \"label\");\n            i0.ɵɵtext(11, \"Consignment Number*:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(12, \"input\", 4);\n            i0.ɵɵelementStart(13, \"label\");\n            i0.ɵɵtext(14, \"Date*:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(15, \"input\", 5);\n            i0.ɵɵelementStart(16, \"label\");\n            i0.ɵɵtext(17, \"Origin Point:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(18, \"input\", 6);\n            i0.ɵɵelementStart(19, \"label\");\n            i0.ɵɵtext(20, \"Final Destination Point:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(21, \"input\", 7);\n            i0.ɵɵelementStart(22, \"h4\");\n            i0.ɵɵtext(23, \"Your Booking Branch\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"div\", 8);\n            i0.ɵɵelement(25, \"input\", 9)(26, \"input\", 10)(27, \"input\", 11)(28, \"input\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"h4\");\n            i0.ɵɵtext(30, \"Your Destination Branch\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(31, \"div\", 13);\n            i0.ɵɵelement(32, \"input\", 9)(33, \"input\", 10)(34, \"input\", 11)(35, \"input\", 12);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(36, \"fieldset\", 14)(37, \"legend\");\n            i0.ɵɵtext(38, \"Consignment & Payment Mode\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(39, \"label\");\n            i0.ɵɵtext(40, \"Consignor Details:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(41, \"input\", 15);\n            i0.ɵɵelementStart(42, \"label\");\n            i0.ɵɵtext(43, \"Consignor GSTIN:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(44, \"input\", 16);\n            i0.ɵɵelementStart(45, \"label\");\n            i0.ɵɵtext(46, \"Consignee Details:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(47, \"input\", 17);\n            i0.ɵɵelementStart(48, \"label\");\n            i0.ɵɵtext(49, \"Consignee GSTIN:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(50, \"input\", 18);\n            i0.ɵɵelementStart(51, \"label\");\n            i0.ɵɵtext(52, \"Payment Mode:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(53, \"select\", 19)(54, \"option\");\n            i0.ɵɵtext(55, \"Account credit\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(56, \"option\");\n            i0.ɵɵtext(57, \"Paid\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(58, \"option\");\n            i0.ɵɵtext(59, \"To Pay\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(60, \"label\");\n            i0.ɵɵtext(61, \"External Reference Id:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(62, \"input\", 20);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(63, \"button\", 21);\n            i0.ɵɵtext(64, \"Save Shipment\");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"formGroup\", ctx.shipmentForm);\n          }\n        },\n        dependencies: [CommonModule, FormsModule, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup],\n        styles: [\".shipment-form[_ngcontent-%COMP%]{padding:20px}fieldset[_ngcontent-%COMP%]{margin-bottom:20px;padding:15px;border:1px solid #ccc}legend[_ngcontent-%COMP%]{font-weight:700;padding:0 5px}label[_ngcontent-%COMP%]{display:block;margin-top:10px;font-weight:500}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{display:block;margin-top:5px;padding:6px;width:100%;max-width:400px}\"]\n      });\n    }\n  }\n  return NewShipmentComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}