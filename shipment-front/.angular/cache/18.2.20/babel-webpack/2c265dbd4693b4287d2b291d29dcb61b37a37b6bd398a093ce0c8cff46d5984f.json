{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet ClientsComponent = class ClientsComponent {\n  constructor(http) {\n    this.http = http;\n    this.clients = [];\n    this.newClient = {\n      companyName: '',\n      address: '',\n      city: '',\n      state: '',\n      pincode: '',\n      gstin: '',\n      status: 'active'\n    };\n    this.newBranch = {\n      branchAddress: '',\n      loyaltyDiscount: 0\n    };\n    this.username = localStorage.getItem('username');\n    this.email = localStorage.getItem('email');\n    this.editingClient = null;\n  }\n  ngOnInit() {\n    this.loadClients();\n  }\n  loadClients() {\n    const email = localStorage.getItem('email'); // set during login\n    this.http.get(`http://localhost:3000/api/clients?email=${email}`).subscribe({\n      next: data => {\n        console.log(\"Clients loaded:\", data); // ðŸ‘ˆ log to browser console\n        this.clients = data;\n      },\n      error: err => console.error(\"Error loading branches:\", err)\n    });\n  }\n  addClient() {\n    const clientData = {\n      ...this.newClient,\n      username: this.username,\n      email: this.email\n    };\n    this.http.post('http://localhost:3000/api/clients/add', clientData).subscribe({\n      next: () => {\n        this.newClient = {\n          companyName: '',\n          address: '',\n          city: '',\n          state: '',\n          pincode: '',\n          gstin: '',\n          status: 'active'\n        };\n        this.loadClients();\n      },\n      error: err => alert(err.error.message || 'Error adding client')\n    });\n  }\n  editClient(client) {\n    this.editingClient = {\n      ...client\n    };\n  }\n  saveEdit(client) {\n    this.http.put(`http://localhost:3000/api/clients/edit/${client._id}`, client).subscribe(() => this.loadClients());\n  }\n  toggleStatus(client) {\n    this.http.patch(`http://localhost:3000/api/clients/status/${client._id}`, {}).subscribe(() => this.loadClients());\n  }\n  addBranch(client) {\n    const branchData = {\n      ...this.newBranch\n    };\n    this.http.post(`http://localhost:3000/api/clients/add-branch/${client._id}`, branchData).subscribe(() => {\n      this.newBranch = {\n        branchAddress: '',\n        loyaltyDiscount: 0\n      };\n      this.loadClients();\n    });\n  }\n  deleteBranch(client, branchId) {\n    this.http.delete(`http://localhost:3000/api/clients/delete-branch/${client._id}/${branchId}`).subscribe(() => this.loadClients());\n  }\n};\nClientsComponent = __decorate([Component({\n  selector: 'app-clients',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './clients.component.html',\n  styleUrls: ['./clients.component.css']\n})], ClientsComponent);\nexport { ClientsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}