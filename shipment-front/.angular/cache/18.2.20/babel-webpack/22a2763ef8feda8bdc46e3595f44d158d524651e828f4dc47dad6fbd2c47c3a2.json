{"ast":null,"code":"import { inject } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\nimport { catchError, map, of } from 'rxjs';\nconst ALLOW_WITHOUT_BRANCHES = new Set(['Branches', 'profile', 'changePass', 'roles', 'notifications']);\nexport const branchRequiredGuard = childRoute => {\n  const router = inject(Router);\n  const http = inject(HttpClient);\n  const childPath = childRoute.routeConfig?.path || '';\n  if (ALLOW_WITHOUT_BRANCHES.has(childPath)) return true;\n  const token = localStorage.getItem('token');\n  if (!token) return router.createUrlTree(['/']);\n  return http.get('http://localhost:3000/api/branches').pipe(map(branches => {\n    const count = Array.isArray(branches) ? branches.length : 0;\n    if (count > 0) return true;\n    return router.createUrlTree(['/home', 'Branches']);\n  }), catchError(() => of(router.createUrlTree(['/home', 'Branches']))));\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}