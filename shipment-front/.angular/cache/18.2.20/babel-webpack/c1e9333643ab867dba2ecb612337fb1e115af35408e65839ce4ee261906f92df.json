{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet GuestsComponent = class GuestsComponent {\n  constructor(http) {\n    this.http = http;\n    this.guests = [];\n    this.showAddGuestPopup = false;\n    this.showEditGuestPopup = false;\n    this.showGuestDetailsPopup = false;\n    this.selectedGuest = null;\n    this.newGuest = {\n      guestName: '',\n      address: '',\n      city: '',\n      state: '',\n      pinCode: '',\n      phoneNum: '',\n      perDis: '',\n      status: 'active',\n      email: localStorage.getItem('email'),\n      username: localStorage.getItem('username')\n    };\n    this.editingGuest = null;\n  }\n  ngOnInit() {\n    this.loadGuests();\n  }\n  loadGuests() {\n    const email = localStorage.getItem('email'); // set during login\n    this.http.get(`http://localhost:3000/api/guests?email=${email}`).subscribe({\n      next: data => {\n        console.log(\"Guests loaded:\", data); // ðŸ‘ˆ log to browser console\n        this.guests = data;\n      },\n      error: err => console.error(\"Error loading guests:\", err)\n    });\n  }\n  openAddGuestPopup() {\n    this.showAddGuestPopup = true;\n  }\n  closeAddGuestPopup() {\n    this.showAddGuestPopup = false;\n  }\n  addGuest() {\n    console.log('ðŸ“¤ Sending guest data:');\n    this.http.post('http://localhost:3000/api/guests/add', this.newGuest, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).subscribe({\n      next: res => {\n        console.log('âœ… Guest saved', res);\n        alert('Guest added successfully!');\n        this.closeAddGuestPopup();\n        this.resetNewGuest();\n        this.loadGuests();\n      },\n      error: err => {\n        console.error('âŒ Error saving guest:', err);\n        alert('Error12: ' + err.error.message);\n      }\n    });\n  }\n  editGuest(guest) {\n    this.openEditGuestPopup(guest);\n  }\n  openEditGuestPopup(guest) {\n    this.editingGuest = {\n      ...guest\n    };\n    this.showEditGuestPopup = true;\n  }\n  closeEditGuestPopup() {\n    this.showEditGuestPopup = false;\n    this.editingGuest = null;\n  }\n  saveEdit() {\n    if (!this.editingGuest?._id) return;\n    this.http.put(`http://localhost:3000/api/guests/${this.editingGuest._id}`, this.editingGuest).subscribe(() => {\n      this.loadGuests();\n      this.closeEditGuestPopup();\n    });\n  }\n  toggleStatus(guest) {\n    this.http.patch(`http://localhost:3000/api/guests/${guest._id}/status`, {}).subscribe(() => this.loadGuests());\n  }\n  openGuestDetailsPopup(guest) {\n    this.selectedGuest = guest;\n    this.showGuestDetailsPopup = true;\n  }\n  closeGuestDetailsPopup() {\n    this.showGuestDetailsPopup = false;\n    this.selectedGuest = null;\n  }\n  editGuestFromDetails() {\n    if (!this.selectedGuest) return;\n    this.openEditGuestPopup(this.selectedGuest);\n    this.closeGuestDetailsPopup();\n  }\n  getGuestAddress(guest) {\n    const address = String(guest?.address || '').trim();\n    const city = String(guest?.city || '').trim();\n    const state = String(guest?.state || '').trim();\n    const pin = String(guest?.pinCode || '').trim();\n    const parts = [address, city, state, pin].filter(Boolean);\n    return parts.length ? parts.join(', ') : '-';\n  }\n  resetNewGuest() {\n    this.newGuest = {\n      guestName: '',\n      address: '',\n      city: '',\n      state: '',\n      pinCode: '',\n      phoneNum: '',\n      perDis: '',\n      status: 'active',\n      email: localStorage.getItem('email'),\n      username: localStorage.getItem('username')\n    };\n  }\n};\nGuestsComponent = __decorate([Component({\n  selector: 'app-guest',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  // ðŸ‘ˆ add here\n  templateUrl: './guest.component.html',\n  styleUrls: ['./guest.component.css']\n})], GuestsComponent);\nexport { GuestsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}