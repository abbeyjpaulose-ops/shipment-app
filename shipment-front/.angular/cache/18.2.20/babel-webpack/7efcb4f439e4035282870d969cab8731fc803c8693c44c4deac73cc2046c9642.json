{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet HubComponent = class HubComponent {\n  constructor(http) {\n    this.http = http;\n    this.hubs = [];\n    this.showAddHubPopup = false;\n    this.newHub = {\n      hubName: '',\n      address: '',\n      city: '',\n      state: '',\n      pinCode: '',\n      phoneNum: '',\n      perRev: '',\n      branch: localStorage.getItem('branch') || 'All Branches',\n      deliveryAddresses: [{\n        location: '',\n        vehicles: [{\n          vehicleNo: '',\n          driverPhone: ''\n        }]\n      }],\n      status: 'active'\n    };\n    this.editingHub = null;\n  }\n  ngOnInit() {\n    localStorage.setItem('branch', 'All Branches');\n    this.newHub.branch = localStorage.getItem('branch') || 'All Branches';\n    this.loadHubs();\n  }\n  loadHubs() {\n    this.http.get(`http://localhost:3000/api/hubs`).subscribe({\n      next: data => {\n        console.log(\"Hubs loaded:\", data);\n        this.hubs = data;\n      },\n      error: err => console.error(\"Error loading hubs:\", err)\n    });\n  }\n  openAddHubPopup() {\n    this.showAddHubPopup = true;\n  }\n  closeAddHubPopup() {\n    this.showAddHubPopup = false;\n  }\n  addHub() {\n    this.newHub.branch = localStorage.getItem('branch') || 'All Branches';\n    this.http.post('http://localhost:3000/api/hubs/add', this.newHub).subscribe({\n      next: () => {\n        alert('Hub added successfully!');\n        this.loadHubs();\n        this.resetForm();\n        this.closeAddHubPopup();\n      },\n      error: err => {\n        console.error('Error saving hub:', err);\n        alert('Error: ' + err.error?.message);\n      }\n    });\n  }\n  resetForm() {\n    this.newHub = {\n      hubName: '',\n      address: '',\n      city: '',\n      state: '',\n      pinCode: '',\n      phoneNum: '',\n      perRev: '',\n      branch: localStorage.getItem('branch') || 'All Branches',\n      deliveryAddresses: [{\n        location: '',\n        vehicles: [{\n          vehicleNo: '',\n          driverPhone: ''\n        }]\n      }],\n      status: 'active'\n    };\n  }\n  /** ðŸ”¹ Add / Remove Address in Add Mode */\n  addAddress() {\n    this.newHub.deliveryAddresses.push({\n      location: '',\n      vehicles: [{\n        vehicleNo: '',\n        driverPhone: ''\n      }]\n    });\n  }\n  removeAddress(i) {\n    this.newHub.deliveryAddresses.splice(i, 1);\n  }\n  /** ðŸ”¹ Add / Remove Vehicles in Add Mode */\n  addVehicle(addrIndex) {\n    this.newHub.deliveryAddresses[addrIndex].vehicles.push({\n      vehicleNo: '',\n      driverPhone: ''\n    });\n  }\n  removeVehicle(addrIndex, vIndex) {\n    this.newHub.deliveryAddresses[addrIndex].vehicles.splice(vIndex, 1);\n  }\n  /** ðŸ”¹ Edit Mode */\n  editHub(hub) {\n    this.editingHub = JSON.parse(JSON.stringify(hub)); // Deep clone\n  }\n  addAddressEdit() {\n    this.editingHub.deliveryAddresses.push({\n      location: '',\n      vehicles: [{\n        vehicleNo: '',\n        driverPhone: ''\n      }]\n    });\n  }\n  removeAddressEdit(i) {\n    this.editingHub.deliveryAddresses.splice(i, 1);\n  }\n  addVehicleEdit(addrIndex) {\n    this.editingHub.deliveryAddresses[addrIndex].vehicles.push({\n      vehicleNo: '',\n      driverPhone: ''\n    });\n  }\n  removeVehicleEdit(addrIndex, vIndex) {\n    this.editingHub.deliveryAddresses[addrIndex].vehicles.splice(vIndex, 1);\n  }\n  saveEdit() {\n    this.http.put(`http://localhost:3000/api/hubs/${this.editingHub._id}`, this.editingHub).subscribe({\n      next: () => {\n        this.loadHubs();\n        this.editingHub = null;\n      },\n      error: err => alert(\"Update failed!\")\n    });\n  }\n  /** ðŸ”¹ Toggle Active/Inactive */\n  toggleStatus(hub) {\n    this.http.patch(`http://localhost:3000/api/hubs/${hub._id}/status`, {\n      status: hub.status === 'active' ? 'inactive' : 'active'\n    }).subscribe(() => this.loadHubs());\n  }\n};\nHubComponent = __decorate([Component({\n  selector: 'app-hub',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './hub.component.html',\n  styleUrls: ['./hub.component.css']\n})], HubComponent);\nexport { HubComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}