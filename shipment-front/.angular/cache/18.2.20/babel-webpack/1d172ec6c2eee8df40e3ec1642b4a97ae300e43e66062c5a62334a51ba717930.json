{"ast":null,"code":"import { Validators, ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nexport let NewShipmentComponent = /*#__PURE__*/(() => {\n  class NewShipmentComponent {\n    constructor(fb) {\n      this.fb = fb;\n      // ðŸ”¹ Generate consignment number with yearly reset (April 1st)\n      this.consignmentNumber = this.generateConsignmentNumber();\n      this.shipmentForm = this.fb.group({\n        basicDetails: this.fb.group({\n          ewaybillNumber: [''],\n          consignmentNumber: [{\n            value: this.consignmentNumber,\n            disabled: true\n          }, Validators.required],\n          date: [new Date().toISOString().substring(0, 10), Validators.required],\n          origin: [''],\n          destination: [''],\n          bookingBranch: this.fb.group({\n            address: [''],\n            state: [''],\n            district: [''],\n            pincode: ['']\n          }),\n          destinationBranch: this.fb.group({\n            address: [''],\n            state: [''],\n            district: [''],\n            pincode: ['']\n          })\n        }),\n        consignmentPayment: this.fb.group({\n          consignor: [''],\n          consignorGSTIN: [''],\n          consignee: [''],\n          consigneeGSTIN: [''],\n          paymentMode: ['Account credit'],\n          externalReferenceId: ['']\n        })\n      });\n    }\n    // ðŸ”¹ Linear serial number with reset on April 1st\n    generateConsignmentNumber() {\n      const today = new Date();\n      const storageKey = `consignment_${today.getFullYear()}`;\n      let lastNum = parseInt(localStorage.getItem(storageKey) || '0', 10);\n      // Reset every April 1st\n      if (today.getMonth() === 3 && today.getDate() === 1) {\n        lastNum = 0;\n      }\n      lastNum++;\n      localStorage.setItem(storageKey, lastNum.toString());\n      return lastNum;\n    }\n    submitShipment() {\n      console.log(this.shipmentForm.getRawValue()); // âœ… includes disabled consignment number\n      alert('Shipment saved successfully!');\n    }\n    static {\n      this.Éµfac = function NewShipmentComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || NewShipmentComponent)(i0.ÉµÉµdirectiveInject(i1.FormBuilder));\n      };\n    }\n    static {\n      this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n        type: NewShipmentComponent,\n        selectors: [[\"app-new-shipment\"]],\n        standalone: true,\n        features: [i0.ÉµÉµStandaloneFeature],\n        decls: 65,\n        vars: 1,\n        consts: [[1, \"shipment-form\"], [3, \"ngSubmit\", \"formGroup\"], [\"formGroupName\", \"basicDetails\"], [\"type\", \"text\", \"formControlName\", \"ewaybillNumber\"], [\"type\", \"text\", \"formControlName\", \"consignmentNumber\", \"disabled\", \"\"], [\"type\", \"date\", \"formControlName\", \"date\"], [\"type\", \"text\", \"formControlName\", \"origin\"], [\"type\", \"text\", \"formControlName\", \"destination\"], [\"formGroupName\", \"bookingBranch\"], [\"type\", \"text\", \"placeholder\", \"Address\", \"formControlName\", \"address\"], [\"type\", \"text\", \"placeholder\", \"State\", \"formControlName\", \"state\"], [\"type\", \"text\", \"placeholder\", \"District\", \"formControlName\", \"district\"], [\"type\", \"text\", \"placeholder\", \"Pincode\", \"formControlName\", \"pincode\"], [\"formGroupName\", \"destinationBranch\"], [\"formGroupName\", \"consignmentPayment\"], [\"type\", \"text\", \"formControlName\", \"consignor\"], [\"type\", \"text\", \"formControlName\", \"consignorGSTIN\"], [\"type\", \"text\", \"formControlName\", \"consignee\"], [\"type\", \"text\", \"formControlName\", \"consigneeGSTIN\"], [\"formControlName\", \"paymentMode\"], [\"type\", \"text\", \"formControlName\", \"externalReferenceId\"], [\"type\", \"submit\"]],\n        template: function NewShipmentComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ÉµÉµtext(2, \"New Shipment\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelementStart(3, \"form\", 1);\n            i0.ÉµÉµlistener(\"ngSubmit\", function NewShipmentComponent_Template_form_ngSubmit_3_listener() {\n              return ctx.submitShipment();\n            });\n            i0.ÉµÉµelementStart(4, \"fieldset\", 2)(5, \"legend\");\n            i0.ÉµÉµtext(6, \"Basic Details\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelementStart(7, \"label\");\n            i0.ÉµÉµtext(8, \"E-Waybill Number:\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelement(9, \"input\", 3);\n            i0.ÉµÉµelementStart(10, \"label\");\n            i0.ÉµÉµtext(11, \"Consignment Number*:\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelement(12, \"input\", 4);\n            i0.ÉµÉµelementStart(13, \"label\");\n            i0.ÉµÉµtext(14, \"Date*:\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelement(15, \"input\", 5);\n            i0.ÉµÉµelementStart(16, \"label\");\n            i0.ÉµÉµtext(17, \"Origin Point:\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelement(18, \"input\", 6);\n            i0.ÉµÉµelementStart(19, \"label\");\n            i0.ÉµÉµtext(20, \"Final Destination Point:\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelement(21, \"input\", 7);\n            i0.ÉµÉµelementStart(22, \"h4\");\n            i0.ÉµÉµtext(23, \"Your Booking Branch\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelementStart(24, \"div\", 8);\n            i0.ÉµÉµelement(25, \"input\", 9)(26, \"input\", 10)(27, \"input\", 11)(28, \"input\", 12);\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelementStart(29, \"h4\");\n            i0.ÉµÉµtext(30, \"Your Destination Branch\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelementStart(31, \"div\", 13);\n            i0.ÉµÉµelement(32, \"input\", 9)(33, \"input\", 10)(34, \"input\", 11)(35, \"input\", 12);\n            i0.ÉµÉµelementEnd()();\n            i0.ÉµÉµelementStart(36, \"fieldset\", 14)(37, \"legend\");\n            i0.ÉµÉµtext(38, \"Consignment & Payment Mode\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelementStart(39, \"label\");\n            i0.ÉµÉµtext(40, \"Consignor Details:\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelement(41, \"input\", 15);\n            i0.ÉµÉµelementStart(42, \"label\");\n            i0.ÉµÉµtext(43, \"Consignor GSTIN:\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelement(44, \"input\", 16);\n            i0.ÉµÉµelementStart(45, \"label\");\n            i0.ÉµÉµtext(46, \"Consignee Details:\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelement(47, \"input\", 17);\n            i0.ÉµÉµelementStart(48, \"label\");\n            i0.ÉµÉµtext(49, \"Consignee GSTIN:\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelement(50, \"input\", 18);\n            i0.ÉµÉµelementStart(51, \"label\");\n            i0.ÉµÉµtext(52, \"Payment Mode:\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelementStart(53, \"select\", 19)(54, \"option\");\n            i0.ÉµÉµtext(55, \"Account credit\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelementStart(56, \"option\");\n            i0.ÉµÉµtext(57, \"Paid\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelementStart(58, \"option\");\n            i0.ÉµÉµtext(59, \"To Pay\");\n            i0.ÉµÉµelementEnd()();\n            i0.ÉµÉµelementStart(60, \"label\");\n            i0.ÉµÉµtext(61, \"External Reference Id:\");\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelement(62, \"input\", 20);\n            i0.ÉµÉµelementEnd();\n            i0.ÉµÉµelementStart(63, \"button\", 21);\n            i0.ÉµÉµtext(64, \"Save Shipment\");\n            i0.ÉµÉµelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ÉµÉµadvance(3);\n            i0.ÉµÉµproperty(\"formGroup\", ctx.shipmentForm);\n          }\n        },\n        dependencies: [CommonModule, ReactiveFormsModule, i1.ÉµNgNoValidate, i1.NgSelectOption, i1.ÉµNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i1.FormGroupName],\n        styles: [\".shipment-form[_ngcontent-%COMP%]{padding:20px}fieldset[_ngcontent-%COMP%]{margin-bottom:20px;padding:15px;border:1px solid #ccc}legend[_ngcontent-%COMP%]{font-weight:700;padding:0 5px}label[_ngcontent-%COMP%]{display:block;margin-top:10px;font-weight:500}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{display:block;margin-top:5px;padding:6px;width:100%;max-width:400px}\"]\n      });\n    }\n  }\n  return NewShipmentComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}