"use strict";(self.webpackChunkshipment_app=self.webpackChunkshipment_app||[]).push([[792],{261:()=>{function Wr(e,n){return Object.is(e,n)}let Ve=null,Do=!1,So=1;const sn=Symbol("SIGNAL");function ie(e){const n=Ve;return Ve=e,n}const $a={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xu(e){if(Do)throw new Error("");if(null===Ve)return;Ve.consumerOnSignalRead(e);const n=Ve.nextProducerIndex++;Wa(Ve),n<Ve.producerNode.length&&Ve.producerNode[n]!==e&&Qr(Ve)&&qa(Ve.producerNode[n],Ve.producerIndexOfThis[n]),Ve.producerNode[n]!==e&&(Ve.producerNode[n]=e,Ve.producerIndexOfThis[n]=Qr(Ve)?Dm(e,Ve,n):0),Ve.producerLastReadVersion[n]=e.version}function Cm(e){if((!Qr(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==So)){if(!e.producerMustRecompute(e)&&!td(e))return e.dirty=!1,void(e.lastCleanEpoch=So);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=So}}function bm(e){if(void 0===e.liveConsumerNode)return;const n=Do;Do=!0;try{for(const t of e.liveConsumerNode)t.dirty||wm(t)}finally{Do=n}}function Mm(){return!1!==Ve?.consumerAllowSignalWrites}function wm(e){e.dirty=!0,bm(e),e.consumerMarkedDirty?.(e)}function za(e){return e&&(e.nextProducerIndex=0),ie(e)}function ed(e,n){if(ie(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Qr(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)qa(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function td(e){Wa(e);for(let n=0;n<e.producerNode.length;n++){const t=e.producerNode[n],i=e.producerLastReadVersion[n];if(i!==t.version||(Cm(t),i!==t.version))return!0}return!1}function nd(e){if(Wa(e),Qr(e))for(let n=0;n<e.producerNode.length;n++)qa(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Dm(e,n,t){if(Sm(e),0===e.liveConsumerNode.length&&Im(e))for(let i=0;i<e.producerNode.length;i++)e.producerIndexOfThis[i]=Dm(e.producerNode[i],e,i);return e.liveConsumerIndexOfThis.push(t),e.liveConsumerNode.push(n)-1}function qa(e,n){if(Sm(e),1===e.liveConsumerNode.length&&Im(e))for(let i=0;i<e.producerNode.length;i++)qa(e.producerNode[i],e.producerIndexOfThis[i]);const t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const i=e.liveConsumerIndexOfThis[n],o=e.liveConsumerNode[n];Wa(o),o.producerIndexOfThis[i]=n}}function Qr(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Wa(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Sm(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Im(e){return void 0!==e.producerNode}const id=Symbol("UNSET"),od=Symbol("COMPUTING"),Qa=Symbol("ERRORED"),kI={...$a,value:id,dirty:!0,error:null,equal:Wr,producerMustRecompute:e=>e.value===id||e.value===od,producerRecomputeValue(e){if(e.value===od)throw new Error("Detected cycle in computations.");const n=e.value;e.value=od;const t=za(e);let i;try{i=e.computation()}catch(o){i=Qa,e.error=o}finally{ed(e,t)}n!==id&&n!==Qa&&i!==Qa&&e.equal(n,i)?e.value=n:(e.value=i,e.version++)}};let Tm=function PI(){throw new Error};function Em(){Tm()}let Za=null;function Nm(e,n){Mm()||Em(),e.equal(e.value,n)||(e.value=n,function LI(e){e.version++,function NI(){So++}(),bm(e),Za?.()}(e))}const FI={...$a,equal:Wr,value:void 0};function Ne(e){return"function"==typeof e}function rd(e){const t=e(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const sd=rd(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,o)=>`${o+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ad(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class Ct{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const r of t)r.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Ne(i))try{i()}catch(r){n=r instanceof sd?r.errors:[r]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const r of o)try{Am(r)}catch(s){n=n??[],s instanceof sd?n=[...n,...s.errors]:n.push(s)}}if(n)throw new sd(n)}}add(n){var t;if(n&&n!==this)if(this.closed)Am(n);else{if(n instanceof Ct){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&ad(t,n)}remove(n){const{_finalizers:t}=this;t&&ad(t,n),n instanceof Ct&&n._removeParent(this)}}Ct.EMPTY=(()=>{const e=new Ct;return e.closed=!0,e})();const km=Ct.EMPTY;function Pm(e){return e instanceof Ct||e&&"closed"in e&&Ne(e.remove)&&Ne(e.add)&&Ne(e.unsubscribe)}function Am(e){Ne(e)?e():e.unsubscribe()}const Fi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ka={setTimeout(e,n,...t){const{delegate:i}=Ka;return i?.setTimeout?i.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=Ka;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Om(e){Ka.setTimeout(()=>{const{onUnhandledError:n}=Fi;if(!n)throw e;n(e)})}function cd(){}const BI=ld("C",void 0,void 0);function ld(e,n,t){return{kind:e,value:n,error:t}}let Li=null;function Ya(e){if(Fi.useDeprecatedSynchronousErrorHandling){const n=!Li;if(n&&(Li={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:i}=Li;if(Li=null,t)throw i}}else e()}class ud extends Ct{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Pm(n)&&n.add(this)):this.destination=qI}static create(n,t,i){return new hd(n,t,i)}next(n){this.isStopped?fd(function UI(e){return ld("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?fd(function jI(e){return ld("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?fd(BI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const GI=Function.prototype.bind;function dd(e,n){return GI.call(e,n)}class $I{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(i){Ja(i)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(i){Ja(i)}else Ja(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){Ja(t)}}}class hd extends ud{constructor(n,t,i){let o;if(super(),Ne(n)||!n)o={next:n??void 0,error:t??void 0,complete:i??void 0};else{let r;this&&Fi.useDeprecatedNextContext?(r=Object.create(n),r.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&dd(n.next,r),error:n.error&&dd(n.error,r),complete:n.complete&&dd(n.complete,r)}):o=n}this.destination=new $I(o)}}function Ja(e){Fi.useDeprecatedSynchronousErrorHandling?function HI(e){Fi.useDeprecatedSynchronousErrorHandling&&Li&&(Li.errorThrown=!0,Li.error=e)}(e):Om(e)}function fd(e,n){const{onStoppedNotification:t}=Fi;t&&Ka.setTimeout(()=>t(e,n))}const qI={closed:!0,next:cd,error:function zI(e){throw e},complete:cd},pd="function"==typeof Symbol&&Symbol.observable||"@@observable";function Vi(e){return e}function Rm(e){return 0===e.length?Vi:1===e.length?e[0]:function(t){return e.reduce((i,o)=>o(i),t)}}let Ge=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new e;return i.source=this,i.operator=t,i}subscribe(t,i,o){const r=function ZI(e){return e&&e instanceof ud||function QI(e){return e&&Ne(e.next)&&Ne(e.error)&&Ne(e.complete)}(e)&&Pm(e)}(t)?t:new hd(t,i,o);return Ya(()=>{const{operator:s,source:a}=this;r.add(s?s.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Fm(i))((o,r)=>{const s=new hd({next:a=>{try{t(a)}catch(c){r(c),s.unsubscribe()}},error:r,complete:o});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[pd](){return this}pipe(...t){return Rm(t)(this)}toPromise(t){return new(t=Fm(t))((i,o)=>{let r;this.subscribe(s=>r=s,s=>o(s),()=>i(r))})}}return e.create=n=>new e(n),e})();function Fm(e){var n;return null!==(n=e??Fi.Promise)&&void 0!==n?n:Promise}const KI=rd(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let jt=(()=>{class e extends Ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Lm(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new KI}next(t){Ya(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Ya(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Ya(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:o,observers:r}=this;return i||o?km:(this.currentObservers=null,r.push(t),new Ct(()=>{this.currentObservers=null,ad(r,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:o,isStopped:r}=this;i?t.error(o):r&&t.complete()}asObservable(){const t=new Ge;return t.source=this,t}}return e.create=(n,t)=>new Lm(n,t),e})();class Lm extends jt{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,n)}error(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==i?i:km}}class Ut extends jt{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:i}=this;if(n)throw t;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function Vm(e){return Ne(e?.lift)}function at(e){return n=>{if(Vm(n))return n.lift(function(t){try{return e(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Qe(e,n,t,i,o){return new YI(e,n,t,i,o)}class YI extends ud{constructor(n,t,i,o,r,s){super(n),this.onFinalize=r,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){n.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){n.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function ce(e,n){return at((t,i)=>{let o=0;t.subscribe(Qe(i,r=>{i.next(e.call(n,r,o++))}))})}const Bm="https://g.co/ng/security#xss";class R extends Error{constructor(n,t){super(function Io(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}(n,t)),this.code=n}}function qn(e){return{toString:e}.toString()}const Eo="__parameters__";function xo(e,n,t){return qn(()=>{const i=function gd(e){return function(...t){if(e){const i=e(...t);for(const o in i)this[o]=i[o]}}}(n);function o(...r){if(this instanceof o)return i.apply(this,r),this;const s=new o(...r);return a.annotation=s,a;function a(c,d,f){const g=c.hasOwnProperty(Eo)?c[Eo]:Object.defineProperty(c,Eo,{value:[]})[Eo];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(s),c}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}const xe=globalThis;function _e(e){for(let n in e)if(e[n]===_e)return n;throw Error("Could not find renamed property on target object.")}function JI(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Ze(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ze).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function md(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const XI=_e({__forward_ref__:_e});function De(e){return e.__forward_ref__=De,e.toString=function(){return Ze(this())},e}function Q(e){return ec(e)?e():e}function ec(e){return"function"==typeof e&&e.hasOwnProperty(XI)&&e.__forward_ref__===De}function G(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Bi(e){return{providers:e.providers||[],imports:e.imports||[]}}function tc(e){return Gm(e,ic)||Gm(e,$m)}function Gm(e,n){return e.hasOwnProperty(n)?e[n]:null}function nc(e){return e&&(e.hasOwnProperty(_d)||e.hasOwnProperty(rT))?e[_d]:null}const ic=_e({\u0275prov:_e}),_d=_e({\u0275inj:_e}),$m=_e({ngInjectableDef:_e}),rT=_e({ngInjectorDef:_e});class B{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Md(e){return e&&!!e.\u0275providers}const Zr=_e({\u0275cmp:_e}),wd=_e({\u0275dir:_e}),Dd=_e({\u0275pipe:_e}),qm=_e({\u0275mod:_e}),Wn=_e({\u0275fac:_e}),Kr=_e({__NG_ELEMENT_ID__:_e}),Wm=_e({__NG_ENV_ID__:_e});function ee(e){return"string"==typeof e?e:null==e?"":String(e)}function Sd(e,n){throw new R(-201,!1)}var ae=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(ae||{});let Id;function Qm(){return Id}function Pt(e){const n=Id;return Id=e,n}function Zm(e,n,t){const i=tc(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ae.Optional?null:void 0!==n?n:void Sd()}const Yr={},Td="__NG_DI_FLAG__",oc="ngTempTokenPath",dT=/\n/gm,Km="__source";let ko;function hi(e){const n=ko;return ko=e,n}function pT(e,n=ae.Default){if(void 0===ko)throw new R(-203,!1);return null===ko?Zm(e,void 0,n):ko.get(e,n&ae.Optional?null:void 0,n)}function Y(e,n=ae.Default){return(Qm()||pT)(Q(e),n)}function F(e,n=ae.Default){return Y(e,rc(n))}function rc(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ed(e){const n=[];for(let t=0;t<e.length;t++){const i=Q(e[t]);if(Array.isArray(i)){if(0===i.length)throw new R(900,!1);let o,r=ae.Default;for(let s=0;s<i.length;s++){const a=i[s],c=gT(a);"number"==typeof c?-1===c?o=a.token:r|=c:o=a}n.push(Y(o,r))}else n.push(Y(i))}return n}function Jr(e,n){return e[Td]=n,e.prototype[Td]=n,e}function gT(e){return e[Td]}const Nd=Jr(xo("Optional"),8),xd=Jr(xo("SkipSelf"),4);function ji(e,n){return e.hasOwnProperty(Wn)?e[Wn]:null}function Po(e,n){e.forEach(t=>Array.isArray(t)?Po(t,n):n(t))}function Jm(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function sc(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function $t(e,n,t){let i=Ao(e,n);return i>=0?e[1|i]=t:(i=~i,function Xm(e,n,t,i){let o=e.length;if(o==n)e.push(t,i);else if(1===o)e.push(i,e[0]),e[0]=t;else{for(o--,e.push(e[o-1],e[o]);o>n;)e[o]=e[o-2],o--;e[n]=t,e[n+1]=i}}(e,i,n,t)),i}function Pd(e,n){const t=Ao(e,n);if(t>=0)return e[1|t]}function Ao(e,n){return function e_(e,n,t){let i=0,o=e.length>>t;for(;o!==i;){const r=i+(o-i>>1),s=e[r<<t];if(n===s)return r<<t;s>n?o=r:i=r+1}return~(o<<t)}(e,n,1)}const Dn={},ue=[],Sn=new B(""),t_=new B("",-1),Ad=new B("");class cc{get(n,t=Yr){if(t===Yr){const i=new Error(`NullInjectorError: No provider for ${Ze(n)}!`);throw i.name="NullInjectorError",i}return t}}var lc=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(lc||{}),an=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(an||{}),fi=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(fi||{});function MT(e,n,t){let i=e.length;for(;;){const o=e.indexOf(n,t);if(-1===o)return o;if(0===o||e.charCodeAt(o-1)<=32){const r=n.length;if(o+r===i||e.charCodeAt(o+r)<=32)return o}t=o+1}}function Od(e,n,t){let i=0;for(;i<t.length;){const o=t[i];if("number"==typeof o){if(0!==o)break;i++;const r=t[i++],s=t[i++],a=t[i++];e.setAttribute(n,s,a,r)}else{const r=o,s=t[++i];i_(r)?e.setProperty(n,r,s):e.setAttribute(n,r,s),i++}}return i}function n_(e){return 3===e||4===e||6===e}function i_(e){return 64===e.charCodeAt(0)}function Xr(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let i=0;i<n.length;i++){const o=n[i];"number"==typeof o?t=o:0===t||o_(e,t,o,null,-1===t||2===t?n[++i]:null)}}return e}function o_(e,n,t,i,o){let r=0,s=e.length;if(-1===n)s=-1;else for(;r<e.length;){const a=e[r++];if("number"==typeof a){if(a===n){s=-1;break}if(a>n){s=r-1;break}}}for(;r<e.length;){const a=e[r];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==o&&(e[r+1]=o));if(i===e[r+1])return void(e[r+2]=o)}r++,null!==i&&r++,null!==o&&r++}-1!==s&&(e.splice(s,0,n),r=s+1),e.splice(r++,0,t),null!==i&&e.splice(r++,0,i),null!==o&&e.splice(r++,0,o)}const r_="ng-template";function wT(e,n,t,i){let o=0;if(i){for(;o<n.length&&"string"==typeof n[o];o+=2)if("class"===n[o]&&-1!==MT(n[o+1].toLowerCase(),t,0))return!0}else if(Rd(e))return!1;if(o=n.indexOf(1,o),o>-1){let r;for(;++o<n.length&&"string"==typeof(r=n[o]);)if(r.toLowerCase()===t)return!0}return!1}function Rd(e){return 4===e.type&&e.value!==r_}function DT(e,n,t){return n===(4!==e.type||t?e.value:r_)}function ST(e,n,t){let i=4;const o=e.attrs,r=null!==o?function ET(e){for(let n=0;n<e.length;n++)if(n_(e[n]))return n;return e.length}(o):0;let s=!1;for(let a=0;a<n.length;a++){const c=n[a];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!DT(e,c,t)||""===c&&1===n.length){if(cn(i))return!1;s=!0}}else if(8&i){if(null===o||!wT(e,o,c,t)){if(cn(i))return!1;s=!0}}else{const d=n[++a],f=IT(c,o,Rd(e),t);if(-1===f){if(cn(i))return!1;s=!0;continue}if(""!==d){let g;if(g=f>r?"":o[f+1].toLowerCase(),2&i&&d!==g){if(cn(i))return!1;s=!0}}}}else{if(!s&&!cn(i)&&!cn(c))return!1;if(s&&cn(c))continue;s=!1,i=c|1&i}}return cn(i)||s}function cn(e){return!(1&e)}function IT(e,n,t,i){if(null===n)return-1;let o=0;if(i||!t){let r=!1;for(;o<n.length;){const s=n[o];if(s===e)return o;if(3===s||6===s)r=!0;else{if(1===s||2===s){let a=n[++o];for(;"string"==typeof a;)a=n[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=r?1:2}return-1}return function NT(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const i=e[t];if("number"==typeof i)return-1;if(i===n)return t;t++}return-1}(n,e)}function s_(e,n,t=!1){for(let i=0;i<n.length;i++)if(ST(e,n[i],t))return!0;return!1}function a_(e,n){return e?":not("+n.trim()+")":n}function kT(e){let n=e[0],t=1,i=2,o="",r=!1;for(;t<e.length;){let s=e[t];if("string"==typeof s)if(2&i){const a=e[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?o+="."+s:4&i&&(o+=" "+s);else""!==o&&!cn(s)&&(n+=a_(r,o),o=""),i=s,r=r||!cn(i);t++}return""!==o&&(n+=a_(r,o)),n}function pe(e){return qn(()=>{const n=l_(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===lc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||an.Emulated,styles:e.styles||ue,_:null,schemas:e.schemas||null,tView:null,id:""};u_(t);const i=e.dependencies;return t.directiveDefs=uc(i,!1),t.pipeDefs=uc(i,!0),t.id=function LT(e){let n=0;const t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const o of t)n=Math.imul(31,n)+o.charCodeAt(0)|0;return n+=2147483648,"c"+n}(t),t})}function OT(e){return se(e)||Ke(e)}function RT(e){return null!==e}function Oo(e){return qn(()=>({type:e.type,bootstrap:e.bootstrap||ue,declarations:e.declarations||ue,imports:e.imports||ue,exports:e.exports||ue,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function c_(e,n){if(null==e)return Dn;const t={};for(const i in e)if(e.hasOwnProperty(i)){const o=e[i];let r,s,a=fi.None;Array.isArray(o)?(a=o[0],r=o[1],s=o[2]??r):(r=o,s=o),n?(t[r]=a!==fi.None?[i,a]:i,n[r]=s):t[r]=i}return t}function J(e){return qn(()=>{const n=l_(e);return u_(n),n})}function Ot(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function se(e){return e[Zr]||null}function Ke(e){return e[wd]||null}function ct(e){return e[Dd]||null}function pt(e,n){const t=e[qm]||null;if(!t&&!0===n)throw new Error(`Type ${Ze(e)} does not have '\u0275mod' property.`);return t}function l_(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||Dn,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||ue,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:c_(e.inputs,n),outputs:c_(e.outputs),debugInfo:null}}function u_(e){e.features?.forEach(n=>n(e))}function uc(e,n){if(!e)return null;const t=n?ct:OT;return()=>("function"==typeof e?e():e).map(i=>t(i)).filter(RT)}function Ro(e){return{\u0275providers:e}}function VT(...e){return{\u0275providers:Fd(0,e),\u0275fromNgModule:!0}}function Fd(e,...n){const t=[],i=new Set;let o;const r=s=>{t.push(s)};return Po(n,s=>{const a=s;dc(a,r,[],i)&&(o||=[],o.push(a))}),void 0!==o&&d_(o,r),t}function d_(e,n){for(let t=0;t<e.length;t++){const{ngModule:i,providers:o}=e[t];Ld(o,r=>{n(r,i)})}}function dc(e,n,t,i){if(!(e=Q(e)))return!1;let o=null,r=nc(e);const s=!r&&se(e);if(r||s){if(s&&!s.standalone)return!1;o=e}else{const c=e.ngModule;if(r=nc(c),!r)return!1;o=c}const a=i.has(o);if(s){if(a)return!1;if(i.add(o),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of c)dc(d,n,t,i)}}else{if(!r)return!1;{if(null!=r.imports&&!a){let d;i.add(o);try{Po(r.imports,f=>{dc(f,n,t,i)&&(d||=[],d.push(f))})}finally{}void 0!==d&&d_(d,n)}if(!a){const d=ji(o)||(()=>new o);n({provide:o,useFactory:d,deps:ue},o),n({provide:Ad,useValue:o,multi:!0},o),n({provide:Sn,useValue:()=>Y(o),multi:!0},o)}const c=r.providers;if(null!=c&&!a){const d=e;Ld(c,f=>{n(f,d)})}}}return o!==e&&void 0!==e.providers}function Ld(e,n){for(let t of e)Md(t)&&(t=t.\u0275providers),Array.isArray(t)?Ld(t,n):n(t)}const BT=_e({provide:String,useValue:_e});function Vd(e){return null!==e&&"object"==typeof e&&BT in e}function Ui(e){return"function"==typeof e}const Bd=new B(""),hc={},UT={};let jd;function fc(){return void 0===jd&&(jd=new cc),jd}class Rt{}class Fo extends Rt{get destroyed(){return this._destroyed}constructor(n,t,i,o){super(),this.parent=t,this.source=i,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Hd(n,s=>this.processProvider(s)),this.records.set(t_,Lo(void 0,this)),o.has("environment")&&this.records.set(Rt,Lo(void 0,this));const r=this.records.get(Bd);null!=r&&"string"==typeof r.value&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(Ad,ue,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=ie(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const t=hi(this),i=Pt(void 0);try{return n()}finally{hi(t),Pt(i)}}get(n,t=Yr,i=ae.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Wm))return n[Wm](this);i=rc(i);const r=hi(this),s=Pt(void 0);try{if(!(i&ae.SkipSelf)){let c=this.records.get(n);if(void 0===c){const d=function qT(e){return"function"==typeof e||"object"==typeof e&&e instanceof B}(n)&&tc(n);c=d&&this.injectableDefInScope(d)?Lo(Ud(n),hc):null,this.records.set(n,c)}if(null!=c)return this.hydrate(n,c)}return(i&ae.Self?fc():this.parent).get(n,t=i&ae.Optional&&t===Yr?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[oc]=a[oc]||[]).unshift(Ze(n)),r)throw a;return function mT(e,n,t,i){const o=e[oc];throw n[Km]&&o.unshift(n[Km]),e.message=function _T(e,n,t,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let o=Ze(n);if(Array.isArray(n))o=n.map(Ze).join(" -> ");else if("object"==typeof n){let r=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];r.push(s+":"+("string"==typeof a?JSON.stringify(a):Ze(a)))}o=`{${r.join(", ")}}`}return`${t}${i?"("+i+")":""}[${o}]: ${e.replace(dT,"\n  ")}`}("\n"+e.message,o,t,i),e.ngTokenPath=o,e[oc]=null,e}(a,n,"R3InjectorError",this.source)}throw a}finally{Pt(s),hi(r)}}resolveInjectorInitializers(){const n=ie(null),t=hi(this),i=Pt(void 0);try{const r=this.get(Sn,ue,ae.Self);for(const s of r)s()}finally{hi(t),Pt(i),ie(n)}}toString(){const n=[],t=this.records;for(const i of t.keys())n.push(Ze(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new R(205,!1)}processProvider(n){let t=Ui(n=Q(n))?n:Q(n&&n.provide);const i=function GT(e){return Vd(e)?Lo(void 0,e.useValue):Lo(p_(e),hc)}(n);if(!Ui(n)&&!0===n.multi){let o=this.records.get(t);o||(o=Lo(void 0,hc,!0),o.factory=()=>Ed(o.multi),this.records.set(t,o)),t=n,o.multi.push(n)}this.records.set(t,i)}hydrate(n,t){const i=ie(null);try{return t.value===hc&&(t.value=UT,t.value=t.factory()),"object"==typeof t.value&&t.value&&function zT(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ie(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;const t=Q(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){const t=this._onDestroyHooks.indexOf(n);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Ud(e){const n=tc(e),t=null!==n?n.factory:ji(e);if(null!==t)return t;if(e instanceof B)throw new R(204,!1);if(e instanceof Function)return function HT(e){if(e.length>0)throw new R(204,!1);const t=function oT(e){return e&&(e[ic]||e[$m])||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new R(204,!1)}function p_(e,n,t){let i;if(Ui(e)){const o=Q(e);return ji(o)||Ud(o)}if(Vd(e))i=()=>Q(e.useValue);else if(function f_(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...Ed(e.deps||[]));else if(function h_(e){return!(!e||!e.useExisting)}(e))i=()=>Y(Q(e.useExisting));else{const o=Q(e&&(e.useClass||e.provide));if(!function $T(e){return!!e.deps}(e))return ji(o)||Ud(o);i=()=>new o(...Ed(e.deps))}return i}function Lo(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function Hd(e,n){for(const t of e)Array.isArray(t)?Hd(t,n):t&&Md(t)?Hd(t.\u0275providers,n):n(t)}function Qn(e,n){e instanceof Fo&&e.assertNotDestroyed();const i=hi(e),o=Pt(void 0);try{return n()}finally{hi(i),Pt(o)}}const ke=0,V=1,$=2,$e=3,ln=4,lt=5,bt=6,Bo=7,Se=8,ze=9,In=10,Z=11,ts=12,__=13,jo=14,Pe=15,Hi=16,Uo=17,Zn=18,Ho=19,v_=20,gi=21,gc=22,Jt=23,H=25,zd=1,Tn=7,Go=9,Be=10;var _c=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(_c||{});function Je(e){return Array.isArray(e)&&"object"==typeof e[zd]}function gt(e){return Array.isArray(e)&&!0===e[zd]}function qd(e){return!!(4&e.flags)}function Gi(e){return e.componentOffset>-1}function vc(e){return!(1&~e.flags)}function un(e){return!!e.template}function is(e){return!!(512&e[$])}class oE{constructor(n,t,i){this.previousValue=n,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function w_(e,n,t,i){null!==n?n.applyValueToInputSignal(n,i):e[t]=i}function Xt(){return D_}function D_(e){return e.type.prototype.ngOnChanges&&(e.setInput=sE),rE}function rE(){const e=I_(this),n=e?.current;if(n){const t=e.previous;if(t===Dn)e.previous=n;else for(let i in n)t[i]=n[i];e.current=null,this.ngOnChanges(n)}}function sE(e,n,t,i,o){const r=this.declaredInputs[i],s=I_(e)||function aE(e,n){return e[S_]=n}(e,{previous:Dn,current:null}),a=s.current||(s.current={}),c=s.previous,d=c[r];a[r]=new oE(d&&d.currentValue,t,c===Dn),w_(e,n,o,t)}Xt.ngInherit=!0;const S_="__ngSimpleChanges__";function I_(e){return e[S_]||null}const En=function(e,n,t){};function de(e){for(;Array.isArray(e);)e=e[ke];return e}function os(e,n){return de(n[e])}function Mt(e,n){return de(n[e.index])}function rs(e,n){return e.data[n]}function $i(e,n){return e[n]}function zt(e,n){const t=n[e];return Je(t)?t:t[ke]}function Yd(e){return!(128&~e[$])}function en(e,n){return null==n?null:e[n]}function N_(e){e[Uo]=0}function x_(e){1024&e[$]||(e[$]|=1024,Yd(e)&&Cc(e))}function yc(e){return!!(9216&e[$]||e[Jt]?.dirty)}function Jd(e){e[In].changeDetectionScheduler?.notify(8),64&e[$]&&(e[$]|=1024),yc(e)&&Cc(e)}function Cc(e){e[In].changeDetectionScheduler?.notify(0);let n=Kn(e);for(;null!==n&&!(8192&n[$])&&(n[$]|=8192,Yd(n));)n=Kn(n)}function bc(e,n){if(!(256&~e[$]))throw new R(911,!1);null===e[gi]&&(e[gi]=[]),e[gi].push(n)}function Kn(e){const n=e[$e];return gt(n)?n[$e]:n}const K={lFrame:G_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let P_=!1;function A_(){return K.bindingsEnabled}function k(){return K.lFrame.lView}function oe(){return K.lFrame.tView}function y(e){return K.lFrame.contextLView=e,e[Se]}function C(e){return K.lFrame.contextLView=null,e}function ve(){let e=O_();for(;null!==e&&64===e.type;)e=e.parent;return e}function O_(){return K.lFrame.currentTNode}function dn(e,n){const t=K.lFrame;t.currentTNode=e,t.isParent=n}function th(){return K.lFrame.isParent}function nh(){K.lFrame.isParent=!1}function L_(){return P_}function V_(e){P_=e}function wt(){const e=K.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Yn(){return K.lFrame.bindingIndex}function hn(){return K.lFrame.bindingIndex++}function Jn(e){const n=K.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function bE(e,n){const t=K.lFrame;t.bindingIndex=t.bindingRootIndex=e,ih(n)}function ih(e){K.lFrame.currentDirectiveIndex=e}function wc(e){K.lFrame.currentQueryIndex=e}function wE(e){const n=e[V];return 2===n.type?n.declTNode:1===n.type?e[lt]:null}function U_(e,n,t){if(t&ae.SkipSelf){let o=n,r=e;for(;!(o=o.parent,null!==o||t&ae.Host||(o=wE(r),null===o||(r=r[jo],10&o.type))););if(null===o)return!1;n=o,e=r}const i=K.lFrame=H_();return i.currentTNode=n,i.lView=e,!0}function sh(e){const n=H_(),t=e[V];K.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function H_(){const e=K.lFrame,n=null===e?null:e.child;return null===n?G_(e):n}function G_(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function $_(){const e=K.lFrame;return K.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const z_=$_;function ah(){const e=$_();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ut(){return K.lFrame.selectedIndex}function qi(e){K.lFrame.selectedIndex=e}function Ie(){const e=K.lFrame;return rs(e.tView,e.selectedIndex)}let W_=!0;function as(){return W_}function Nn(e){W_=e}function Dc(e,n){for(let t=n.directiveStart,i=n.directiveEnd;t<i;t++){const r=e.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:f}=r;s&&(e.contentHooks??=[]).push(-t,s),a&&((e.contentHooks??=[]).push(t,a),(e.contentCheckHooks??=[]).push(t,a)),c&&(e.viewHooks??=[]).push(-t,c),d&&((e.viewHooks??=[]).push(t,d),(e.viewCheckHooks??=[]).push(t,d)),null!=f&&(e.destroyHooks??=[]).push(t,f)}}function Sc(e,n,t){Q_(e,n,3,t)}function Ic(e,n,t,i){(3&e[$])===t&&Q_(e,n,t,i)}function ch(e,n){let t=e[$];(3&t)===n&&(t&=16383,t+=1,e[$]=t)}function Q_(e,n,t,i){const r=i??-1,s=n.length-1;let a=0;for(let c=void 0!==i?65535&e[Uo]:0;c<s;c++)if("number"==typeof n[c+1]){if(a=n[c],null!=i&&a>=i)break}else n[c]<0&&(e[Uo]+=65536),(a<r||-1==r)&&(xE(e,t,n,c),e[Uo]=(4294901760&e[Uo])+c+2),c++}function Z_(e,n){En(4,e,n);const t=ie(null);try{n.call(e)}finally{ie(t),En(5,e,n)}}function xE(e,n,t,i){const o=t[i]<0,r=t[i+1],a=e[o?-t[i]:t[i]];o?e[$]>>14<e[Uo]>>16&&(3&e[$])===n&&(e[$]+=16384,Z_(a,r)):Z_(a,r)}const $o=-1;class cs{constructor(n,t,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}const uh={};class Wi{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,i){i=rc(i);const o=this.injector.get(n,uh,i);return o!==uh||t===uh?o:this.parentInjector.get(n,t,i)}}function dh(e){return e!==$o}function ls(e){return 32767&e}function us(e,n){let t=function RE(e){return e>>16}(e),i=n;for(;t>0;)i=i[jo],t--;return i}let hh=!0;function Tc(e){const n=hh;return hh=e,n}const Y_=255,J_=5;let LE=0;const xn={};function Ec(e,n){const t=X_(e,n);if(-1!==t)return t;const i=n[V];i.firstCreatePass&&(e.injectorIndex=n.length,fh(i.data,e),fh(n,null),fh(i.blueprint,null));const o=Nc(e,n),r=e.injectorIndex;if(dh(o)){const s=ls(o),a=us(o,n),c=a[V].data;for(let d=0;d<8;d++)n[r+d]=a[s+d]|c[s+d]}return n[r+8]=o,r}function fh(e,n){e.push(0,0,0,0,0,0,0,0,n)}function X_(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Nc(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,i=null,o=n;for(;null!==o;){if(i=sv(o),null===i)return $o;if(t++,o=o[jo],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return $o}function ph(e,n,t){!function VE(e,n,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Kr)&&(i=t[Kr]),null==i&&(i=t[Kr]=LE++);const o=i&Y_;n.data[e+(o>>J_)]|=1<<o}(e,n,t)}function ev(e,n,t){if(t&ae.Optional||void 0!==e)return e;Sd()}function tv(e,n,t,i){if(t&ae.Optional&&void 0===i&&(i=null),!(t&(ae.Self|ae.Host))){const o=e[ze],r=Pt(void 0);try{return o?o.get(n,i,t&ae.Optional):Zm(n,i,t&ae.Optional)}finally{Pt(r)}}return ev(i,0,t)}function nv(e,n,t,i=ae.Default,o){if(null!==e){if(2048&n[$]&&!(i&ae.Self)){const s=function GE(e,n,t,i,o){let r=e,s=n;for(;null!==r&&null!==s&&2048&s[$]&&!(512&s[$]);){const a=iv(r,s,t,i|ae.Self,xn);if(a!==xn)return a;let c=r.parent;if(!c){const d=s[v_];if(d){const f=d.get(t,xn,i);if(f!==xn)return f}c=sv(s),s=s[jo]}r=c}return o}(e,n,t,i,xn);if(s!==xn)return s}const r=iv(e,n,t,i,xn);if(r!==xn)return r}return tv(n,t,i,o)}function iv(e,n,t,i,o){const r=function UE(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Kr)?e[Kr]:void 0;return"number"==typeof n?n>=0?n&Y_:HE:n}(t);if("function"==typeof r){if(!U_(n,e,i))return i&ae.Host?ev(o,0,i):tv(n,t,i,o);try{let s;if(s=r(i),null!=s||i&ae.Optional)return s;Sd()}finally{z_()}}else if("number"==typeof r){let s=null,a=X_(e,n),c=$o,d=i&ae.Host?n[Pe][lt]:null;for((-1===a||i&ae.SkipSelf)&&(c=-1===a?Nc(e,n):n[a+8],c!==$o&&rv(i,!1)?(s=n[V],a=ls(c),n=us(c,n)):a=-1);-1!==a;){const f=n[V];if(ov(r,a,f.data)){const g=jE(a,n,t,s,i,d);if(g!==xn)return g}c=n[a+8],c!==$o&&rv(i,n[V].data[a+8]===d)&&ov(r,a,n)?(s=f,a=ls(c),n=us(c,n)):a=-1}}return o}function jE(e,n,t,i,o,r){const s=n[V],a=s.data[e+8],f=function xc(e,n,t,i,o){const r=e.providerIndexes,s=n.data,a=1048575&r,c=e.directiveStart,f=r>>20,_=o?a+f:e.directiveEnd;for(let v=i?a:a+f;v<_;v++){const b=s[v];if(v<c&&t===b||v>=c&&b.type===t)return v}if(o){const v=s[c];if(v&&un(v)&&v.type===t)return c}return null}(a,s,t,null==i?Gi(a)&&hh:i!=s&&!!(3&a.type),o&ae.Host&&r===a);return null!==f?Qi(n,s,f,a):xn}function Qi(e,n,t,i){let o=e[t];const r=n.data;if(function kE(e){return e instanceof cs}(o)){const s=o;s.resolving&&function cT(e,n){throw n&&n.join(" > "),new R(-200,e)}(function fe(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():ee(e)}(r[t]));const a=Tc(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?Pt(s.injectImpl):null;U_(e,i,ae.Default);try{o=e[t]=s.factory(void 0,r,e,i),n.firstCreatePass&&t>=i.directiveStart&&function NE(e,n,t){const{ngOnChanges:i,ngOnInit:o,ngDoCheck:r}=n.type.prototype;if(i){const s=D_(n);(t.preOrderHooks??=[]).push(e,s),(t.preOrderCheckHooks??=[]).push(e,s)}o&&(t.preOrderHooks??=[]).push(0-e,o),r&&((t.preOrderHooks??=[]).push(e,r),(t.preOrderCheckHooks??=[]).push(e,r))}(t,r[t],n)}finally{null!==d&&Pt(d),Tc(a),s.resolving=!1,z_()}}return o}function ov(e,n,t){return!!(t[n+(e>>J_)]&1<<e)}function rv(e,n){return!(e&ae.Self||e&ae.Host&&n)}class Xe{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,i){return nv(this._tNode,this._lView,n,rc(i),t)}}function HE(){return new Xe(ve(),k())}function it(e){return qn(()=>{const n=e.prototype.constructor,t=n[Wn]||gh(n),i=Object.prototype;let o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==i;){const r=o[Wn]||gh(o);if(r&&r!==t)return r;o=Object.getPrototypeOf(o)}return r=>new r})}function gh(e){return ec(e)?()=>{const n=gh(Q(e));return n&&n()}:ji(e)}function sv(e){const n=e[V],t=n.type;return 2===t?n.declTNode:1===t?e[lt]:null}function dv(e,n=null,t=null,i){const o=hv(e,n,t,i);return o.resolveInjectorInitializers(),o}function hv(e,n=null,t=null,i,o=new Set){const r=[t||ue,VT(e)];return i=i||("object"==typeof e?void 0:Ze(e)),new Fo(r,n||fc(),i||null,o)}class dt{static{this.THROW_IF_NOT_FOUND=Yr}static{this.NULL=new cc}static create(n,t){if(Array.isArray(n))return dv({name:""},t,n,"");{const i=n.name??"";return dv({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=G({token:dt,providedIn:"any",factory:()=>Y(t_)})}static{this.__NG_ELEMENT_ID__=-1}}new B("").__NG_ELEMENT_ID__=e=>{const n=ve();if(null===n)throw new R(204,!1);if(2&n.type)return n.value;if(e&ae.Optional)return null;throw new R(204,!1)};function _h(e){return e.ngOriginalError}const pv=!0;let hs=(()=>{class e{static{this.__NG_ELEMENT_ID__=XE}static{this.__NG_ENV_ID__=t=>t}}return e})();class JE extends hs{constructor(n){super(),this._lView=n}onDestroy(n){return bc(this._lView,n),()=>function Xd(e,n){if(null===e[gi])return;const t=e[gi].indexOf(n);-1!==t&&e[gi].splice(t,1)}(this._lView,n)}}function XE(){return new JE(k())}let Xn=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=G({token:e,providedIn:"root",factory:()=>new e})}}return e})();const Re=class eN extends jt{constructor(n=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=n,function g_(){return void 0!==Qm()||null!=function fT(){return ko}()}()&&(this.destroyRef=F(hs,{optional:!0})??void 0,this.pendingTasks=F(Xn,{optional:!0})??void 0)}emit(n){const t=ie(null);try{super.next(n)}finally{ie(t)}}subscribe(n,t,i){let o=n,r=t||(()=>null),s=i;if(n&&"object"==typeof n){const c=n;o=c.next?.bind(c),r=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(r=this.wrapInTimeout(r),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:o,error:r,complete:s});return n instanceof Ct&&n.add(a),a}wrapInTimeout(n){return t=>{const i=this.pendingTasks?.add();setTimeout(()=>{n(t),void 0!==i&&this.pendingTasks?.remove(i)})}}};function Pc(...e){}function gv(e){let n,t;function i(){e=Pc;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==n&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),i()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{e(),i()})),()=>i()}function mv(e){return queueMicrotask(()=>e()),()=>{e=Pc}}const vh="isAngularZone",Ac=vh+"_ID";let tN=0;class ye{constructor(n){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Re(!1),this.onMicrotaskEmpty=new Re(!1),this.onStable=new Re(!1),this.onError=new Re(!1);const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:r=pv}=n;if(typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&i,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=r,function oN(e){const n=()=>{!function iN(e){function n(){gv(()=>{e.callbackScheduled=!1,Ch(e),e.isCheckStableRunning=!0,yh(e),e.isCheckStableRunning=!1})}e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,e.scheduleInRootZone?Zone.root.run(()=>{n()}):e._outer.run(()=>{n()}),Ch(e))}(e)},t=tN++;e._inner=e._inner.fork({name:"angular",properties:{[vh]:!0,[Ac]:t,[Ac+t]:!0},onInvokeTask:(i,o,r,s,a,c)=>{if(function rN(e){return yv(e,"__ignore_ng_zone__")}(c))return i.invokeTask(r,s,a,c);try{return _v(e),i.invokeTask(r,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&n(),vv(e)}},onInvoke:(i,o,r,s,a,c,d)=>{try{return _v(e),i.invoke(r,s,a,c,d)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!function sN(e){return yv(e,"__scheduler_tick__")}(c)&&n(),vv(e)}},onHasTask:(i,o,r,s)=>{i.hasTask(r,s),o===r&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,Ch(e),yh(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,o,r,s)=>(i.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(vh)}static assertInAngularZone(){if(!ye.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(ye.isInAngularZone())throw new R(909,!1)}run(n,t,i){return this._inner.run(n,t,i)}runTask(n,t,i,o){const r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+o,n,nN,Pc,Pc);try{return r.runTask(s,t,i)}finally{r.cancelTask(s)}}runGuarded(n,t,i){return this._inner.runGuarded(n,t,i)}runOutsideAngular(n){return this._outer.run(n)}}const nN={};function yh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Ch(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&!0===e.callbackScheduled)}function _v(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function vv(e){e._nesting--,yh(e)}class bh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Re,this.onMicrotaskEmpty=new Re,this.onStable=new Re,this.onError=new Re}run(n,t,i){return n.apply(t,i)}runGuarded(n,t,i){return n.apply(t,i)}runOutsideAngular(n){return n()}runTask(n,t,i,o){return n.apply(t,i)}}function yv(e,n){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0]?.data?.[n]}class kn{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&_h(n);for(;t&&_h(t);)t=_h(t);return t||null}}const cN=new B("",{providedIn:"root",factory:()=>{const e=F(ye),n=F(kn);return t=>e.runOutsideAngular(()=>n.handleError(t))}});function lN(){return Wo(ve(),k())}function Wo(e,n){return new qt(Mt(e,n))}let qt=(()=>{class e{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=lN}}return e})();function ps(e){return!(128&~e.flags)}const Dh=new Map;let hN=0;function Sh(e){Dh.delete(e[Ho])}const Oc="__ngContext__";function mt(e,n){Je(n)?(e[Oc]=n[Ho],function pN(e){Dh.set(e[Ho],e)}(n)):e[Oc]=n}function kv(e){return Av(e[ts])}function Pv(e){return Av(e[ln])}function Av(e){for(;null!==e&&!gt(e);)e=e[ln];return e}let Th;const ms=new B("",{providedIn:"root",factory:()=>kN}),kN="ng",Uv=new B(""),_i=new B("",{providedIn:"platform",factory:()=>"unknown"}),Hv=new B("",{providedIn:"root",factory:()=>function mi(){if(void 0!==Th)return Th;if(typeof document<"u")return document;throw new R(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Gv=()=>null;function Oh(e,n,t=!1){return Gv(e,n,t)}const Yv=new B("",{providedIn:"root",factory:()=>!1});let Gc;function ny(e){return function jh(){if(void 0===Gc&&(Gc=null,xe.trustedTypes))try{Gc=xe.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Gc}()?.createScriptURL(e)||e}class iy{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Bm})`}}function vi(e){return e instanceof iy?e.changingThisBreaksApplicationSecurity:e}function Ms(e,n){const t=function KN(e){return e instanceof iy&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${Bm})`)}return t===n}const e2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Jo=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Jo||{});function zh(e){const n=Ds();return n?n.sanitize(Jo.URL,e)||"":Ms(e,"URL")?vi(e):function Uh(e){return(e=String(e)).match(e2)?e:"unsafe:"+e}(ee(e))}function hy(e){const n=Ds();if(n)return ny(n.sanitize(Jo.RESOURCE_URL,e)||"");if(Ms(e,"ResourceURL"))return ny(vi(e));throw new R(904,!1)}function Ds(){const e=k();return e&&e[In].sanitizer}const m2=/^>|^->|<!--|-->|--!>|<!-$/g,_2=/(<|>)/g,v2="\u200b$1\u200b";function vy(e){return e.ownerDocument.defaultView}function Wt(e){return e instanceof Function?e():e}var yi=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(yi||{});let Qh;function Zh(e,n){return Qh(e,n)}function er(e,n,t,i,o){if(null!=i){let r,s=!1;gt(i)?r=i:Je(i)&&(s=!0,i=i[ke]);const a=de(i);0===e&&null!==t?null==o?Ty(n,t,a):Ki(n,t,a,o||null,!0):1===e&&null!==t?Ki(n,t,a,o||null,!0):2===e?function Is(e,n,t){e.removeChild(null,n,t)}(n,a,s):3===e&&n.destroyNode(a),null!=r&&function L2(e,n,t,i,o){const r=t[Tn];r!==de(t)&&er(n,e,i,r,o);for(let a=Be;a<t.length;a++){const c=t[a];Kc(c[V],c,e,n,i,r)}}(n,e,r,t,o)}}function Yh(e,n){return e.createComment(function py(e){return e.replace(m2,n=>n.replace(_2,v2))}(n))}function Wc(e,n,t){return e.createElement(n,t)}function Dy(e,n){n[In].changeDetectionScheduler?.notify(9),Kc(e,n,n[Z],2,null,null)}function Sy(e,n){const t=e[Go],i=n[$e];(Je(i)||n[Pe]!==i[$e][Pe])&&(e[$]|=_c.HasTransplantedViews),null===t?e[Go]=[n]:t.push(n)}function Jh(e,n){const t=e[Go],i=t.indexOf(n);t.splice(i,1)}function Ss(e,n){if(e.length<=Be)return;const t=Be+n,i=e[t];if(i){const o=i[Hi];null!==o&&o!==e&&Jh(o,i),n>0&&(e[t-1][ln]=i[ln]);const r=sc(e,Be+n);!function N2(e,n){Dy(e,n),n[ke]=null,n[lt]=null}(i[V],i);const s=r[Zn];null!==s&&s.detachView(r[V]),i[$e]=null,i[ln]=null,i[$]&=-129}return i}function Qc(e,n){if(!(256&n[$])){const t=n[Z];t.destroyNode&&Kc(e,n,t,3,null,null),function k2(e){let n=e[ts];if(!n)return Xh(e[V],e);for(;n;){let t=null;if(Je(n))t=n[ts];else{const i=n[Be];i&&(t=i)}if(!t){for(;n&&!n[ln]&&n!==e;)Je(n)&&Xh(n[V],n),n=n[$e];null===n&&(n=e),Je(n)&&Xh(n[V],n),t=n&&n[ln]}n=t}}(n)}}function Xh(e,n){if(256&n[$])return;const t=ie(null);try{n[$]&=-129,n[$]|=256,n[Jt]&&nd(n[Jt]),function O2(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let i=0;i<t.length;i+=2){const o=n[t[i]];if(!(o instanceof cs)){const r=t[i+1];if(Array.isArray(r))for(let s=0;s<r.length;s+=2){const a=o[r[s]],c=r[s+1];En(4,a,c);try{c.call(a)}finally{En(5,a,c)}}else{En(4,o,r);try{r.call(o)}finally{En(5,o,r)}}}}}(e,n),function A2(e,n){const t=e.cleanup,i=n[Bo];if(null!==t)for(let r=0;r<t.length-1;r+=2)if("string"==typeof t[r]){const s=t[r+3];s>=0?i[s]():i[-s].unsubscribe(),r+=2}else t[r].call(i[t[r+1]]);null!==i&&(n[Bo]=null);const o=n[gi];if(null!==o){n[gi]=null;for(let r=0;r<o.length;r++)(0,o[r])()}}(e,n),1===n[V].type&&n[Z].destroy();const i=n[Hi];if(null!==i&&gt(n[$e])){i!==n[$e]&&Jh(i,n);const o=n[Zn];null!==o&&o.detachView(e)}Sh(n)}finally{ie(t)}}function ef(e,n,t){return function Iy(e,n,t){let i=n;for(;null!==i&&168&i.type;)i=(n=i).parent;if(null===i)return t[ke];{const{componentOffset:o}=i;if(o>-1){const{encapsulation:r}=e.data[i.directiveStart+o];if(r===an.None||r===an.Emulated)return null}return Mt(i,t)}}(e,n.parent,t)}function Ki(e,n,t,i,o){e.insertBefore(n,t,i,o)}function Ty(e,n,t){e.appendChild(n,t)}function Ey(e,n,t,i,o){null!==i?Ki(e,n,t,i,o):Ty(e,n,t)}function tf(e,n){return e.parentNode(n)}let nf,ky=function xy(e,n,t){return 40&e.type?Mt(e,t):null};function Zc(e,n,t,i){const o=ef(e,i,n),r=n[Z],a=function Ny(e,n,t){return ky(e,n,t)}(i.parent||n[lt],i,n);if(null!=o)if(Array.isArray(t))for(let c=0;c<t.length;c++)Ey(r,o,t[c],a,!1);else Ey(r,o,t,a,!1);void 0!==nf&&nf(r,i,n,t,o)}function Yi(e,n){if(null!==n){const t=n.type;if(3&t)return Mt(n,e);if(4&t)return rf(-1,e[n.index]);if(8&t){const i=n.child;if(null!==i)return Yi(e,i);{const o=e[n.index];return gt(o)?rf(-1,o):de(o)}}if(128&t)return Yi(e,n.next);if(32&t)return Zh(n,e)()||de(e[n.index]);{const i=Ay(e,n);return null!==i?Array.isArray(i)?i[0]:Yi(Kn(e[Pe]),i):Yi(e,n.next)}}return null}function Ay(e,n){return null!==n?e[Pe][lt].projection[n.projection]:null}function rf(e,n){const t=Be+e+1;if(t<n.length){const i=n[t],o=i[V].firstChild;if(null!==o)return Yi(i,o)}return n[Tn]}function sf(e,n,t,i,o,r,s){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=i[t.index],c=t.type;if(s&&0===n&&(a&&mt(de(a),i),t.flags|=2),32&~t.flags)if(8&c)sf(e,n,t.child,i,o,r,!1),er(n,e,o,a,r);else if(32&c){const d=Zh(t,i);let f;for(;f=d();)er(n,e,o,f,r);er(n,e,o,a,r)}else 16&c?Ry(e,n,i,t,o,r):er(n,e,o,a,r);t=s?t.projectionNext:t.next}}function Kc(e,n,t,i,o,r){sf(t,i,e.firstChild,n,o,r,!1)}function Ry(e,n,t,i,o,r){const s=t[Pe],c=s[lt].projection[i.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++)er(n,e,o,c[d],r);else{let d=c;const f=s[$e];ps(i)&&(d.flags|=128),sf(e,n,d,f,o,r,!0)}}function Fy(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function Ly(e,n,t){const{mergedAttrs:i,classes:o,styles:r}=t;null!==i&&Od(e,n,i),null!==o&&Fy(e,n,o),null!==r&&function B2(e,n,t){e.setAttribute(n,"style",t)}(e,n,r)}const te={};function p(e=1){Vy(oe(),k(),ut()+e,!1)}function Vy(e,n,t,i){if(!i)if(3&~n[$]){const r=e.preOrderHooks;null!==r&&Ic(n,r,0,t)}else{const r=e.preOrderCheckHooks;null!==r&&Sc(n,r,t)}qi(t)}function O(e,n=ae.Default){const t=k();return null===t?Y(e,n):nv(ve(),t,Q(e),n)}function By(e,n,t,i,o,r){const s=ie(null);try{let a=null;o&fi.SignalBased&&(a=n[i][sn]),null!==a&&void 0!==a.transformFn&&(r=a.transformFn(r)),o&fi.HasDecoratorInputTransform&&(r=e.inputTransforms[i].call(n,r)),null!==e.setInput?e.setInput(n,a,r,t,i):w_(n,a,i,r)}finally{ie(s)}}function Yc(e,n,t,i,o,r,s,a,c,d,f){const g=n.blueprint.slice();return g[ke]=o,g[$]=204|i,(null!==d||e&&2048&e[$])&&(g[$]|=2048),N_(g),g[$e]=g[jo]=e,g[Se]=t,g[In]=s||e&&e[In],g[Z]=a||e&&e[Z],g[ze]=c||e&&e[ze]||null,g[lt]=r,g[Ho]=function fN(){return hN++}(),g[bt]=f,g[v_]=d,g[Pe]=2==n.type?e[Pe]:g,g}function Ji(e,n,t,i,o){let r=e.data[n];if(null===r)r=function af(e,n,t,i,o){const r=O_(),s=th(),c=e.data[n]=function Q2(e,n,t,i,o,r){let s=n?n.injectorIndex:-1,a=0;return function zi(){return null!==K.skipHydrationRootTNode}()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?r:r&&r.parent,t,n,i,o);return null===e.firstChild&&(e.firstChild=c),null!==r&&(s?null==r.child&&null!==c.parent&&(r.child=c):null===r.next&&(r.next=c,c.prev=r)),c}(e,n,t,i,o),function CE(){return K.lFrame.inI18n}()&&(r.flags|=32);else if(64&r.type){r.type=t,r.value=i,r.attrs=o;const s=function ss(){const e=K.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();r.injectorIndex=null===s?-1:s.injectorIndex}return dn(r,!0),r}function Ts(e,n,t,i){if(0===t)return-1;const o=n.length;for(let r=0;r<t;r++)n.push(i),e.blueprint.push(i),e.data.push(null);return o}function jy(e,n,t,i,o){const r=ut(),s=2&i;try{qi(-1),s&&n.length>H&&Vy(e,n,H,!1),En(s?2:0,o),t(i,o)}finally{qi(r),En(s?3:1,o)}}function cf(e,n,t){if(qd(n)){const i=ie(null);try{const r=n.directiveEnd;for(let s=n.directiveStart;s<r;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{ie(i)}}}function lf(e,n,t){A_()&&(function tx(e,n,t,i){const o=t.directiveStart,r=t.directiveEnd;Gi(t)&&function cx(e,n,t){const i=Mt(n,e),o=Uy(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=Jc(e,Yc(e,o,null,s,i,n,null,e[In].rendererFactory.createRenderer(i,t),null,null,null));e[n.index]=a}(n,t,e.data[o+t.componentOffset]),e.firstCreatePass||Ec(t,n),mt(i,n);const s=t.initialInputs;for(let a=o;a<r;a++){const c=e.data[a],d=Qi(n,e,a,t);mt(d,n),null!==s&&lx(0,a-o,d,c,0,s),un(c)&&(zt(t.index,n)[Se]=Qi(n,e,a,t))}}(e,n,t,Mt(t,n)),!(64&~t.flags)&&qy(e,n,t))}function uf(e,n,t=Mt){const i=n.localNames;if(null!==i){let o=n.index+1;for(let r=0;r<i.length;r+=2){const s=i[r+1],a=-1===s?t(n,e):e[s];e[o++]=a}}}function Uy(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=df(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function df(e,n,t,i,o,r,s,a,c,d,f){const g=H+i,_=g+o,v=function H2(e,n){const t=[];for(let i=0;i<n;i++)t.push(i<e?null:te);return t}(g,_),b="function"==typeof d?d():d;return v[V]={type:e,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:n,data:v.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:f}}let Hy=()=>null;function Gy(e,n,t,i,o){for(let r in n){if(!n.hasOwnProperty(r))continue;const s=n[r];if(void 0===s)continue;i??={};let a,c=fi.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let d=r;if(null!==o){if(!o.hasOwnProperty(r))continue;d=o[r]}0===e?$y(i,t,d,a,c):$y(i,t,d,a)}return i}function $y(e,n,t,i,o){let r;e.hasOwnProperty(t)?(r=e[t]).push(n,i):r=e[t]=[n,i],void 0!==o&&r.push(o)}function Lt(e,n,t,i,o,r,s,a){const c=Mt(n,t);let f,d=n.inputs;!a&&null!=d&&(f=d[i])?(mf(e,t,f,i,o),Gi(n)&&function Y2(e,n){const t=zt(n,e);16&t[$]||(t[$]|=64)}(t,n.index)):3&n.type&&(i=function K2(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),o=null!=s?s(o,n.value||"",i):o,r.setProperty(c,i,o))}function hf(e,n,t,i){if(A_()){const o=null===i?null:{"":-1},r=function ix(e,n){const t=e.directiveRegistry;let i=null,o=null;if(t)for(let r=0;r<t.length;r++){const s=t[r];if(s_(n,s.selectors,!1))if(i||(i=[]),un(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),i.unshift(...a,s),ff(e,n,a.length)}else i.unshift(s),ff(e,n,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,i,o),i.push(s)}return null===i?null:[i,o]}(e,t);let s,a;null===r?s=a=null:[s,a]=r,null!==s&&zy(e,n,t,s,o,a),o&&function ox(e,n,t){if(n){const i=e.localNames=[];for(let o=0;o<n.length;o+=2){const r=t[n[o+1]];if(null==r)throw new R(-301,!1);i.push(n[o],r)}}}(t,i,o)}t.mergedAttrs=Xr(t.mergedAttrs,t.attrs)}function zy(e,n,t,i,o,r){for(let d=0;d<i.length;d++)ph(Ec(t,n),e,i[d].type);!function sx(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,i.length);for(let d=0;d<i.length;d++){const f=i[d];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,c=Ts(e,n,i.length,null);for(let d=0;d<i.length;d++){const f=i[d];t.mergedAttrs=Xr(t.mergedAttrs,f.hostAttrs),ax(e,t,n,c,f),rx(c,f,o),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const g=f.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function Z2(e,n,t){const o=n.directiveEnd,r=e.data,s=n.attrs,a=[];let c=null,d=null;for(let f=n.directiveStart;f<o;f++){const g=r[f],_=t?t.get(g):null,b=_?_.outputs:null;c=Gy(0,g.inputs,f,c,_?_.inputs:null),d=Gy(1,g.outputs,f,d,b);const T=null===c||null===s||Rd(n)?null:ux(c,f,s);a.push(T)}null!==c&&(c.hasOwnProperty("class")&&(n.flags|=8),c.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=c,n.outputs=d}(e,t,r)}function qy(e,n,t){const i=t.directiveStart,o=t.directiveEnd,r=t.index,s=function ME(){return K.lFrame.currentDirectiveIndex}();try{qi(r);for(let a=i;a<o;a++){const c=e.data[a],d=n[a];ih(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&nx(c,d)}}finally{qi(-1),ih(s)}}function nx(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function ff(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function rx(e,n,t){if(t){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)t[n.exportAs[i]]=e;un(n)&&(t[""]=e)}}function ax(e,n,t,i,o){e.data[i]=o;const r=o.factory||(o.factory=ji(o.type)),s=new cs(r,un(o),O);e.blueprint[i]=s,t[i]=s,function X2(e,n,t,i,o){const r=o.hostBindings;if(r){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~n.index;(function ex(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,r)}}(e,n,i,Ts(e,t,o.hostVars,te),o)}function Pn(e,n,t,i,o,r){const s=Mt(e,n);!function pf(e,n,t,i,o,r,s){if(null==r)e.removeAttribute(n,o,t);else{const a=null==s?ee(r):s(r,i||"",o);e.setAttribute(n,o,a,t)}}(n[Z],s,r,e.value,t,i,o)}function lx(e,n,t,i,o,r){const s=r[n];if(null!==s)for(let a=0;a<s.length;)By(i,t,s[a++],s[a++],s[a++],s[a++])}function ux(e,n,t){let i=null,o=0;for(;o<t.length;){const r=t[o];if(0!==r)if(5!==r){if("number"==typeof r)break;if(e.hasOwnProperty(r)){null===i&&(i=[]);const s=e[r];for(let a=0;a<s.length;a+=3)if(s[a]===n){i.push(r,s[a+1],s[a+2],t[o+1]);break}}o+=2}else o+=2;else o+=4}return i}function Wy(e,n,t,i){return[e,!0,0,n,null,i,null,t,null,null]}function Qy(e,n){const t=e.contentQueries;if(null!==t){const i=ie(null);try{for(let o=0;o<t.length;o+=2){const s=t[o+1];if(-1!==s){const a=e.data[s];wc(t[o]),a.contentQueries(2,n[s],s)}}}finally{ie(i)}}}function Jc(e,n){return e[ts]?e[__][ln]=n:e[ts]=n,e[__]=n,n}function gf(e,n,t){wc(0);const i=ie(null);try{n(e,t)}finally{ie(i)}}function Xc(e,n){const t=e[ze],i=t?t.get(kn,null):null;i&&i.handleError(n)}function mf(e,n,t,i,o){for(let r=0;r<t.length;){const s=t[r++],a=t[r++],c=t[r++];By(e.data[s],n[s],i,a,c,o)}}function ti(e,n,t){const i=os(n,e);!function wy(e,n,t){e.setValue(n,t)}(e[Z],i,t)}function dx(e,n){const t=zt(n,e),i=t[V];!function hx(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}(i,t);const o=t[ke];null!==o&&null===t[bt]&&(t[bt]=Oh(o,t[ze])),_f(i,t,t[Se])}function _f(e,n,t){sh(n);try{const i=e.viewQuery;null!==i&&gf(1,i,t);const o=e.template;null!==o&&jy(e,n,o,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[Zn]?.finishViewCreation(e),e.staticContentQueries&&Qy(e,n),e.staticViewQueries&&gf(2,e.viewQuery,t);const r=e.components;null!==r&&function fx(e,n){for(let t=0;t<n.length;t++)dx(e,n[t])}(n,r)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{n[$]&=-5,ah()}}function Xi(e,n){return!n||null===n.firstChild||ps(e)}function Es(e,n,t,i,o=!1){for(;null!==t;){if(128===t.type){t=o?t.projectionNext:t.next;continue}const r=n[t.index];null!==r&&i.push(de(r)),gt(r)&&Xy(r,i);const s=t.type;if(8&s)Es(e,n,t.child,i);else if(32&s){const a=Zh(t,n);let c;for(;c=a();)i.push(c)}else if(16&s){const a=Ay(n,t);if(Array.isArray(a))i.push(...a);else{const c=Kn(n[Pe]);Es(c[V],c,a,i,!0)}}t=o?t.projectionNext:t.next}return i}function Xy(e,n){for(let t=Be;t<e.length;t++){const i=e[t],o=i[V].firstChild;null!==o&&Es(i[V],i,o,n)}e[Tn]!==e[ke]&&n.push(e[Tn])}let eC=[];const _x={...$a,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Cc(e.lView)},consumerOnSignalRead(){this.lView[Jt]=this}},yx={...$a,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let n=Kn(e.lView);for(;n&&!tC(n[V]);)n=Kn(n);n&&x_(n)},consumerOnSignalRead(){this.lView[Jt]=this}};function tC(e){return 2!==e.type}const Cx=100;function el(e,n=!0,t=0){const i=e[In],o=i.rendererFactory;o.begin?.();try{!function bx(e,n){const t=L_();try{V_(!0),yf(e,n);let i=0;for(;yc(e);){if(i===Cx)throw new R(103,!1);i++,yf(e,1)}}finally{V_(t)}}(e,t)}catch(s){throw n&&Xc(e,s),s}finally{o.end?.(),i.inlineEffectRunner?.flush()}}function Mx(e,n,t,i){const o=n[$];if(!(256&~o))return;n[In].inlineEffectRunner?.flush(),sh(n);let a=!0,c=null,d=null;tC(e)?(d=function px(e){return e[Jt]??function gx(e){const n=eC.pop()??Object.create(_x);return n.lView=e,n}(e)}(n),c=za(d)):null===function ym(){return Ve}()?(a=!1,d=function vx(e){const n=e[Jt]??Object.create(yx);return n.lView=e,n}(n),c=za(d)):n[Jt]&&(nd(n[Jt]),n[Jt]=null);try{N_(n),function B_(e){return K.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&jy(e,n,t,2,i);const f=!(3&~o);if(f){const v=e.preOrderCheckHooks;null!==v&&Sc(n,v,null)}else{const v=e.preOrderHooks;null!==v&&Ic(n,v,0,null),ch(n,0)}if(function wx(e){for(let n=kv(e);null!==n;n=Pv(n)){if(!(n[$]&_c.HasTransplantedViews))continue;const t=n[Go];for(let i=0;i<t.length;i++)x_(t[i])}}(n),iC(n,0),null!==e.contentQueries&&Qy(e,n),f){const v=e.contentCheckHooks;null!==v&&Sc(n,v)}else{const v=e.contentHooks;null!==v&&Ic(n,v,1),ch(n,1)}!function U2(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const o=t[i];if(o<0)qi(~o);else{const r=o,s=t[++i],a=t[++i];bE(s,r),a(2,n[r])}}}finally{qi(-1)}}(e,n);const g=e.components;null!==g&&rC(n,g,0);const _=e.viewQuery;if(null!==_&&gf(2,_,i),f){const v=e.viewCheckHooks;null!==v&&Sc(n,v)}else{const v=e.viewHooks;null!==v&&Ic(n,v,2),ch(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[gc]){for(const v of n[gc])v();n[gc]=null}n[$]&=-73}catch(f){throw Cc(n),f}finally{null!==d&&(ed(d,c),a&&function mx(e){e.lView[Jt]!==e&&(e.lView=null,eC.push(e))}(d)),ah()}}function iC(e,n){for(let t=kv(e);null!==t;t=Pv(t))for(let i=Be;i<t.length;i++)oC(t[i],n)}function Dx(e,n,t){oC(zt(n,e),t)}function oC(e,n){Yd(e)&&yf(e,n)}function yf(e,n){const i=e[V],o=e[$],r=e[Jt];let s=!!(0===n&&16&o);if(s||=!!(64&o&&0===n),s||=!!(1024&o),s||=!(!r?.dirty||!td(r)),s||=!1,r&&(r.dirty=!1),e[$]&=-9217,s)Mx(i,e,i.template,e[Se]);else if(8192&o){iC(e,1);const a=i.components;null!==a&&rC(e,a,1)}}function rC(e,n,t){for(let i=0;i<n.length;i++)Dx(e,n[i],t)}function Ns(e,n){const t=L_()?64:1088;for(e[In].changeDetectionScheduler?.notify(n);e;){e[$]|=t;const i=Kn(e);if(is(e)&&!i)return e;e=i}return null}class xs{get rootNodes(){const n=this._lView,t=n[V];return Es(t,n,t.firstChild,[])}constructor(n,t,i=!0){this._lView=n,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Se]}set context(n){this._lView[Se]=n}get destroyed(){return!(256&~this._lView[$])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[$e];if(gt(n)){const t=n[8],i=t?t.indexOf(this):-1;i>-1&&(Ss(n,i),sc(t,i))}this._attachedToViewContainer=!1}Qc(this._lView[V],this._lView)}onDestroy(n){bc(this._lView,n)}markForCheck(){Ns(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$]&=-129}reattach(){Jd(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,el(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const n=is(this._lView),t=this._lView[Hi];null!==t&&!n&&Jh(t,this._lView),Dy(this._lView[V],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=n;const t=is(this._lView),i=this._lView[Hi];null!==i&&!t&&Sy(i,this._lView),Jd(this._lView)}}let ni=(()=>{class e{static{this.__NG_ELEMENT_ID__=Tx}}return e})();const Sx=ni,Ix=class extends Sx{constructor(n,t,i){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,i){const o=function tr(e,n,t,i){const o=ie(null);try{const r=n.tView,c=Yc(e,r,t,4096&e[$]?4096:16,null,n,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);c[Hi]=e[n.index];const f=e[Zn];return null!==f&&(c[Zn]=f.createEmbeddedView(r)),_f(r,c,t),c}finally{ie(o)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:t,dehydratedView:i});return new xs(o)}};function Tx(){return tl(ve(),k())}function tl(e,n){return 4&e.type?new Ix(n,e,Wo(e,n)):null}class or{}const Vs=new B("",{providedIn:"root",factory:()=>!1}),TC=new B(""),xf=new B("");class yk{}class EC{}class bk{resolveComponentFactory(n){throw function Ck(e){const n=Error(`No component factory found for ${Ze(e)}.`);return n.ngComponent=e,n}(n)}}class al{static{this.NULL=new bk}}class kf{}let ii=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function Mk(){const e=k(),t=zt(ve().index,e);return(Je(t)?t:e)[Z]}()}}return e})(),wk=(()=>{class e{static{this.\u0275prov=G({token:e,providedIn:"root",factory:()=>null})}}return e})();function ll(e,n,t){let i=t?e.styles:null,o=t?e.classes:null,r=0;if(null!==n)for(let s=0;s<n.length;s++){const a=n[s];"number"==typeof a?r=a:1==r?o=md(o,a):2==r&&(i=md(i,a+": "+n[++s]+";"))}t?e.styles=i:e.stylesWithoutHost=i,t?e.classes=o:e.classesWithoutHost=o}class PC extends al{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=se(n);return new Us(t,this.ngModule)}}function AC(e,n){const t=[];for(const i in e){if(!e.hasOwnProperty(i))continue;const o=e[i];if(void 0===o)continue;const r=Array.isArray(o),s=r?o[0]:o;t.push(n?{propName:s,templateName:i,isSignal:!!((r?o[1]:fi.None)&fi.SignalBased)}:{propName:s,templateName:i})}return t}class Us extends EC{get inputs(){const n=this.componentDef,t=n.inputTransforms,i=AC(n.inputs,!0);if(null!==t)for(const o of i)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return i}get outputs(){return AC(this.componentDef.outputs,!1)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function PT(e){return e.map(kT).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,i,o){const r=ie(null);try{let s=(o=o||this.ngModule)instanceof Rt?o:o?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new Wi(n,s):n,c=a.get(kf,null);if(null===c)throw new R(407,!1);const g={rendererFactory:c,sanitizer:a.get(wk,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(or,null)},_=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=i?function G2(e,n,t,i){const r=i.get(Yv,!1)||t===an.ShadowDom,s=e.selectRootElement(n,r);return function $2(e){Hy(e)}(s),s}(_,i,this.componentDef.encapsulation,a):Wc(_,v,function Ik(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(v));let T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let E=null;null!==b&&(E=Oh(b,a,!0));const P=df(0,null,null,1,0,null,null,null,null,null,null),x=Yc(null,P,null,T,null,null,g,_,a,null,E);sh(x);let j,z,re=null;try{const he=this.componentDef;let Le,ui=null;he.findHostDirectiveDefs?(Le=[],ui=new Map,he.findHostDirectiveDefs(he,Le,ui),Le.push(he)):Le=[he];const TI=function Ek(e,n){const t=e[V],i=H;return e[i]=n,Ji(t,i,2,"#host",null)}(x,b);re=function Nk(e,n,t,i,o,r,s){const a=o[V];!function xk(e,n,t,i){for(const o of e)n.mergedAttrs=Xr(n.mergedAttrs,o.hostAttrs);null!==n.mergedAttrs&&(ll(n,n.mergedAttrs,!0),null!==t&&Ly(i,t,n))}(i,e,n,s);let c=null;null!==n&&(c=Oh(n,o[ze]));const d=r.rendererFactory.createRenderer(n,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const g=Yc(o,Uy(t),null,f,o[e.index],e,r,d,null,null,c);return a.firstCreatePass&&ff(a,e,i.length-1),Jc(o,g),o[e.index]=g}(TI,b,he,Le,x,g,_),z=rs(P,H),b&&function Pk(e,n,t,i){if(i)Od(e,t,["ng-version","18.2.13"]);else{const{attrs:o,classes:r}=function AT(e){const n=[],t=[];let i=1,o=2;for(;i<e.length;){let r=e[i];if("string"==typeof r)2===o?""!==r&&n.push(r,e[++i]):8===o&&t.push(r);else{if(!cn(o))break;o=r}i++}return{attrs:n,classes:t}}(n.selectors[0]);o&&Od(e,t,o),r&&r.length>0&&Fy(e,t,r.join(" "))}}(_,he,b,i),void 0!==t&&function Ak(e,n,t){const i=e.projection=[];for(let o=0;o<n.length;o++){const r=t[o];i.push(null!=r?Array.from(r):null)}}(z,this.ngContentSelectors,t),j=function kk(e,n,t,i,o,r){const s=ve(),a=o[V],c=Mt(s,o);zy(a,o,s,t,null,i);for(let f=0;f<t.length;f++)mt(Qi(o,a,s.directiveStart+f,s),o);qy(a,o,s),c&&mt(c,o);const d=Qi(o,a,s.directiveStart+s.componentOffset,s);if(e[Se]=o[Se]=d,null!==r)for(const f of r)f(d,n);return cf(a,s,o),d}(re,he,Le,ui,x,[Ok]),_f(P,x,null)}catch(he){throw null!==re&&Sh(re),Sh(x),he}finally{ah()}return new Tk(this.componentType,j,Wo(z,x),x,z)}finally{ie(r)}}}class Tk extends yk{constructor(n,t,i,o,r){super(),this.location=i,this._rootLView=o,this._tNode=r,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new xs(o,void 0,!1),this.componentType=n}setInput(n,t){const i=this._tNode.inputs;let o;if(null!==i&&(o=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;const r=this._rootLView;mf(r[V],r,o,n,t),this.previousInputValues.set(n,t),Ns(zt(this._tNode.index,r),1)}}get injector(){return new Xe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Ok(){const e=ve();Dc(k()[V],e)}let fn=(()=>{class e{static{this.__NG_ELEMENT_ID__=Rk}}return e})();function Rk(){return function FC(e,n){let t;const i=n[e.index];return gt(i)?t=i:(t=Wy(i,n,null,e),n[e.index]=t,Jc(n,t)),LC(t,n,e,i),new OC(t,e,n)}(ve(),k())}const Fk=fn,OC=class extends Fk{constructor(n,t,i){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=i}get element(){return Wo(this._hostTNode,this._hostLView)}get injector(){return new Xe(this._hostTNode,this._hostLView)}get parentInjector(){const n=Nc(this._hostTNode,this._hostLView);if(dh(n)){const t=us(n,this._hostLView),i=ls(n);return new Xe(t[V].data[i+8],t)}return new Xe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=RC(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-Be}createEmbeddedView(n,t,i){let o,r;"number"==typeof i?o=i:null!=i&&(o=i.index,r=i.injector);const a=n.createEmbeddedViewImpl(t||{},r,null);return this.insertImpl(a,o,Xi(this._hostTNode,null)),a}createComponent(n,t,i,o,r){const s=n&&!function es(e){return"function"==typeof e}(n);let a;if(s)a=t;else{const b=t||{};a=b.index,i=b.injector,o=b.projectableNodes,r=b.environmentInjector||b.ngModuleRef}const c=s?n:new Us(se(n)),d=i||this.parentInjector;if(!r&&null==c.ngModule){const T=(s?d:this.parentInjector).get(Rt,null);T&&(r=T)}se(c.componentType??{});const v=c.create(d,o,null,r);return this.insertImpl(v.hostView,a,Xi(this._hostTNode,null)),v}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,i){const o=n._lView;if(function dE(e){return gt(e[$e])}(o)){const a=this.indexOf(n);if(-1!==a)this.detach(a);else{const c=o[$e],d=new OC(c,c[lt],c[$e]);d.detach(d.indexOf(n))}}const r=this._adjustIndex(t),s=this._lContainer;return function nr(e,n,t,i=!0){const o=n[V];if(function P2(e,n,t,i){const o=Be+i,r=t.length;i>0&&(t[o-1][ln]=n),i<r-Be?(n[ln]=t[o],Jm(t,Be+i,n)):(t.push(n),n[ln]=null),n[$e]=t;const s=n[Hi];null!==s&&t!==s&&Sy(s,n);const a=n[Zn];null!==a&&a.insertView(e),Jd(n),n[$]|=128}(o,n,e,t),i){const s=rf(t,e),a=n[Z],c=tf(a,e[Tn]);null!==c&&function x2(e,n,t,i,o,r){i[ke]=o,i[lt]=n,Kc(e,i,t,1,o,r)}(o,e[lt],a,n,c,s)}const r=n[bt];null!==r&&null!==r.firstChild&&(r.firstChild=null)}(s,o,r,i),n.attachToViewContainerRef(),Jm(Of(s),r,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=RC(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),i=Ss(this._lContainer,t);i&&(sc(Of(this._lContainer),t),Qc(i[V],i))}detach(n){const t=this._adjustIndex(n,-1),i=Ss(this._lContainer,t);return i&&null!=sc(Of(this._lContainer),t)?new xs(i):null}_adjustIndex(n,t=0){return n??this.length+t}};function RC(e){return e[8]}function Of(e){return e[8]||(e[8]=[])}let LC=function BC(e,n,t,i){if(e[Tn])return;let o;o=8&t.type?de(i):function Lk(e,n){const t=e[Z],i=t.createComment(""),o=Mt(n,e);return Ki(t,tf(t,o),i,function R2(e,n){return e.nextSibling(n)}(t,o),!1),i}(n,t),e[Tn]=o},Rf=()=>!1;const WC=new Set;function Dt(e){WC.has(e)||(WC.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function rr(e,n){Dt("NgSignals");const t=function OI(e){const n=Object.create(FI);n.value=e;const t=()=>(Xu(n),n.value);return t[sn]=n,t}(e),i=t[sn];return n?.equal&&(i.equal=n.equal),t.set=o=>Nm(i,o),t.update=o=>function RI(e,n){Mm()||Em(),Nm(e,n(e.value))}(i,o),t.asReadonly=ZC.bind(t),t}function ZC(){const e=this[sn];if(void 0===e.readonlyFn){const n=()=>this();n[sn]=e,e.readonlyFn=n}return e.readonlyFn}function KC(e){return function QC(e){return"function"==typeof e&&void 0!==e[sn]}(e)&&"function"==typeof e.set}function Ce(e){let n=function ab(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const i=[e];for(;n;){let o;if(un(e))o=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new R(903,!1);o=n.\u0275dir}if(o){if(t){i.push(o);const s=e;s.inputs=dl(e.inputs),s.inputTransforms=dl(e.inputTransforms),s.declaredInputs=dl(e.declaredInputs),s.outputs=dl(e.outputs);const a=o.hostBindings;a&&sP(e,a);const c=o.viewQuery,d=o.contentQueries;if(c&&oP(e,c),d&&rP(e,d),nP(e,o),JI(e.outputs,o.outputs),un(o)&&o.data.animation){const f=e.data;f.animation=(f.animation||[]).concat(o.data.animation)}}const r=o.features;if(r)for(let s=0;s<r.length;s++){const a=r[s];a&&a.ngInherit&&a(e),a===Ce&&(t=!1)}}n=Object.getPrototypeOf(n)}!function iP(e){let n=0,t=null;for(let i=e.length-1;i>=0;i--){const o=e[i];o.hostVars=n+=o.hostVars,o.hostAttrs=Xr(o.hostAttrs,t=Xr(t,o.hostAttrs))}}(i)}function nP(e,n){for(const t in n.inputs){if(!n.inputs.hasOwnProperty(t)||e.inputs.hasOwnProperty(t))continue;const i=n.inputs[t];if(void 0!==i&&(e.inputs[t]=i,e.declaredInputs[t]=n.declaredInputs[t],null!==n.inputTransforms)){const o=Array.isArray(i)?i[0]:i;if(!n.inputTransforms.hasOwnProperty(o))continue;e.inputTransforms??={},e.inputTransforms[o]=n.inputTransforms[o]}}}function dl(e){return e===Dn?{}:e===ue?[]:e}function oP(e,n){const t=e.viewQuery;e.viewQuery=t?(i,o)=>{n(i,o),t(i,o)}:n}function rP(e,n){const t=e.contentQueries;e.contentQueries=t?(i,o,r)=>{n(i,o,r),t(i,o,r)}:n}function sP(e,n){const t=e.hostBindings;e.hostBindings=t?(i,o)=>{n(i,o),t(i,o)}:n}function hb(e){const n=e.inputConfig,t={};for(const i in n)if(n.hasOwnProperty(i)){const o=n[i];Array.isArray(o)&&o[3]&&(t[i]=o[3])}e.inputTransforms=t}class no{}class fb{}class zf extends no{constructor(n,t,i,o=!0){super(),this.ngModuleType=n,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new PC(this);const r=pt(n);this._bootstrapComponents=Wt(r.bootstrap),this._r3Injector=hv(n,t,[{provide:no,useValue:this},{provide:al,useValue:this.componentFactoryResolver},...i],Ze(n),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class qf extends fb{constructor(n){super(),this.moduleType=n}create(n){return new zf(this.moduleType,n,[])}}class pb extends no{constructor(n){super(),this.componentFactoryResolver=new PC(this),this.instance=null;const t=new Fo([...n.providers,{provide:no,useValue:this},{provide:al,useValue:this.componentFactoryResolver}],n.parent||fc(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Wf(e,n,t=null){return new pb({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}function hl(e){return!!function Qf(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function je(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function io(e,n,t,i){const o=je(e,n,t);return je(e,n+1,i)||o}function $s(e,n,t,i,o,r,s,a,c,d){const f=t+H,g=n.firstCreatePass?function vP(e,n,t,i,o,r,s,a,c){const d=n.consts,f=Ji(n,e,4,s||null,a||null);hf(n,t,f,en(d,c)),Dc(n,f);const g=f.tView=df(2,f,i,o,r,n.directiveRegistry,n.pipeRegistry,null,n.schemas,d,null);return null!==n.queries&&(n.queries.template(n,f),g.queries=n.queries.embeddedTView(f)),f}(f,n,e,i,o,r,s,a,c):n.data[f];dn(g,!1);const _=gb(n,e,g,t);as()&&Zc(n,e,_,g),mt(_,e);const v=Wy(_,e,_,g);return e[f]=v,Jc(e,v),function VC(e,n,t){return Rf(e,n,t)}(v,g,e),vc(g)&&lf(n,e,g),null!=c&&uf(e,g,d),g}function N(e,n,t,i,o,r,s,a){const c=k(),d=oe();return $s(c,d,e,n,t,i,o,en(d.consts,r),s,a),N}let gb=function mb(e,n,t,i){return Nn(!0),n[Z].createComment("")};var lr=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(lr||{});let Mb=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=G({token:e,providedIn:"root",factory:()=>new e})}}return e})();class Ws{constructor(){this.ngZone=F(ye),this.scheduler=F(or),this.errorHandler=F(kn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[lr.EarlyRead,lr.Write,lr.MixedReadWrite,lr.Read]}execute(){this.executing=!0;for(const n of Ws.PHASES)for(const t of this.sequences)if(!t.erroredOrDestroyed&&t.hooks[n])try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[n](t.pipelinedValue))}catch(i){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(const n of this.sequences)n.afterRun(),n.once&&(this.sequences.delete(n),n.destroy());for(const n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(6))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}static{this.\u0275prov=G({token:Ws,providedIn:"root",factory:()=>new Ws})}}function On(e,n,t,i){const o=k();return je(o,hn(),n)&&(oe(),Pn(Ie(),o,e,n,t,i)),On}function _r(e,n,t,i,o,r){const a=io(e,Yn(),t,o);return Jn(2),a?n+ee(t)+i+ee(o)+r:te}function vr(e,n,t,i,o,r,s,a){const d=function fl(e,n,t,i,o){const r=io(e,n,t,i);return je(e,n+2,o)||r}(e,Yn(),t,o,s);return Jn(3),d?n+ee(t)+i+ee(o)+r+ee(s)+a:te}function yl(e,n){return e<<17|n<<2}function wi(e){return e>>17&32767}function sp(e){return 2|e}function ro(e){return(131068&e)>>2}function ap(e,n){return-131069&e|n<<2}function cp(e){return 1|e}function Kb(e,n,t,i){const o=e[t+1],r=null===n;let s=i?wi(o):ro(o),a=!1;for(;0!==s&&(!1===a||r);){const d=e[s+1];sA(e[s],n)&&(a=!0,e[s+1]=i?cp(d):sp(d)),s=i?wi(d):ro(d)}a&&(e[t+1]=i?sp(o):cp(o))}function sA(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&Ao(e,n)>=0}function M(e,n,t){const i=k();return je(i,hn(),n)&&Lt(oe(),Ie(),i,e,n,i[Z],t,!1),M}function lp(e,n,t,i,o){const s=o?"class":"style";mf(e,t,n.inputs[s],s,i)}function Oe(e,n){return function pn(e,n,t,i){const o=k(),r=oe(),s=Jn(2);r.firstUpdatePass&&function r1(e,n,t,i){const o=e.data;if(null===o[t+1]){const r=o[ut()],s=function o1(e,n){return n>=e.expandoStartIndex}(e,t);(function l1(e,n){return!!(e.flags&(n?8:16))})(r,i)&&null===n&&!s&&(n=!1),n=function gA(e,n,t,i){const o=function oh(e){const n=K.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let r=i?n.residualClasses:n.residualStyles;if(null===o)0===(i?n.classBindings:n.styleBindings)&&(t=Zs(t=up(null,e,n,t,i),n.attrs,i),r=null);else{const s=n.directiveStylingLast;if(-1===s||e[s]!==o)if(t=up(o,e,n,t,i),null===r){let c=function mA(e,n,t){const i=t?n.classBindings:n.styleBindings;if(0!==ro(i))return e[wi(i)]}(e,n,i);void 0!==c&&Array.isArray(c)&&(c=up(null,e,n,c[1],i),c=Zs(c,n.attrs,i),function _A(e,n,t,i){e[wi(t?n.classBindings:n.styleBindings)]=i}(e,n,i,c))}else r=function vA(e,n,t){let i;const o=n.directiveEnd;for(let r=1+n.directiveStylingLast;r<o;r++)i=Zs(i,e[r].hostAttrs,t);return Zs(i,n.attrs,t)}(e,n,i)}return void 0!==r&&(i?n.residualClasses=r:n.residualStyles=r),t}(o,r,n,i),function oA(e,n,t,i,o,r){let s=r?n.classBindings:n.styleBindings,a=wi(s),c=ro(s);e[i]=t;let f,d=!1;if(Array.isArray(t)?(f=t[1],(null===f||Ao(t,f)>0)&&(d=!0)):f=t,o)if(0!==c){const _=wi(e[a+1]);e[i+1]=yl(_,a),0!==_&&(e[_+1]=ap(e[_+1],i)),e[a+1]=function nA(e,n){return 131071&e|n<<17}(e[a+1],i)}else e[i+1]=yl(a,0),0!==a&&(e[a+1]=ap(e[a+1],i)),a=i;else e[i+1]=yl(c,0),0===a?a=i:e[c+1]=ap(e[c+1],i),c=i;d&&(e[i+1]=sp(e[i+1])),Kb(e,f,i,!0),Kb(e,f,i,!1),function rA(e,n,t,i,o){const r=o?e.residualClasses:e.residualStyles;null!=r&&"string"==typeof n&&Ao(r,n)>=0&&(t[i+1]=cp(t[i+1]))}(n,f,e,i,r),s=yl(a,c),r?n.classBindings=s:n.styleBindings=s}(o,r,n,t,s,i)}}(r,e,s,i),n!==te&&je(o,s,n)&&function a1(e,n,t,i,o,r,s,a){if(!(3&n.type))return;const c=e.data,d=c[a+1],f=function iA(e){return!(1&~e)}(d)?c1(c,n,t,o,ro(d),s):void 0;Cl(f)||(Cl(r)||function tA(e){return!(2&~e)}(d)&&(r=c1(c,null,t,o,a,s)),function V2(e,n,t,i,o){if(n)o?e.addClass(t,i):e.removeClass(t,i);else{let r=-1===i.indexOf("-")?void 0:yi.DashCase;null==o?e.removeStyle(t,i,r):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),r|=yi.Important),e.setStyle(t,i,o,r))}}(i,s,os(ut(),t),o,r))}(r,r.data[ut()],o,o[Z],e,o[s+1]=function MA(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Ze(vi(e)))),e}(n,t),i,s)}(e,n,null,!0),Oe}function up(e,n,t,i,o){let r=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(r=n[a],i=Zs(i,r.hostAttrs,o),r!==e);)a++;return null!==e&&(t.directiveStylingLast=a),i}function Zs(e,n,t){const i=t?1:2;let o=-1;if(null!==n)for(let r=0;r<n.length;r++){const s=n[r];"number"==typeof s?o=s:o===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),$t(e,s,!!t||n[++r]))}return void 0===e?null:e}function c1(e,n,t,i,o,r){const s=null===n;let a;for(;o>0;){const c=e[o],d=Array.isArray(c),f=d?c[1]:c,g=null===f;let _=t[o+1];_===te&&(_=g?ue:void 0);let v=g?Pd(_,i):f===i?_:void 0;if(d&&!Cl(v)&&(v=Pd(c,i)),Cl(v)&&(a=v,s))return a;const b=e[o+1];o=s?wi(b):ro(b)}if(null!==n){let c=r?n.residualClasses:n.residualStyles;null!=c&&(a=Pd(c,i))}return a}function Cl(e){return void 0!==e}function l(e,n,t,i){const o=k(),r=oe(),s=H+e,a=o[Z],c=r.firstCreatePass?function zA(e,n,t,i,o,r){const s=n.consts,c=Ji(n,e,2,i,en(s,o));return hf(n,t,c,en(s,r)),null!==c.attrs&&ll(c,c.attrs,!1),null!==c.mergedAttrs&&ll(c,c.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,c),c}(s,r,o,n,t,i):r.data[s],d=f1(r,o,c,a,n,e);o[s]=d;const f=vc(c);return dn(c,!0),Ly(a,d,c),!function ar(e){return!(32&~e.flags)}(c)&&as()&&Zc(r,o,d,c),0===function hE(){return K.lFrame.elementDepthCount}()&&mt(d,o),function fE(){K.lFrame.elementDepthCount++}(),f&&(lf(r,o,c),cf(r,c,o)),null!==i&&uf(o,c),l}function u(){let e=ve();th()?nh():(e=e.parent,dn(e,!1));const n=e;(function gE(e){return K.skipHydrationRootTNode===e})(n)&&function yE(){K.skipHydrationRootTNode=null}(),function pE(){K.lFrame.elementDepthCount--}();const t=oe();return t.firstCreatePass&&(Dc(t,e),qd(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function AE(e){return!!(8&e.flags)}(n)&&lp(t,n,k(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function OE(e){return!!(16&e.flags)}(n)&&lp(t,n,k(),n.stylesWithoutHost,!1),u}function W(e,n,t,i){return l(e,n,t,i),u(),W}let f1=(e,n,t,i,o,r)=>(Nn(!0),Wc(i,o,function q_(){return K.lFrame.currentNamespace}()));function so(e,n,t){const i=k(),o=oe(),r=e+H,s=o.firstCreatePass?function QA(e,n,t,i,o){const r=n.consts,s=en(r,i),a=Ji(n,e,8,"ng-container",s);return null!==s&&ll(a,s,!0),hf(n,t,a,en(r,o)),null!==n.queries&&n.queries.elementStart(n,a),a}(r,o,i,n,t):o.data[r];dn(s,!0);const a=g1(o,i,s,e);return i[r]=a,as()&&Zc(o,i,a,s),mt(a,i),vc(s)&&(lf(o,i,s),cf(o,s,i)),null!=t&&uf(i,s),so}function ao(){let e=ve();const n=oe();return th()?nh():(e=e.parent,dn(e,!1)),n.firstCreatePass&&(Dc(n,e),qd(e)&&n.queries.elementEnd(e)),ao}let g1=(e,n,t,i)=>(Nn(!0),Yh(n[Z],""));function A(){return k()}const co=void 0;var JA=["en",[["a","p"],["AM","PM"],co],[["AM","PM"],co,co],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],co,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],co,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",co,"{1} 'at' {0}",co],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function YA(e){const t=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let Sr={};function St(e){const n=function XA(e){return e.toLowerCase().replace(/_/g,"-")}(e);let t=y1(n);if(t)return t;const i=n.split("-")[0];if(t=y1(i),t)return t;if("en"===i)return JA;throw new R(701,!1)}function y1(e){return e in Sr||(Sr[e]=xe.ng&&xe.ng.common&&xe.ng.common.locales&&xe.ng.common.locales[e]),Sr[e]}var Te=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Te||{});const Ml="en-US";let C1=Ml,V1=(e,n,t)=>{};function I(e,n,t,i){const o=k(),r=oe(),s=ve();return mp(r,o,o[Z],s,e,n,i),I}function mp(e,n,t,i,o,r,s){const a=vc(i),d=e.firstCreatePass&&function Ky(e){return e.cleanup??=[]}(e),f=n[Se],g=function Zy(e){return e[Bo]??=[]}(n);let _=!0;if(3&i.type||s){const T=Mt(i,n),E=s?s(T):T,P=g.length,x=s?z=>s(de(z[i.index])):i.index;let j=null;if(!s&&a&&(j=function UO(e,n,t,i){const o=e.cleanup;if(null!=o)for(let r=0;r<o.length-1;r+=2){const s=o[r];if(s===t&&o[r+1]===i){const a=n[Bo],c=o[r+2];return a.length>c?a[c]:null}"string"==typeof s&&(r+=2)}return null}(e,n,o,i.index)),null!==j)(j.__ngLastListenerFn__||j).__ngNextListenerFn__=r,j.__ngLastListenerFn__=r,_=!1;else{r=H1(i,n,f,r),V1(T,o,r);const z=t.listen(E,o,r);g.push(r,z),d&&d.push(o,x,P,P+1)}}else r=H1(i,n,f,r);const v=i.outputs;let b;if(_&&null!==v&&(b=v[o])){const T=b.length;if(T)for(let E=0;E<T;E+=2){const re=n[b[E]][b[E+1]].subscribe(r),he=g.length;g.push(r,re),d&&d.push(o,i.index,he,-(he+1))}}}function U1(e,n,t,i){const o=ie(null);try{return En(6,n,t),!1!==t(i)}catch(r){return Xc(e,r),!1}finally{En(7,n,t),ie(o)}}function H1(e,n,t,i){return function o(r){if(r===Function)return i;Ns(e.componentOffset>-1?zt(e.index,n):n,5);let a=U1(n,t,i,r),c=o.__ngNextListenerFn__;for(;c;)a=U1(n,t,c,r)&&a,c=c.__ngNextListenerFn__;return a}}function m(e=1){return function DE(e){return(K.lFrame.contextLView=function k_(e,n){for(;e>0;)n=n[jo],e--;return n}(e,K.lFrame.contextLView))[Se]}(e)}function Il(e,n,t,i,o,r,s){const a=k(),c=_r(a,n,t,i,o,r);return c!==te&&Lt(oe(),Ie(),a,e,c,a[Z],s,!1),Il}function Ir(e){return $i(function R_(){return K.lFrame.contextLView}(),H+e)}function h(e,n=""){const t=k(),i=oe(),o=e+H,r=i.firstCreatePass?Ji(i,o,1,n,null):i.data[o],s=lM(i,t,r,n,e);t[o]=s,as()&&Zc(i,t,s,r),dn(r,!1)}let lM=(e,n,t,i,o)=>(Nn(!0),function Kh(e,n){return e.createText(n)}(n[Z],i));function L(e){return U("",e,""),L}function U(e,n,t){const i=k(),o=function mr(e,n,t,i){return je(e,hn(),t)?n+ee(t)+i:te}(i,e,n,t);return o!==te&&ti(i,ut(),o),U}function tt(e,n,t,i,o){const r=k(),s=_r(r,e,n,t,i,o);return s!==te&&ti(r,ut(),s),tt}function Tl(e,n,t,i,o,r,s){const a=k(),c=vr(a,e,n,t,i,o,r,s);return c!==te&&ti(a,ut(),c),Tl}function w(e,n,t){KC(n)&&(n=n());const i=k();return je(i,hn(),n)&&Lt(oe(),Ie(),i,e,n,i[Z],t,!1),w}function S(e,n){const t=KC(e);return t&&e.set(n),t}function D(e,n){const t=k(),i=oe(),o=ve();return mp(i,t,t[Z],o,e,n),D}function yp(e,n,t,i,o){if(e=Q(e),Array.isArray(e))for(let r=0;r<e.length;r++)yp(e[r],n,t,i,o);else{const r=oe(),s=k(),a=ve();let c=Ui(e)?e:Q(e.provide);const d=p_(e),f=1048575&a.providerIndexes,g=a.directiveStart,_=a.providerIndexes>>20;if(Ui(e)||!e.multi){const v=new cs(d,o,O),b=bp(c,n,o?f:f+_,g);-1===b?(ph(Ec(a,s),r,c),Cp(r,e,n.length),n.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[b]=v,s[b]=v)}else{const v=bp(c,n,f+_,g),b=bp(c,n,f,f+_),E=b>=0&&t[b];if(o&&!E||!o&&!(v>=0&&t[v])){ph(Ec(a,s),r,c);const P=function hR(e,n,t,i,o){const r=new cs(e,t,O);return r.multi=[],r.index=n,r.componentProviders=0,vM(r,o,i&&!t),r}(o?dR:uR,t.length,o,i,d);!o&&E&&(t[b].providerFactory=P),Cp(r,e,n.length,0),n.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(P),s.push(P)}else Cp(r,e,v>-1?v:b,vM(t[o?b:v],d,!o&&i));!o&&i&&E&&t[b].componentProviders++}}}function Cp(e,n,t,i){const o=Ui(n),r=function jT(e){return!!e.useClass}(n);if(o||r){const c=(r?Q(n.useClass):n).prototype.ngOnDestroy;if(c){const d=e.destroyHooks||(e.destroyHooks=[]);if(!o&&n.multi){const f=d.indexOf(t);-1===f?d.push(t,[i,c]):d[f+1].push(i,c)}else d.push(t,c)}}}function vM(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function bp(e,n,t,i){for(let o=t;o<i;o++)if(n[o]===e)return o;return-1}function uR(e,n,t,i){return Mp(this.multi,[])}function dR(e,n,t,i){const o=this.multi;let r;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Qi(t,t[V],this.providerFactory.index,i);r=a.slice(0,s),Mp(o,r);for(let c=s;c<a.length;c++)r.push(a[c])}else r=[],Mp(o,r);return r}function Mp(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Ae(e,n=[]){return t=>{t.providersResolver=(i,o)=>function lR(e,n,t){const i=oe();if(i.firstCreatePass){const o=un(e);yp(t,i.data,i.blueprint,o,!0),yp(n,i.data,i.blueprint,o,!1)}}(i,o?o(e):e,n)}}let fR=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=Fd(0,t.type),o=i.length>0?Wf([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=G({token:e,providedIn:"environment",factory:()=>new e(Y(Rt))})}}return e})();function Fe(e){Dt("NgStandalone"),e.getStandaloneInjector=n=>n.get(fR).getOrCreateStandaloneInjector(e)}function wM(e,n,t,i,o,r,s){const a=n+t;return io(e,a,o,r)?function An(e,n,t){return e[n]=t}(e,a+2,s?i.call(s,o,r):i(o,r)):function ta(e,n){const t=e[n];return t===te?void 0:t}(e,a+2)}function Tr(e,n){const t=oe();let i;const o=e+H;t.firstCreatePass?(i=function IR(e,n){if(n)for(let t=n.length-1;t>=0;t--){const i=n[t];if(e===i.name)return i}}(n,t.pipeRegistry),t.data[o]=i,i.onDestroy&&(t.destroyHooks??=[]).push(o,i.onDestroy)):i=t.data[o];const r=i.factory||(i.factory=ji(i.type)),a=Pt(O);try{const c=Tc(!1),d=r();return Tc(c),function vp(e,n,t,i){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=i}(t,k(),o,d),d}finally{Pt(a)}}function Er(e,n,t,i){const o=e+H,r=k(),s=$i(r,o);return function na(e,n){return e[V].data[n].pure}(r,o)?wM(r,wt(),n,s.transform,t,i,s):s.transform(t,i)}function Nr(e,n){return tl(e,n)}let HM=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();const WM=new B("");function sa(e){return!!e&&"function"==typeof e.then}function QM(e){return!!e&&"function"==typeof e.subscribe}const D3=new B("");let ZM=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=F(D3,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const o of this.appInits){const r=o();if(sa(r))t.push(r);else if(QM(r)){const s=new Promise((a,c)=>{r.subscribe({complete:a,error:c})});t.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(o=>{this.reject(o)}),0===t.length&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Al=new B("");let Ln=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(cN),this.afterRenderManager=F(Mb),this.zonelessEnabled=F(Vs),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new jt,this.afterTick=new jt,this.componentTypes=[],this.components=[],this.isStable=F(Xn).hasPendingTasks.pipe(ce(t=>!t)),this._injector=F(Rt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,i){const o=t instanceof EC;if(!this._injector.get(ZM).done)throw!o&&function pi(e){const n=se(e)||Ke(e)||ct(e);return null!==n&&n.standalone}(t),new R(405,!1);let s;s=o?t:this._injector.get(al).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function S3(e){return e.isBoundToModule}(s)?void 0:this._injector.get(no),d=s.create(dt.NULL,[],i||s.selector,a),f=d.location.nativeElement,g=d.injector.get(WM,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Ol(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new R(101,!1);const t=ie(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,ie(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(kf,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;0!==this.dirtyFlags&&i++<10;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const i=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:o,notifyErrorHandler:r}of this._views)E3(o,r,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else t?.begin?.(),t?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>yc(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Ol(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(Al,[]);[...this._bootstrapListeners,...i].forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ol(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new R(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ol(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function E3(e,n,t,i){(t||yc(e))&&el(e,n,t&&!i?0:1)}class N3{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let x3=(()=>{class e{compileModuleSync(t){return new qf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),r=Wt(pt(t).declarations).reduce((s,a)=>{const c=se(a);return c&&s.push(new Us(c)),s},[]);return new N3(i,r)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),A3=(()=>{class e{constructor(){this.zone=F(ye),this.changeDetectionScheduler=F(or),this.applicationRef=F(Ln)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function kp({ngZoneFactory:e,ignoreChangesOutsideZone:n,scheduleInRootZone:t}){return e??=()=>new ye({...Pp(),scheduleInRootZone:t}),[{provide:ye,useFactory:e},{provide:Sn,multi:!0,useFactory:()=>{const i=F(A3,{optional:!0});return()=>i.initialize()}},{provide:Sn,multi:!0,useFactory:()=>{const i=F(R3);return()=>{i.initialize()}}},!0===n?{provide:TC,useValue:!0}:[],{provide:xf,useValue:t??pv}]}function Pp(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}let R3=(()=>{class e{constructor(){this.subscription=new Ct,this.initialized=!1,this.zone=F(ye),this.pendingTasks=F(Xn)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),aa=(()=>{class e{constructor(){this.appRef=F(Ln),this.taskService=F(Xn),this.ngZone=F(ye),this.zonelessEnabled=F(Vs),this.disableScheduling=F(TC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ct,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ac):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(xf,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof bh||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const i=this.useMicrotaskScheduler?mv:gv;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ac+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,mv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Di=new B("",{providedIn:"root",factory:()=>F(Di,ae.Optional|ae.SkipSelf)||function F3(){return typeof $localize<"u"&&$localize.locale||Ml}()}),Fl=new B("");function Ll(e){return!e.moduleRef}let Si=null;let ca=(()=>{class e{static{this.__NG_ELEMENT_ID__=q3}}return e})();function q3(e){return function W3(e,n,t){if(Gi(e)&&!t){const i=zt(e.index,n);return new xs(i,i)}return 175&e.type?new xs(n[Pe],n):null}(ve(),k(),!(16&~e))}class hw{constructor(){}supports(n){return hl(n)}create(n){return new J3(n)}}const Y3=(e,n)=>n;class J3{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||Y3}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,i=this._removalsHead,o=0,r=null;for(;t||i;){const s=!i||t&&t.currentIndex<pw(i,o,r)?t:i,a=pw(s,o,r),c=s.currentIndex;if(s===i)o--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)o++;else{r||(r=[]);const d=a-o,f=c-o;if(d!=f){for(let _=0;_<d;_++){const v=_<r.length?r[_]:r[_]=0,b=v+_;f<=b&&b<d&&(r[_]=v+1)}r[s.previousIndex]=f-d}}a!==c&&n(s,a,c)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!hl(n))throw new R(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o,r,s,t=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)r=n[a],s=this._trackByFn(a,r),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,r,s,a)),Object.is(t.item,r)||this._addIdentityChange(t,r)):(t=this._mismatch(t,r,s,a),i=!0),t=t._next}else o=0,function mP(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let i;for(;!(i=t.next()).done;)n(i.value)}}(n,a=>{s=this._trackByFn(o,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,o),i=!0),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,i,o){let r;return null===n?r=this._itTail:(r=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,r,o)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,o))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,r,o)):n=this._addAfter(new X3(t,i),r,o),n}_verifyReinsertion(n,t,i,o){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?n=this._reinsertAfter(r,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,r=n._nextRemoved;return null===o?this._removalsHead=r:o._nextRemoved=r,null===r?this._removalsTail=o:r._prevRemoved=o,this._insertAfter(n,t,i),this._addToMoves(n,i),n}_moveAfter(n,t,i){return this._unlink(n),this._insertAfter(n,t,i),this._addToMoves(n,i),n}_addAfter(n,t,i){return this._insertAfter(n,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,i){const o=null===t?this._itHead:t._next;return n._next=o,n._prev=t,null===o?this._itTail=n:o._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new fw),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,i=n._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fw),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class X3{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class eF{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const t=n._prevDup,i=n._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class fw{constructor(){this.map=new Map}put(n){const t=n.trackById;let i=this.map.get(t);i||(i=new eF,this.map.set(t,i)),i.add(n)}get(n,t){const o=this.map.get(n);return o?o.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pw(e,n,t){const i=e.previousIndex;if(null===i)return i;let o=0;return t&&i<t.length&&(o=t[i]),i+n+o}function mw(){return new Bp([new hw])}let Bp=(()=>{class e{static{this.\u0275prov=G({token:e,providedIn:"root",factory:mw})}constructor(t){this.factories=t}static create(t,i){if(null!=i){const o=i.factories.slice();t=t.concat(o)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||mw()),deps:[[e,new xd,new Nd]]}}find(t){const i=this.factories.find(o=>o.supports(t));if(null!=i)return i;throw new R(901,!1)}}return e})();function mF(e){try{const{rootComponent:n,appProviders:t,platformProviders:i}=e,o=function z3(e=[]){if(Si)return Si;const n=function sw(e=[],n){return dt.create({name:n,providers:[{provide:Bd,useValue:"platform"},{provide:Fl,useValue:new Set([()=>Si=null])},...e]})}(e);return Si=n,function KM(){!function AI(e){Tm=e}(()=>{throw new R(600,!1)})}(),function aw(e){e.get(Uv,null)?.forEach(t=>t())}(n),n}(i),r=[kp({}),{provide:or,useExisting:aa},...t||[]];return function iw(e){const n=Ll(e)?e.r3Injector:e.moduleRef.injector,t=n.get(ye);return t.run(()=>{Ll(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();const i=n.get(kn,null);let o;if(t.runOutsideAngular(()=>{o=t.onError.subscribe({next:r=>{i.handleError(r)}})}),Ll(e)){const r=()=>n.destroy(),s=e.platformInjector.get(Fl);s.add(r),n.onDestroy(()=>{o.unsubscribe(),s.delete(r)})}else{const r=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Fl);s.add(r),e.moduleRef.onDestroy(()=>{Ol(e.allPlatformModules,e.moduleRef),o.unsubscribe(),s.delete(r)})}return function T3(e,n,t){try{const i=t();return sa(i)?i.catch(o=>{throw n.runOutsideAngular(()=>e.handleError(o)),o}):i}catch(i){throw n.runOutsideAngular(()=>e.handleError(i)),i}}(i,t,()=>{const r=n.get(ZM);return r.runInitializers(),r.donePromise.then(()=>{if(function iO(e){"string"==typeof e&&(C1=e.toLowerCase().replace(/_/g,"-"))}(n.get(Di,Ml)||Ml),Ll(e)){const a=n.get(Ln);return void 0!==e.rootComponent&&a.bootstrap(e.rootComponent),a}return function H3(e,n){const t=e.injector.get(Ln);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>t.bootstrap(i));else{if(!e.instance.ngDoBootstrap)throw new R(-403,!1);e.instance.ngDoBootstrap(t)}n.push(e)}(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}({r3Injector:new pb({providers:r,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:o,rootComponent:n})}catch(n){return Promise.reject(n)}}function Pr(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function ha(e,n){Dt("NgSignals");const t=function xI(e){const n=Object.create(kI);n.computation=e;const t=()=>{if(Cm(n),Xu(n),n.value===Qa)throw n.error;return n.value};return t[sn]=n,t}(e);return n?.equal&&(t[sn].equal=n.equal),t}function Vn(e){const n=ie(null);try{return e()}finally{ie(n)}}let jw=null;function Ii(){return jw}class GF{}const mn=new B("");let Uw=(()=>{class e{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>F($F),providedIn:"platform"})}}return e})(),$F=(()=>{class e extends Uw{constructor(){super(),this._doc=F(mn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ii().getBaseHref(this._doc)}onPopState(t){const i=Ii().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Ii().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,o){this._history.pushState(t,i,o)}replaceState(t,i,o){this._history.replaceState(t,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function Hw(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function Gw(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function uo(e){return e&&"?"!==e[0]?"?"+e:e}let Wl=(()=>{class e{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>F(qF),providedIn:"root"})}}return e})();const zF=new B("");let qF=(()=>{class e extends Wl{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??F(mn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Hw(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+uo(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${i}${o}`:i}pushState(t,i,o,r){const s=this.prepareExternalUrl(o+uo(r));this._platformLocation.pushState(t,i,s)}replaceState(t,i,o,r){const s=this.prepareExternalUrl(o+uo(r));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||e)(Y(Uw),Y(zF,8))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),fa=(()=>{class e{constructor(t){this._subject=new Re,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function ZF(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(Gw($w(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+uo(i))}normalize(t){return e.stripTrailingSlash(function QF(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,$w(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",o=null){this._locationStrategy.pushState(o,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+uo(i)),o)}replaceState(t,i="",o=null){this._locationStrategy.replaceState(o,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+uo(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(o=>o(t,i))}subscribe(t,i,o){return this._subject.subscribe({next:t,error:i,complete:o})}static{this.normalizeQueryParams=uo}static{this.joinWithSlash=Hw}static{this.stripTrailingSlash=Gw}static{this.\u0275fac=function(i){return new(i||e)(Y(Wl))}}static{this.\u0275prov=G({token:e,factory:()=>function WF(){return new fa(Y(Wl))}(),providedIn:"root"})}}return e})();function $w(e){return e.replace(/\/index.html$/,"")}var Tt=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(Tt||{}),Me=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(Me||{}),Kt=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(Kt||{});const qe={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Zl(e,n){return on(St(e)[Te.DateFormat],n)}function Kl(e,n){return on(St(e)[Te.TimeFormat],n)}function Yl(e,n){return on(St(e)[Te.DateTimeFormat],n)}function nn(e,n){const t=St(e),i=t[Te.NumberSymbols][n];if(typeof i>"u"){if(n===qe.CurrencyDecimal)return t[Te.NumberSymbols][qe.Decimal];if(n===qe.CurrencyGroup)return t[Te.NumberSymbols][qe.Group]}return i}function qw(e){if(!e[Te.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[Te.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function on(e,n){for(let t=n;t>-1;t--)if(typeof e[t]<"u")return e[t];throw new Error("Locale data API: locale data undefined")}function Gp(e){const[n,t]=e.split(":");return{hours:+n,minutes:+t}}const lL=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Jl={},uL=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var oi=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}(oi||{}),ge=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}(ge||{}),me=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}(me||{});function dL(e,n,t,i){let o=function CL(e){if(Zw(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[o,r=1,s=1]=e.split("-").map(a=>+a);return Xl(o,r-1,s)}const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);let i;if(i=e.match(lL))return function bL(e){const n=new Date(0);let t=0,i=0;const o=e[8]?n.setUTCFullYear:n.setFullYear,r=e[8]?n.setUTCHours:n.setHours;e[9]&&(t=Number(e[9]+e[10]),i=Number(e[9]+e[11])),o.call(n,Number(e[1]),Number(e[2])-1,Number(e[3]));const s=Number(e[4]||0)-t,a=Number(e[5]||0)-i,c=Number(e[6]||0),d=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return r.call(n,s,a,c,d),n}(i)}const n=new Date(e);if(!Zw(n))throw new Error(`Unable to convert "${e}" into a date`);return n}(e);n=ri(t,n)||n;let a,s=[];for(;n;){if(a=uL.exec(n),!a){s.push(n);break}{s=s.concat(a.slice(1));const f=s.pop();if(!f)break;n=f}}let c=o.getTimezoneOffset();i&&(c=Qw(i,c),o=function yL(e,n,t){const i=t?-1:1,o=e.getTimezoneOffset();return function vL(e,n){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+n),e}(e,i*(Qw(n,o)-o))}(o,i,!0));let d="";return s.forEach(f=>{const g=function _L(e){if(zp[e])return zp[e];let n;switch(e){case"G":case"GG":case"GGG":n=Ee(me.Eras,Me.Abbreviated);break;case"GGGG":n=Ee(me.Eras,Me.Wide);break;case"GGGGG":n=Ee(me.Eras,Me.Narrow);break;case"y":n=We(ge.FullYear,1,0,!1,!0);break;case"yy":n=We(ge.FullYear,2,0,!0,!0);break;case"yyy":n=We(ge.FullYear,3,0,!1,!0);break;case"yyyy":n=We(ge.FullYear,4,0,!1,!0);break;case"Y":n=iu(1);break;case"YY":n=iu(2,!0);break;case"YYY":n=iu(3);break;case"YYYY":n=iu(4);break;case"M":case"L":n=We(ge.Month,1,1);break;case"MM":case"LL":n=We(ge.Month,2,1);break;case"MMM":n=Ee(me.Months,Me.Abbreviated);break;case"MMMM":n=Ee(me.Months,Me.Wide);break;case"MMMMM":n=Ee(me.Months,Me.Narrow);break;case"LLL":n=Ee(me.Months,Me.Abbreviated,Tt.Standalone);break;case"LLLL":n=Ee(me.Months,Me.Wide,Tt.Standalone);break;case"LLLLL":n=Ee(me.Months,Me.Narrow,Tt.Standalone);break;case"w":n=$p(1);break;case"ww":n=$p(2);break;case"W":n=$p(1,!0);break;case"d":n=We(ge.Date,1);break;case"dd":n=We(ge.Date,2);break;case"c":case"cc":n=We(ge.Day,1);break;case"ccc":n=Ee(me.Days,Me.Abbreviated,Tt.Standalone);break;case"cccc":n=Ee(me.Days,Me.Wide,Tt.Standalone);break;case"ccccc":n=Ee(me.Days,Me.Narrow,Tt.Standalone);break;case"cccccc":n=Ee(me.Days,Me.Short,Tt.Standalone);break;case"E":case"EE":case"EEE":n=Ee(me.Days,Me.Abbreviated);break;case"EEEE":n=Ee(me.Days,Me.Wide);break;case"EEEEE":n=Ee(me.Days,Me.Narrow);break;case"EEEEEE":n=Ee(me.Days,Me.Short);break;case"a":case"aa":case"aaa":n=Ee(me.DayPeriods,Me.Abbreviated);break;case"aaaa":n=Ee(me.DayPeriods,Me.Wide);break;case"aaaaa":n=Ee(me.DayPeriods,Me.Narrow);break;case"b":case"bb":case"bbb":n=Ee(me.DayPeriods,Me.Abbreviated,Tt.Standalone,!0);break;case"bbbb":n=Ee(me.DayPeriods,Me.Wide,Tt.Standalone,!0);break;case"bbbbb":n=Ee(me.DayPeriods,Me.Narrow,Tt.Standalone,!0);break;case"B":case"BB":case"BBB":n=Ee(me.DayPeriods,Me.Abbreviated,Tt.Format,!0);break;case"BBBB":n=Ee(me.DayPeriods,Me.Wide,Tt.Format,!0);break;case"BBBBB":n=Ee(me.DayPeriods,Me.Narrow,Tt.Format,!0);break;case"h":n=We(ge.Hours,1,-12);break;case"hh":n=We(ge.Hours,2,-12);break;case"H":n=We(ge.Hours,1);break;case"HH":n=We(ge.Hours,2);break;case"m":n=We(ge.Minutes,1);break;case"mm":n=We(ge.Minutes,2);break;case"s":n=We(ge.Seconds,1);break;case"ss":n=We(ge.Seconds,2);break;case"S":n=We(ge.FractionalSeconds,1);break;case"SS":n=We(ge.FractionalSeconds,2);break;case"SSS":n=We(ge.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=tu(oi.Short);break;case"ZZZZZ":n=tu(oi.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=tu(oi.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=tu(oi.Long);break;default:return null}return zp[e]=n,n}(f);d+=g?g(o,t,c):"''"===f?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function Xl(e,n,t){const i=new Date(0);return i.setFullYear(e,n,t),i.setHours(0,0,0),i}function ri(e,n){const t=function YF(e){return St(e)[Te.LocaleId]}(e);if(Jl[t]??={},Jl[t][n])return Jl[t][n];let i="";switch(n){case"shortDate":i=Zl(e,Kt.Short);break;case"mediumDate":i=Zl(e,Kt.Medium);break;case"longDate":i=Zl(e,Kt.Long);break;case"fullDate":i=Zl(e,Kt.Full);break;case"shortTime":i=Kl(e,Kt.Short);break;case"mediumTime":i=Kl(e,Kt.Medium);break;case"longTime":i=Kl(e,Kt.Long);break;case"fullTime":i=Kl(e,Kt.Full);break;case"short":const o=ri(e,"shortTime"),r=ri(e,"shortDate");i=eu(Yl(e,Kt.Short),[o,r]);break;case"medium":const s=ri(e,"mediumTime"),a=ri(e,"mediumDate");i=eu(Yl(e,Kt.Medium),[s,a]);break;case"long":const c=ri(e,"longTime"),d=ri(e,"longDate");i=eu(Yl(e,Kt.Long),[c,d]);break;case"full":const f=ri(e,"fullTime"),g=ri(e,"fullDate");i=eu(Yl(e,Kt.Full),[f,g])}return i&&(Jl[t][n]=i),i}function eu(e,n){return n&&(e=e.replace(/\{([^}]+)}/g,function(t,i){return null!=n&&i in n?n[i]:t})),e}function _n(e,n,t="-",i,o){let r="";(e<0||o&&e<=0)&&(o?e=1-e:(e=-e,r=t));let s=String(e);for(;s.length<n;)s="0"+s;return i&&(s=s.slice(s.length-n)),r+s}function We(e,n,t=0,i=!1,o=!1){return function(r,s){let a=function fL(e,n){switch(e){case ge.FullYear:return n.getFullYear();case ge.Month:return n.getMonth();case ge.Date:return n.getDate();case ge.Hours:return n.getHours();case ge.Minutes:return n.getMinutes();case ge.Seconds:return n.getSeconds();case ge.FractionalSeconds:return n.getMilliseconds();case ge.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,r);if((t>0||a>-t)&&(a+=t),e===ge.Hours)0===a&&-12===t&&(a=12);else if(e===ge.FractionalSeconds)return function hL(e,n){return _n(e,3).substring(0,n)}(a,n);const c=nn(s,qe.MinusSign);return _n(a,n,c,i,o)}}function Ee(e,n,t=Tt.Format,i=!1){return function(o,r){return function pL(e,n,t,i,o,r){switch(t){case me.Months:return function eL(e,n,t){const i=St(e),r=on([i[Te.MonthsFormat],i[Te.MonthsStandalone]],n);return on(r,t)}(n,o,i)[e.getMonth()];case me.Days:return function XF(e,n,t){const i=St(e),r=on([i[Te.DaysFormat],i[Te.DaysStandalone]],n);return on(r,t)}(n,o,i)[e.getDay()];case me.DayPeriods:const s=e.getHours(),a=e.getMinutes();if(r){const d=function oL(e){const n=St(e);return qw(n),(n[Te.ExtraData][2]||[]).map(i=>"string"==typeof i?Gp(i):[Gp(i[0]),Gp(i[1])])}(n),f=function rL(e,n,t){const i=St(e);qw(i);const r=on([i[Te.ExtraData][0],i[Te.ExtraData][1]],n)||[];return on(r,t)||[]}(n,o,i),g=d.findIndex(_=>{if(Array.isArray(_)){const[v,b]=_,T=s>=v.hours&&a>=v.minutes,E=s<b.hours||s===b.hours&&a<b.minutes;if(v.hours<b.hours){if(T&&E)return!0}else if(T||E)return!0}else if(_.hours===s&&_.minutes===a)return!0;return!1});if(-1!==g)return f[g]}return function JF(e,n,t){const i=St(e),r=on([i[Te.DayPeriodsFormat],i[Te.DayPeriodsStandalone]],n);return on(r,t)}(n,o,i)[s<12?0:1];case me.Eras:return function tL(e,n){return on(St(e)[Te.Eras],n)}(n,i)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,r,e,n,t,i)}}function tu(e){return function(n,t,i){const o=-1*i,r=nn(t,qe.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(e){case oi.Short:return(o>=0?"+":"")+_n(s,2,r)+_n(Math.abs(o%60),2,r);case oi.ShortGMT:return"GMT"+(o>=0?"+":"")+_n(s,1,r);case oi.Long:return"GMT"+(o>=0?"+":"")+_n(s,2,r)+":"+_n(Math.abs(o%60),2,r);case oi.Extended:return 0===i?"Z":(o>=0?"+":"")+_n(s,2,r)+":"+_n(Math.abs(o%60),2,r);default:throw new Error(`Unknown zone width "${e}"`)}}}const gL=0,nu=4;function Ww(e){const n=e.getDay(),t=0===n?-3:nu-n;return Xl(e.getFullYear(),e.getMonth(),e.getDate()+t)}function $p(e,n=!1){return function(t,i){let o;if(n){const r=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();o=1+Math.floor((s+r)/7)}else{const r=Ww(t),s=function mL(e){const n=Xl(e,gL,1).getDay();return Xl(e,0,1+(n<=nu?nu:nu+7)-n)}(r.getFullYear()),a=r.getTime()-s.getTime();o=1+Math.round(a/6048e5)}return _n(o,e,nn(i,qe.MinusSign))}}function iu(e,n=!1){return function(t,i){return _n(Ww(t).getFullYear(),e,nn(i,qe.MinusSign),n)}}const zp={};function Qw(e,n){e=e.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(t)?n:t}function Zw(e){return e instanceof Date&&!isNaN(e.valueOf())}function Xw(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const i=t.indexOf("="),[o,r]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(o.trim()===n)return decodeURIComponent(r)}return null}const Yp=/\s+/,e0=[];let Jp=(()=>{class e{constructor(t,i){this._ngEl=t,this._renderer=i,this.initialClasses=e0,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Yp):e0}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Yp):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const o=this.stateMap.get(t);void 0!==o?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],o=t[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(Yp).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static{this.\u0275fac=function(i){return new(i||e)(O(qt),O(ii))}}static{this.\u0275dir=J({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return e})();class OL{constructor(n,t,i,o){this.$implicit=n,this.ngForOf=t,this.index=i,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Et=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,o){this._viewContainer=t,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((o,r,s)=>{if(null==o.previousIndex)i.createEmbeddedView(this._template,new OL(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===r?void 0:r);else if(null!==r){const a=i.get(r);i.move(a,s),n0(a,o)}});for(let o=0,r=i.length;o<r;o++){const a=i.get(o).context;a.index=o,a.count=r,a.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{n0(i.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||e)(O(fn),O(ni),O(Bp))}}static{this.\u0275dir=J({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function n0(e,n){e.context.$implicit=n.item}let _t=(()=>{class e{constructor(t,i){this._viewContainer=t,this._context=new RL,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){o0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){o0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||e)(O(fn),O(ni))}}static{this.\u0275dir=J({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})();class RL{constructor(){this.$implicit=null,this.ngIf=null}}function o0(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Ze(n)}'.`)}const QL=new B(""),ZL=new B("");let ru=(()=>{class e{constructor(t,i,o){this.locale=t,this.defaultTimezone=i,this.defaultOptions=o}transform(t,i,o,r){if(null==t||""===t||t!=t)return null;try{return dL(t,i??this.defaultOptions?.dateFormat??"mediumDate",r||this.locale,o??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw function vn(e,n){return new R(2100,!1)}()}}static{this.\u0275fac=function(i){return new(i||e)(O(Di,16),O(QL,24),O(ZL,24))}}static{this.\u0275pipe=Ot({name:"date",type:e,pure:!0,standalone:!0})}}return e})(),Bt=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=Oo({type:e})}static{this.\u0275inj=Bi({})}}return e})();function c0(e){return"server"===e}class l0{}class O4 extends GF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sg extends O4{static makeCurrent(){!function HF(e){jw??=e}(new sg)}onAndCancel(n,t,i){return n.addEventListener(t,i),()=>{n.removeEventListener(t,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function R4(){return _a=_a||document.querySelector("base"),_a?_a.getAttribute("href"):null}();return null==t?null:function F4(e){return new URL(e,document.baseURI).pathname}(t)}resetBaseElement(){_a=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Xw(document.cookie,n)}}let _a=null,V4=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})();const ag=new B("");let C0=(()=>{class e{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,o){return this._findPluginFor(i).addEventListener(t,i,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(r=>r.supports(t)),!i)throw new R(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||e)(Y(ag),Y(ye))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})();class b0{constructor(n){this._doc=n}}const cg="ng-app-id";let M0=(()=>{class e{constructor(t,i,o,r={}){this.doc=t,this.appId=i,this.nonce=o,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=c0(r),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(o=>o.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${cg}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(o=>{null!=o.textContent&&i.set(o.textContent,o)}),i}return null}changeUsageCount(t,i){const o=this.styleRef;if(o.has(t)){const r=o.get(t);return r.usage+=i,r.usage}return o.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const o=this.styleNodesInDOM,r=o?.get(i);if(r?.parentNode===t)return o.delete(i),r.removeAttribute(cg),r;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(cg,this.appId),t.appendChild(s),s}}addStyleToHost(t,i){const o=this.getStyleElement(t,i),r=this.styleRef,s=r.get(i)?.elements;s?s.push(o):r.set(i,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||e)(Y(mn),Y(ms),Y(Hv,8),Y(_i))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})();const lg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ug=/%COMP%/g,H4=new B("",{providedIn:"root",factory:()=>!0});function D0(e,n){return n.map(t=>t.replace(ug,e))}let S0=(()=>{class e{constructor(t,i,o,r,s,a,c,d=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=r,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=c0(a),this.defaultRenderer=new dg(t,s,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===an.ShadowDom&&(i={...i,encapsulation:an.Emulated});const o=this.getOrCreateRenderer(t,i);return o instanceof T0?o.applyToHost(t):o instanceof hg&&o.applyStyles(),o}getOrCreateRenderer(t,i){const o=this.rendererByCompId;let r=o.get(i.id);if(!r){const s=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case an.Emulated:r=new T0(c,d,i,this.appId,f,s,a,g);break;case an.ShadowDom:return new q4(c,d,t,i,s,a,this.nonce,g);default:r=new hg(c,d,i,f,s,a,g)}o.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||e)(Y(C0),Y(M0),Y(ms),Y(H4),Y(mn),Y(_i),Y(ye),Y(Hv))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})();class dg{constructor(n,t,i,o){this.eventManager=n,this.doc=t,this.ngZone=i,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(lg[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(I0(n)?n.content:n).appendChild(t)}insertBefore(n,t,i){n&&(I0(n)?n.content:n).insertBefore(t,i)}removeChild(n,t){t.remove()}selectRootElement(n,t){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new R(-5104,!1);return t||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,i,o){if(o){t=o+":"+t;const r=lg[o];r?n.setAttributeNS(r,t,i):n.setAttribute(t,i)}else n.setAttribute(t,i)}removeAttribute(n,t,i){if(i){const o=lg[i];o?n.removeAttributeNS(o,t):n.removeAttribute(`${i}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,i,o){o&(yi.DashCase|yi.Important)?n.style.setProperty(t,i,o&yi.Important?"important":""):n.style[t]=i}removeStyle(n,t,i){i&yi.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,i){null!=n&&(n[t]=i)}setValue(n,t){n.nodeValue=t}listen(n,t,i){if("string"==typeof n&&!(n=Ii().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(i))}decoratePreventDefault(n){return t=>{if("__ngUnwrap__"===t)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))&&t.preventDefault()}}}function I0(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class q4 extends dg{constructor(n,t,i,o,r,s,a,c){super(n,r,s,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=D0(o.id,o.styles);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,i){return super.insertBefore(this.nodeOrShadowRoot(n),t,i)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class hg extends dg{constructor(n,t,i,o,r,s,a,c){super(n,r,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=c?D0(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class T0 extends hg{constructor(n,t,i,o,r,s,a,c){const d=o+"-"+i.id;super(n,t,i,r,s,a,c,d),this.contentAttr=function G4(e){return"_ngcontent-%COMP%".replace(ug,e)}(d),this.hostAttr=function $4(e){return"_nghost-%COMP%".replace(ug,e)}(d)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const i=super.createElement(n,t);return super.setAttribute(i,this.contentAttr,""),i}}const E0=["alt","control","meta","shift"],Q4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Z4={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};function N0(e){return{appProviders:[...iV,...e?.providers??[]],platformProviders:tV}}const tV=[{provide:_i,useValue:"browser"},{provide:Uv,useValue:function J4(){sg.makeCurrent()},multi:!0},{provide:mn,useFactory:function eV(){return function xN(e){Th=e}(document),document},deps:[]}],iV=[{provide:Bd,useValue:"root"},{provide:kn,useFactory:function X4(){return new kn},deps:[]},{provide:ag,useClass:(()=>{class e extends b0{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,o){return t.addEventListener(i,o,!1),()=>this.removeEventListener(t,i,o)}removeEventListener(t,i,o){return t.removeEventListener(i,o)}static{this.\u0275fac=function(i){return new(i||e)(Y(mn))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})(),multi:!0,deps:[mn,ye,_i]},{provide:ag,useClass:(()=>{class e extends b0{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,i,o){const r=e.parseEventName(i),s=e.eventCallback(r.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ii().onAndCancel(t,r.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const r=e._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),E0.forEach(d=>{const f=i.indexOf(d);f>-1&&(i.splice(f,1),s+=d+".")}),s+=r,0!=i.length||0===r.length)return null;const c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let o=Q4[t.key]||t.key,r="";return i.indexOf("code.")>-1&&(o=t.code,r="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),E0.forEach(s=>{s!==o&&(0,Z4[s])(t)&&(r+=s+".")}),r+=o,r===i)}static eventCallback(t,i,o){return r=>{e.matchEventFullKeyCode(r,t)&&o.runGuarded(()=>i(r))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(i){return new(i||e)(Y(mn))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})(),multi:!0,deps:[mn]},S0,M0,C0,{provide:kf,useExisting:S0},{provide:l0,useClass:V4,deps:[]},[]];let oV=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||e)(Y(mn))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function P0(e,n,t,i,o,r,s){try{var a=e[r](s),c=a.value}catch(d){return void t(d)}a.done?n(c):Promise.resolve(c).then(i,o)}function A0(e){return function(){var n=this,t=arguments;return new Promise(function(i,o){var r=e.apply(n,t);function s(c){P0(r,i,o,s,a,"next",c)}function a(c){P0(r,i,o,s,a,"throw",c)}s(void 0)})}}function fg(e){return e[e.length-1]}function O0(e){return Ne(fg(e))?e.pop():void 0}function uu(e){return function cV(e){return e&&Ne(e.schedule)}(fg(e))?e.pop():void 0}function Ti(e){return this instanceof Ti?(this.v=e,this):new Ti(e)}function V0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function _g(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],i=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(s){return new Promise(function(a,c){!function o(r,s,a,c){Promise.resolve(c).then(function(d){r({value:d,done:a})},s)}(a,c,(s=e[r](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const B0=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function j0(e){return Ne(e?.then)}function U0(e){return Ne(e[pd])}function H0(e){return Symbol.asyncIterator&&Ne(e?.[Symbol.asyncIterator])}function G0(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const $0=function RV(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function z0(e){return Ne(e?.[$0])}function q0(e){return function L0(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=t.apply(e,n||[]),r=[];return o=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(v){return function(b){return Promise.resolve(b).then(v,g)}}),o[Symbol.asyncIterator]=function(){return this},o;function a(v,b){i[v]&&(o[v]=function(T){return new Promise(function(E,P){r.push([v,T,E,P])>1||c(v,T)})},b&&(o[v]=b(o[v])))}function c(v,b){try{!function d(v){v.value instanceof Ti?Promise.resolve(v.value.v).then(f,g):_(r[0][2],v)}(i[v](b))}catch(T){_(r[0][3],T)}}function f(v){c("next",v)}function g(v){c("throw",v)}function _(v,b){v(b),r.shift(),r.length&&c(r[0][0],r[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:i,done:o}=yield Ti(t.read());if(o)return yield Ti(void 0);yield yield Ti(i)}}finally{t.releaseLock()}})}function W0(e){return Ne(e?.getReader)}function Bn(e){if(e instanceof Ge)return e;if(null!=e){if(U0(e))return function FV(e){return new Ge(n=>{const t=e[pd]();if(Ne(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(B0(e))return function LV(e){return new Ge(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(j0(e))return function VV(e){return new Ge(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Om)})}(e);if(H0(e))return Q0(e);if(z0(e))return function BV(e){return new Ge(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(W0(e))return function jV(e){return Q0(q0(e))}(e)}throw G0(e)}function Q0(e){return new Ge(n=>{(function UV(e,n){var t,i,o,r;return function R0(e,n,t,i){return new(t||(t=Promise))(function(r,s){function a(f){try{d(i.next(f))}catch(g){s(g)}}function c(f){try{d(i.throw(f))}catch(g){s(g)}}function d(f){f.done?r(f.value):function o(r){return r instanceof t?r:new t(function(s){s(r)})}(f.value).then(a,c)}d((i=i.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=V0(e);!(i=yield t.next()).done;)if(n.next(i.value),n.closed)return}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=t.return)&&(yield r.call(t))}finally{if(o)throw o.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function si(e,n,t,i=0,o=!1){const r=n.schedule(function(){t(),o?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(r),!o)return r}function Z0(e,n=0){return at((t,i)=>{t.subscribe(Qe(i,o=>si(i,e,()=>i.next(o),n),()=>si(i,e,()=>i.complete(),n),o=>si(i,e,()=>i.error(o),n)))})}function K0(e,n=0){return at((t,i)=>{i.add(e.schedule(()=>t.subscribe(i),n))})}function Y0(e,n){if(!e)throw new Error("Iterable cannot be null");return new Ge(t=>{si(t,n,()=>{const i=e[Symbol.asyncIterator]();si(t,n,()=>{i.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function ht(e,n){return n?function WV(e,n){if(null!=e){if(U0(e))return function HV(e,n){return Bn(e).pipe(K0(n),Z0(n))}(e,n);if(B0(e))return function $V(e,n){return new Ge(t=>{let i=0;return n.schedule(function(){i===e.length?t.complete():(t.next(e[i++]),t.closed||this.schedule())})})}(e,n);if(j0(e))return function GV(e,n){return Bn(e).pipe(K0(n),Z0(n))}(e,n);if(H0(e))return Y0(e,n);if(z0(e))return function zV(e,n){return new Ge(t=>{let i;return si(t,n,()=>{i=e[$0](),si(t,n,()=>{let o,r;try{({value:o,done:r}=i.next())}catch(s){return void t.error(s)}r?t.complete():t.next(o)},0,!0)}),()=>Ne(i?.return)&&i.return()})}(e,n);if(W0(e))return function qV(e,n){return Y0(q0(e),n)}(e,n)}throw G0(e)}(e,n):Bn(e)}function X(...e){return ht(e,uu(e))}function Nt(e,n,t=1/0){return Ne(n)?Nt((i,o)=>ce((r,s)=>n(i,r,o,s))(Bn(e(i,o))),t):("number"==typeof n&&(t=n),at((i,o)=>function QV(e,n,t,i,o,r,s,a){const c=[];let d=0,f=0,g=!1;const _=()=>{g&&!c.length&&!d&&n.complete()},v=T=>d<i?b(T):c.push(T),b=T=>{r&&n.next(T),d++;let E=!1;Bn(t(T,f++)).subscribe(Qe(n,P=>{o?.(P),r?v(P):n.next(P)},()=>{E=!0},void 0,()=>{if(E)try{for(d--;c.length&&d<i;){const P=c.shift();s?si(n,s,()=>b(P)):b(P)}_()}catch(P){n.error(P)}}))};return e.subscribe(Qe(n,v,()=>{g=!0,_()})),()=>{a?.()}}(i,o,e,t)))}function va(e,n){return Ne(n)?Nt(e,n,1):Nt(e,1)}function Ei(e,n){return at((t,i)=>{let o=0;t.subscribe(Qe(i,r=>e.call(n,r,o++)&&i.next(r)))})}function ya(e){return at((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}function jn(e,n){return at((t,i)=>{let o=null,r=0,s=!1;const a=()=>s&&!o&&i.complete();t.subscribe(Qe(i,c=>{o?.unsubscribe();let d=0;const f=r++;Bn(e(c,f)).subscribe(o=Qe(i,g=>i.next(n?n(c,g,f,d++):g),()=>{o=null,a()}))},()=>{s=!0,a()}))})}class du{}class hu{}class rn{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const o=t.slice(0,i),r=o.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(o,r),this.headers.has(r)?this.headers.get(r).push(s):this.headers.set(r,[s])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof rn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new rn;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof rn?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,t);const o=("a"===n.op?this.headers.get(t):void 0)||[];o.push(...i),this.headers.set(t,o);break;case"d":const r=n.value;if(r){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===r.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(n,t){const i=(Array.isArray(t)?t:[t]).map(r=>r.toString()),o=n.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(n,o)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class ZV{encodeKey(n){return J0(n)}encodeValue(n){return J0(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const YV=/%(\d[a-f0-9])/gi,JV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function J0(e){return encodeURIComponent(e).replace(YV,(n,t)=>JV[t]??n)}function fu(e){return`${e}`}class Ni{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new ZV,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function KV(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(o=>{const r=o.indexOf("="),[s,a]=-1==r?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,r)),n.decodeValue(o.slice(r+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const i=n.fromObject[t],o=Array.isArray(i)?i.map(fu):[fu(i)];this.map.set(t,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(i=>{const o=n[i];Array.isArray(o)?o.forEach(r=>{t.push({param:i,value:r,op:"a"})}):t.push({param:i,value:o,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new Ni({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(fu(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const o=i.indexOf(fu(n.value));-1!==o&&i.splice(o,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class XV{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function X0(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function eD(e){return typeof Blob<"u"&&e instanceof Blob}function tD(e){return typeof FormData<"u"&&e instanceof FormData}class Ca{constructor(n,t,i,o){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function eB(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==i?i:null,r=o):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params),this.transferCache=r.transferCache),this.headers??=new rn,this.context??=new XV,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Ni,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||X0(this.body)||eD(this.body)||tD(this.body)||function tB(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Ni?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||tD(this.body)?null:eD(this.body)?this.body.type||null:X0(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ni?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,i=n.url||this.url,o=n.responseType||this.responseType,r=n.transferCache??this.transferCache,s=void 0!==n.body?n.body:this.body,a=n.withCredentials??this.withCredentials,c=n.reportProgress??this.reportProgress;let d=n.headers||this.headers,f=n.params||this.params;const g=n.context??this.context;return void 0!==n.setHeaders&&(d=Object.keys(n.setHeaders).reduce((_,v)=>_.set(v,n.setHeaders[v]),d)),n.setParams&&(f=Object.keys(n.setParams).reduce((_,v)=>_.set(v,n.setParams[v]),f)),new Ca(t,i,s,{params:f,headers:d,context:g,reportProgress:c,responseType:o,withCredentials:a,transferCache:r})}}var xi=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(xi||{});class yg{constructor(n,t=200,i="OK"){this.headers=n.headers||new rn,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class pu extends yg{constructor(n={}){super(n),this.type=xi.ResponseHeader}clone(n={}){return new pu({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class fo extends yg{constructor(n={}){super(n),this.type=xi.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new fo({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Rr extends yg{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function Cg(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}let ot=(()=>{class e{constructor(t){this.handler=t}request(t,i,o={}){let r;if(t instanceof Ca)r=t;else{let c,d;c=o.headers instanceof rn?o.headers:new rn(o.headers),o.params&&(d=o.params instanceof Ni?o.params:new Ni({fromObject:o.params})),r=new Ca(t,i,void 0!==o.body?o.body:null,{headers:c,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}const s=X(r).pipe(va(c=>this.handler.handle(c)));if(t instanceof Ca||"events"===o.observe)return s;const a=s.pipe(Ei(c=>c instanceof fo));switch(o.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(ce(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(ce(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(ce(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(ce(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Ni).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,o={}){return this.request("PATCH",t,Cg(o,i))}post(t,i,o={}){return this.request("POST",t,Cg(o,i))}put(t,i,o={}){return this.request("PUT",t,Cg(o,i))}static{this.\u0275fac=function(i){return new(i||e)(Y(du))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})();const oB=/^\)\]\}',?\n/;function iD(e){if(e.url)return e.url;const n="X-Request-URL".toLocaleLowerCase();return e.headers.get(n)}let bg=(()=>{class e{constructor(){this.fetchImpl=F(sB,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=F(ye)}handle(t){return new Ge(i=>{const o=new AbortController;return this.doRequest(t,o.signal,i).then(Mg,r=>i.error(new Rr({error:r}))),()=>o.abort()})}doRequest(t,i,o){var r=this;return A0(function*(){const s=r.createRequestInit(t);let a;try{const b=r.ngZone.runOutsideAngular(()=>r.fetchImpl(t.urlWithParams,{signal:i,...s}));(function aB(e){e.then(Mg,Mg)})(b),o.next({type:xi.Sent}),a=yield b}catch(b){return void o.error(new Rr({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}))}const c=new rn(a.headers),d=a.statusText,f=iD(a)??t.urlWithParams;let g=a.status,_=null;if(t.reportProgress&&o.next(new pu({headers:c,status:g,statusText:d,url:f})),a.body){const b=a.headers.get("content-length"),T=[],E=a.body.getReader();let x,j,P=0;const z=typeof Zone<"u"&&Zone.current;yield r.ngZone.runOutsideAngular(A0(function*(){for(;;){const{done:he,value:Le}=yield E.read();if(he)break;if(T.push(Le),P+=Le.length,t.reportProgress){j="text"===t.responseType?(j??"")+(x??=new TextDecoder).decode(Le,{stream:!0}):void 0;const ui=()=>o.next({type:xi.DownloadProgress,total:b?+b:void 0,loaded:P,partialText:j});z?z.run(ui):ui()}}}));const re=r.concatChunks(T,P);try{const he=a.headers.get("Content-Type")??"";_=r.parseBody(t,re,he)}catch(he){return void o.error(new Rr({error:he,headers:new rn(a.headers),status:a.status,statusText:a.statusText,url:iD(a)??t.urlWithParams}))}}0===g&&(g=_?200:0),g>=200&&g<300?(o.next(new fo({body:_,headers:c,status:g,statusText:d,url:f})),o.complete()):o.error(new Rr({error:_,headers:c,status:g,statusText:d,url:f}))})()}parseBody(t,i,o){switch(t.responseType){case"json":const r=(new TextDecoder).decode(i).replace(oB,"");return""===r?null:JSON.parse(r);case"text":return(new TextDecoder).decode(i);case"blob":return new Blob([i],{type:o});case"arraybuffer":return i.buffer}}createRequestInit(t){const i={},o=t.withCredentials?"include":void 0;if(t.headers.forEach((r,s)=>i[r]=s.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const r=t.detectContentTypeHeader();null!==r&&(i["Content-Type"]=r)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:o}}concatChunks(t,i){const o=new Uint8Array(i);let r=0;for(const s of t)o.set(s,r),r+=s.length;return o}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})();class sB{}function Mg(){}function oD(e,n){return n(e)}function cB(e,n){return(t,i)=>n.intercept(t,{handle:o=>e(o,i)})}const uB=new B(""),ba=new B(""),rD=new B(""),sD=new B("",{providedIn:"root",factory:()=>!0});function dB(){let e=null;return(n,t)=>{null===e&&(e=(F(uB,{optional:!0})??[]).reduceRight(cB,oD));const i=F(Xn);if(F(sD)){const r=i.add();return e(n,t).pipe(ya(()=>i.remove(r)))}return e(n,t)}}let aD=(()=>{class e extends du{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=F(Xn),this.contributeToStability=F(sD)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(ba),...this.injector.get(rD,[])]));this.chain=i.reduceRight((o,r)=>function lB(e,n,t){return(i,o)=>Qn(t,()=>n(i,r=>e(r,o)))}(o,r,this.injector),oD)}if(this.contributeToStability){const i=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(ya(()=>this.pendingTasks.remove(i)))}return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||e)(Y(hu),Y(Rt))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})();const mB=/^\)\]\}',?\n/;let lD=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new R(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?ht(i.\u0275loadImpl()):X(null)).pipe(jn(()=>new Ge(r=>{const s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((T,E)=>s.setRequestHeader(T,E.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const T=t.detectContentTypeHeader();null!==T&&s.setRequestHeader("Content-Type",T)}if(t.responseType){const T=t.responseType.toLowerCase();s.responseType="json"!==T?T:"text"}const a=t.serializeBody();let c=null;const d=()=>{if(null!==c)return c;const T=s.statusText||"OK",E=new rn(s.getAllResponseHeaders()),P=function _B(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(s)||t.url;return c=new pu({headers:E,status:s.status,statusText:T,url:P}),c},f=()=>{let{headers:T,status:E,statusText:P,url:x}=d(),j=null;204!==E&&(j=typeof s.response>"u"?s.responseText:s.response),0===E&&(E=j?200:0);let z=E>=200&&E<300;if("json"===t.responseType&&"string"==typeof j){const re=j;j=j.replace(mB,"");try{j=""!==j?JSON.parse(j):null}catch(he){j=re,z&&(z=!1,j={error:he,text:j})}}z?(r.next(new fo({body:j,headers:T,status:E,statusText:P,url:x||void 0})),r.complete()):r.error(new Rr({error:j,headers:T,status:E,statusText:P,url:x||void 0}))},g=T=>{const{url:E}=d(),P=new Rr({error:T,status:s.status||0,statusText:s.statusText||"Unknown Error",url:E||void 0});r.error(P)};let _=!1;const v=T=>{_||(r.next(d()),_=!0);let E={type:xi.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(E.total=T.total),"text"===t.responseType&&s.responseText&&(E.partialText=s.responseText),r.next(E)},b=T=>{let E={type:xi.UploadProgress,loaded:T.loaded};T.lengthComputable&&(E.total=T.total),r.next(E)};return s.addEventListener("load",f),s.addEventListener("error",g),s.addEventListener("timeout",g),s.addEventListener("abort",g),t.reportProgress&&(s.addEventListener("progress",v),null!==a&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),r.next({type:xi.Sent}),()=>{s.removeEventListener("error",g),s.removeEventListener("abort",g),s.removeEventListener("load",f),s.removeEventListener("timeout",g),t.reportProgress&&(s.removeEventListener("progress",v),null!==a&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||e)(Y(l0))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})();const wg=new B(""),uD=new B("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),dD=new B("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class hD{}let CB=(()=>{class e{constructor(t,i,o){this.doc=t,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Xw(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||e)(Y(mn),Y(_i),Y(uD))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac})}}return e})();function bB(e,n){const t=e.url.toLowerCase();if(!F(wg)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const i=F(hD).getToken(),o=F(dD);return null!=i&&!e.headers.has(o)&&(e=e.clone({headers:e.headers.set(o,i)})),n(e)}var ki=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(ki||{});function po(e,n){return{\u0275kind:e,\u0275providers:n}}function fD(...e){const n=[ot,lD,aD,{provide:du,useExisting:aD},{provide:hu,useFactory:()=>F(bg,{optional:!0})??F(lD)},{provide:ba,useValue:bB,multi:!0},{provide:wg,useValue:!0},{provide:hD,useClass:CB}];for(const t of e)n.push(...t.\u0275providers);return Ro(n)}const pD=new B("");let DB=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=Oo({type:e})}static{this.\u0275inj=Bi({providers:[fD(po(ki.LegacyInterceptors,[{provide:pD,useFactory:dB},{provide:ba,useExisting:pD,multi:!0}]))]})}}return e})();const mu=rd(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:OB}=Array,{getPrototypeOf:RB,prototype:FB,keys:LB}=Object;function MD(e){if(1===e.length){const n=e[0];if(OB(n))return{args:n,keys:null};if(function VB(e){return e&&"object"==typeof e&&RB(e)===FB}(n)){const t=LB(n);return{args:t.map(i=>n[i]),keys:t}}}return{args:e,keys:null}}const{isArray:BB}=Array;function wD(e){return ce(n=>function jB(e,n){return BB(n)?e(...n):e(n)}(e,n))}function DD(e,n){return e.reduce((t,i,o)=>(t[i]=n[o],t),{})}function SD(...e){const n=uu(e),t=O0(e),{args:i,keys:o}=MD(e);if(0===i.length)return ht([],n);const r=new Ge(function UB(e,n,t=Vi){return i=>{ID(n,()=>{const{length:o}=e,r=new Array(o);let s=o,a=o;for(let c=0;c<o;c++)ID(n,()=>{const d=ht(e[c],n);let f=!1;d.subscribe(Qe(i,g=>{r[c]=g,f||(f=!0,a--),a||i.next(t(r.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,n,o?s=>DD(o,s):Vi));return t?r.pipe(wD(t)):r}function ID(e,n,t){e?si(t,e,n):n()}function Sg(...e){return function HB(){return function Dg(e=1/0){return Nt(Vi,e)}(1)}()(ht(e,uu(e)))}function TD(e){return new Ge(n=>{Bn(e()).subscribe(n)})}function _u(e,n){const t=Ne(e)?e:()=>e,i=o=>o.error(t());return new Ge(n?o=>n.schedule(i,0,o):i)}const Un=new Ge(e=>e.complete());function Ig(){return at((e,n)=>{let t=null;e._refCount++;const i=Qe(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const o=e._connection,r=t;t=null,o&&(!r||o===r)&&o.unsubscribe(),n.unsubscribe()});e.subscribe(i),i.closed||(t=e.connect())})}class ED extends Ge{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Vm(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Ct;const t=this.getSubject();n.add(this.source.subscribe(Qe(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Ct.EMPTY)}return n}refCount(){return Ig()(this)}}function Fr(e){return e<=0?()=>Un:at((n,t)=>{let i=0;n.subscribe(Qe(t,o=>{++i<=e&&(t.next(o),e<=i&&t.complete())}))})}function vu(e){return at((n,t)=>{let i=!1;n.subscribe(Qe(t,o=>{i=!0,t.next(o)},()=>{i||t.next(e),t.complete()}))})}function ND(e=zB){return at((n,t)=>{let i=!1;n.subscribe(Qe(t,o=>{i=!0,t.next(o)},()=>i?t.complete():t.error(e())))})}function zB(){return new mu}function go(e,n){const t=arguments.length>=2;return i=>i.pipe(e?Ei((o,r)=>e(o,r,i)):Vi,Fr(1),t?vu(n):ND(()=>new mu))}function xt(e,n,t){const i=Ne(e)||n||t?{next:e,error:n,complete:t}:e;return i?at((o,r)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;o.subscribe(Qe(r,c=>{var d;null===(d=i.next)||void 0===d||d.call(i,c),r.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),r.complete()},c=>{var d;a=!1,null===(d=i.error)||void 0===d||d.call(i,c),r.error(c)},()=>{var c,d;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(d=i.finalize)||void 0===d||d.call(i)}))}):Vi}function mo(e){return at((n,t)=>{let r,i=null,o=!1;i=n.subscribe(Qe(t,void 0,void 0,s=>{r=Bn(e(s,mo(e)(n))),i?(i.unsubscribe(),i=null,r.subscribe(t)):o=!0})),o&&(i.unsubscribe(),i=null,r.subscribe(t))})}function Tg(e){return e<=0?()=>Un:at((n,t)=>{let i=[];n.subscribe(Qe(t,o=>{i.push(o),e<i.length&&i.shift()},()=>{for(const o of i)t.next(o);t.complete()},void 0,()=>{i=null}))})}const ne="primary",Ma=Symbol("RouteTitle");class YB{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Lr(e){return new YB(e)}function JB(e,n,t){const i=t.path.split("/");if(i.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||i.length<e.length))return null;const o={};for(let r=0;r<i.length;r++){const s=i[r],a=e[r];if(":"===s[0])o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:o}}function Hn(e,n){const t=e?Eg(e):void 0,i=n?Eg(n):void 0;if(!t||!i||t.length!=i.length)return!1;let o;for(let r=0;r<t.length;r++)if(o=t[r],!xD(e[o],n[o]))return!1;return!0}function Eg(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function xD(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),i=[...n].sort();return t.every((o,r)=>i[r]===o)}return e===n}function kD(e){return e.length>0?e[e.length-1]:null}function Pi(e){return function AB(e){return!!e&&(e instanceof Ge||Ne(e.lift)&&Ne(e.subscribe))}(e)?e:sa(e)?ht(Promise.resolve(e)):X(e)}const ej={exact:function OD(e,n,t){if(!vo(e.segments,n.segments)||!yu(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!e.children[i]||!OD(e.children[i],n.children[i],t))return!1;return!0},subset:RD},PD={exact:function tj(e,n){return Hn(e,n)},subset:function nj(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>xD(e[t],n[t]))},ignored:()=>!0};function AD(e,n,t){return ej[t.paths](e.root,n.root,t.matrixParams)&&PD[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function RD(e,n,t){return FD(e,n,n.segments,t)}function FD(e,n,t,i){if(e.segments.length>t.length){const o=e.segments.slice(0,t.length);return!(!vo(o,t)||n.hasChildren()||!yu(o,t,i))}if(e.segments.length===t.length){if(!vo(e.segments,t)||!yu(e.segments,t,i))return!1;for(const o in n.children)if(!e.children[o]||!RD(e.children[o],n.children[o],i))return!1;return!0}{const o=t.slice(0,e.segments.length),r=t.slice(e.segments.length);return!!(vo(e.segments,o)&&yu(e.segments,o,i)&&e.children[ne])&&FD(e.children[ne],n,r,i)}}function yu(e,n,t){return n.every((i,o)=>PD[t](e[o].parameters,i.parameters))}class _o{constructor(n=new be([],{}),t={},i=null){this.root=n,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Lr(this.queryParams),this._queryParamMap}toString(){return rj.serialize(this)}}class be{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bu(this)}}class wa{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=Lr(this.parameters),this._parameterMap}toString(){return BD(this)}}function vo(e,n){return e.length===n.length&&e.every((t,i)=>t.path===n[i].path)}let Vr=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>new Cu,providedIn:"root"})}}return e})();class Cu{parse(n){const t=new mj(n);return new _o(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${Da(n.root,!0)}`,i=function cj(e){const n=Object.entries(e).map(([t,i])=>Array.isArray(i)?i.map(o=>`${Mu(t)}=${Mu(o)}`).join("&"):`${Mu(t)}=${Mu(i)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${i}${"string"==typeof n.fragment?`#${function sj(e){return encodeURI(e)}(n.fragment)}`:""}`}}const rj=new Cu;function bu(e){return e.segments.map(n=>BD(n)).join("/")}function Da(e,n){if(!e.hasChildren())return bu(e);if(n){const t=e.children[ne]?Da(e.children[ne],!1):"",i=[];return Object.entries(e.children).forEach(([o,r])=>{o!==ne&&i.push(`${o}:${Da(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function oj(e,n){let t=[];return Object.entries(e.children).forEach(([i,o])=>{i===ne&&(t=t.concat(n(o,i)))}),Object.entries(e.children).forEach(([i,o])=>{i!==ne&&(t=t.concat(n(o,i)))}),t}(e,(i,o)=>o===ne?[Da(e.children[ne],!1)]:[`${o}:${Da(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[ne]?`${bu(e)}/${t[0]}`:`${bu(e)}/(${t.join("//")})`}}function LD(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mu(e){return LD(e).replace(/%3B/gi,";")}function Ng(e){return LD(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wu(e){return decodeURIComponent(e)}function VD(e){return wu(e.replace(/\+/g,"%20"))}function BD(e){return`${Ng(e.path)}${function aj(e){return Object.entries(e).map(([n,t])=>`;${Ng(n)}=${Ng(t)}`).join("")}(e.parameters)}`}const lj=/^[^\/()?;#]+/;function xg(e){const n=e.match(lj);return n?n[0]:""}const uj=/^[^\/()?;=#]+/,hj=/^[^=?&#]+/,pj=/^[^&#]+/;class mj{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(i[ne]=new be(n,t)),i}parseSegment(){const n=xg(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new R(4009,!1);return this.capture(n),new wa(wu(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=function dj(e){const n=e.match(uj);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=xg(this.remaining);o&&(i=o,this.capture(i))}n[wu(t)]=wu(i)}parseQueryParam(n){const t=function fj(e){const n=e.match(hj);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=function gj(e){const n=e.match(pj);return n?n[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const o=VD(t),r=VD(i);if(n.hasOwnProperty(o)){let s=n[o];Array.isArray(s)||(s=[s],n[o]=s),s.push(r)}else n[o]=r}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=xg(this.remaining),o=this.remaining[i.length];if("/"!==o&&")"!==o&&";"!==o)throw new R(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):n&&(r=ne);const s=this.parseChildren();t[r]=1===Object.keys(s).length?s[ne]:new be([],s),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new R(4011,!1)}}function jD(e){return e.segments.length>0?new be([],{[ne]:e}):e}function UD(e){const n={};for(const[i,o]of Object.entries(e.children)){const r=UD(o);if(i===ne&&0===r.segments.length&&r.hasChildren())for(const[s,a]of Object.entries(r.children))n[s]=a;else(r.segments.length>0||r.hasChildren())&&(n[i]=r)}return function _j(e){if(1===e.numberOfChildren&&e.children[ne]){const n=e.children[ne];return new be(e.segments.concat(n.segments),n.children)}return e}(new be(e.segments,n))}function yo(e){return e instanceof _o}function HD(e){let n;const o=jD(function t(r){const s={};for(const c of r.children){const d=t(c);s[c.outlet]=d}const a=new be(r.url,s);return r===e&&(n=a),a}(e.root));return n??o}function GD(e,n,t,i){let o=e;for(;o.parent;)o=o.parent;if(0===n.length)return kg(o,o,o,t,i);const r=function yj(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new zD(!0,0,e);let n=0,t=!1;const i=e.reduce((o,r,s)=>{if("object"==typeof r&&null!=r){if(r.outlets){const a={};return Object.entries(r.outlets).forEach(([c,d])=>{a[c]="string"==typeof d?d.split("/"):d}),[...o,{outlets:a}]}if(r.segmentPath)return[...o,r.segmentPath]}return"string"!=typeof r?[...o,r]:0===s?(r.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?n++:""!=a&&o.push(a))}),o):[...o,r]},[]);return new zD(t,n,i)}(n);if(r.toRoot())return kg(o,o,new be([],{}),t,i);const s=function Cj(e,n,t){if(e.isAbsolute)return new Su(n,!0,0);if(!t)return new Su(n,!1,NaN);if(null===t.parent)return new Su(t,!0,0);const i=Du(e.commands[0])?0:1;return function bj(e,n,t){let i=e,o=n,r=t;for(;r>o;){if(r-=o,i=i.parent,!i)throw new R(4005,!1);o=i.segments.length}return new Su(i,!1,o-r)}(t,t.segments.length-1+i,e.numberOfDoubleDots)}(r,o,e),a=s.processChildren?Ia(s.segmentGroup,s.index,r.commands):qD(s.segmentGroup,s.index,r.commands);return kg(o,s.segmentGroup,a,t,i)}function Du(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Sa(e){return"object"==typeof e&&null!=e&&e.outlets}function kg(e,n,t,i,o){let s,r={};i&&Object.entries(i).forEach(([c,d])=>{r[c]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`}),s=e===n?t:$D(e,n,t);const a=jD(UD(s));return new _o(a,r,o)}function $D(e,n,t){const i={};return Object.entries(e.children).forEach(([o,r])=>{i[o]=r===n?t:$D(r,n,t)}),new be(e.segments,i)}class zD{constructor(n,t,i){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=i,n&&i.length>0&&Du(i[0]))throw new R(4003,!1);const o=i.find(Sa);if(o&&o!==kD(i))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Su{constructor(n,t,i){this.segmentGroup=n,this.processChildren=t,this.index=i}}function qD(e,n,t){if(e??=new be([],{}),0===e.segments.length&&e.hasChildren())return Ia(e,n,t);const i=function wj(e,n,t){let i=0,o=n;const r={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(i>=t.length)return r;const s=e.segments[o],a=t[i];if(Sa(a))break;const c=`${a}`,d=i<t.length-1?t[i+1]:null;if(o>0&&void 0===c)break;if(c&&d&&"object"==typeof d&&void 0===d.outlets){if(!QD(c,d,s))return r;i+=2}else{if(!QD(c,{},s))return r;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}(e,n,t),o=t.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const r=new be(e.segments.slice(0,i.pathIndex),{});return r.children[ne]=new be(e.segments.slice(i.pathIndex),e.children),Ia(r,0,o)}return i.match&&0===o.length?new be(e.segments,{}):i.match&&!e.hasChildren()?Pg(e,n,t):i.match?Ia(e,0,o):Pg(e,n,t)}function Ia(e,n,t){if(0===t.length)return new be(e.segments,{});{const i=function Mj(e){return Sa(e[0])?e[0].outlets:{[ne]:e}}(t),o={};if(Object.keys(i).some(r=>r!==ne)&&e.children[ne]&&1===e.numberOfChildren&&0===e.children[ne].segments.length){const r=Ia(e.children[ne],n,t);return new be(e.segments,r.children)}return Object.entries(i).forEach(([r,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(o[r]=qD(e.children[r],n,s))}),Object.entries(e.children).forEach(([r,s])=>{void 0===i[r]&&(o[r]=s)}),new be(e.segments,o)}}function Pg(e,n,t){const i=e.segments.slice(0,n);let o=0;for(;o<t.length;){const r=t[o];if(Sa(r)){const c=Dj(r.outlets);return new be(i,c)}if(0===o&&Du(t[0])){i.push(new wa(e.segments[n].path,WD(t[0]))),o++;continue}const s=Sa(r)?r.outlets[ne]:`${r}`,a=o<t.length-1?t[o+1]:null;s&&a&&Du(a)?(i.push(new wa(s,WD(a))),o+=2):(i.push(new wa(s,{})),o++)}return new be(i,{})}function Dj(e){const n={};return Object.entries(e).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[t]=Pg(new be([],{}),0,i))}),n}function WD(e){const n={};return Object.entries(e).forEach(([t,i])=>n[t]=`${i}`),n}function QD(e,n,t){return e==t.path&&Hn(n,t.parameters)}const Ta="imperative";var le=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(le||{});class Gn{constructor(n,t){this.id=n,this.url=t}}class Ag extends Gn{constructor(n,t,i="imperative",o=null){super(n,t),this.type=le.NavigationStart,this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Co extends Gn{constructor(n,t,i){super(n,t),this.urlAfterRedirects=i,this.type=le.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Yt=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Yt||{}),Og=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Og||{});class bo extends Gn{constructor(n,t,i,o){super(n,t),this.reason=i,this.code=o,this.type=le.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ea extends Gn{constructor(n,t,i,o){super(n,t),this.reason=i,this.code=o,this.type=le.NavigationSkipped}}class Rg extends Gn{constructor(n,t,i,o){super(n,t),this.error=i,this.target=o,this.type=le.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ZD extends Gn{constructor(n,t,i,o){super(n,t),this.urlAfterRedirects=i,this.state=o,this.type=le.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sj extends Gn{constructor(n,t,i,o){super(n,t),this.urlAfterRedirects=i,this.state=o,this.type=le.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ij extends Gn{constructor(n,t,i,o,r){super(n,t),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=r,this.type=le.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Tj extends Gn{constructor(n,t,i,o){super(n,t),this.urlAfterRedirects=i,this.state=o,this.type=le.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ej extends Gn{constructor(n,t,i,o){super(n,t),this.urlAfterRedirects=i,this.state=o,this.type=le.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nj{constructor(n){this.route=n,this.type=le.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xj{constructor(n){this.route=n,this.type=le.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class kj{constructor(n){this.snapshot=n,this.type=le.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pj{constructor(n){this.snapshot=n,this.type=le.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Aj{constructor(n){this.snapshot=n,this.type=le.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oj{constructor(n){this.snapshot=n,this.type=le.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fg{}class Iu{constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}}function yn(e){return e.outlet||ne}function Na(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class jj{get injector(){return Na(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new xa(this.rootInjector),this.attachRef=null}}let xa=(()=>{class e{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){const o=this.getOrCreateContext(t);o.outlet=i,this.contexts.set(t,o)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new jj(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||e)(Y(Rt))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();class KD{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=Lg(n,this._root);return t?t.children.map(i=>i.value):[]}firstChild(n){const t=Lg(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=Vg(n,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return Vg(n,this._root).map(t=>t.value)}}function Lg(e,n){if(e===n.value)return n;for(const t of n.children){const i=Lg(e,t);if(i)return i}return null}function Vg(e,n){if(e===n.value)return[n];for(const t of n.children){const i=Vg(e,t);if(i.length)return i.unshift(n),i}return[]}class Cn{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function Br(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class YD extends KD{constructor(n,t){super(n),this.snapshot=t,Bg(this,n)}toString(){return this.snapshot.toString()}}function JD(e){const n=function Uj(e){const r=new Eu([],{},{},"",{},ne,e,null,{});return new XD("",new Cn(r,[]))}(e),t=new Ut([new wa("",{})]),i=new Ut({}),o=new Ut({}),r=new Ut({}),s=new Ut(""),a=new jr(t,i,r,s,o,ne,e,n.root);return a.snapshot=n.root,new YD(new Cn(a,[]),n)}class jr{constructor(n,t,i,o,r,s,a,c){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=o,this.dataSubject=r,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ce(d=>d[Ma]))??X(void 0),this.url=n,this.params=t,this.queryParams=i,this.fragment=o,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(n=>Lr(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(n=>Lr(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Tu(e,n,t="emptyOnly"){let i;const{routeConfig:o}=e;return i=null===n||"always"!==t&&""!==o?.path&&(n.component||n.routeConfig?.loadComponent)?{params:{...e.params},data:{...e.data},resolve:{...e.data,...e._resolvedData??{}}}:{params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.data,...o?.data,...e._resolvedData}},o&&tS(o)&&(i.resolve[Ma]=o.title),i}class Eu{get title(){return this.data?.[Ma]}constructor(n,t,i,o,r,s,a,c,d){this.url=n,this.params=t,this.queryParams=i,this.fragment=o,this.data=r,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Lr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Lr(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class XD extends KD{constructor(n,t){super(t),this.url=n,Bg(this,t)}toString(){return eS(this._root)}}function Bg(e,n){n.value._routerState=e,n.children.forEach(t=>Bg(e,t))}function eS(e){const n=e.children.length>0?` { ${e.children.map(eS).join(", ")} } `:"";return`${e.value}${n}`}function jg(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,Hn(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),Hn(n.params,t.params)||e.paramsSubject.next(t.params),function XB(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!Hn(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.urlSubject.next(t.url),Hn(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Ug(e,n){const t=Hn(e.params,n.params)&&function ij(e,n){return vo(e,n)&&e.every((t,i)=>Hn(t.parameters,n[i].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||Ug(e.parent,n.parent))}function tS(e){return"string"==typeof e.title||null===e.title}let Nu=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ne,this.activateEvents=new Re,this.deactivateEvents=new Re,this.attachEvents=new Re,this.detachEvents=new Re,this.parentContexts=F(xa),this.location=F(fn),this.changeDetector=F(ca),this.inputBinder=F(xu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:o}=t.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new R(4013,!1);this._activatedRoute=t;const o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Hg(t,a,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=J({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xt]})}}return e})();class Hg{__ngOutletInjector(n){return new Hg(this.route,this.childContexts,n)}constructor(n,t,i){this.route=n,this.childContexts=t,this.parent=i}get(n,t){return n===jr?this.route:n===xa?this.childContexts:this.parent.get(n,t)}}const xu=new B("");function ka(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=n.value;const o=function Gj(e,n,t){return n.children.map(i=>{for(const o of t.children)if(e.shouldReuseRoute(i.value,o.value.snapshot))return ka(e,i,o);return ka(e,i)})}(e,n,t);return new Cn(i,o)}{if(e.shouldAttach(n.value)){const r=e.retrieve(n.value);if(null!==r){const s=r.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>ka(e,a)),s}}const i=function $j(e){return new jr(new Ut(e.url),new Ut(e.params),new Ut(e.queryParams),new Ut(e.fragment),new Ut(e.data),e.outlet,e.component,e)}(n.value),o=n.children.map(r=>ka(e,r));return new Cn(i,o)}}class Gg{constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}}const iS="ngNavigationCancelingError";function ku(e,n){const{redirectTo:t,navigationBehaviorOptions:i}=yo(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=oS(!1,Yt.Redirect);return o.url=t,o.navigationBehaviorOptions=i,o}function oS(e,n){const t=new Error(`NavigationCancelingError: ${e||""}`);return t[iS]=!0,t.cancellationCode=n,t}function rS(e){return!!e&&e[iS]}class Wj{constructor(n,t,i,o,r){this.routeReuseStrategy=n,this.futureState=t,this.currState=i,this.forwardEvent=o,this.inputBindingEnabled=r}activate(n){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,n),jg(this.futureState.root),this.activateChildRoutes(t,i,n)}deactivateChildRoutes(n,t,i){const o=Br(t);n.children.forEach(r=>{const s=r.value.outlet;this.deactivateRoutes(r,o[s],i),delete o[s]}),Object.values(o).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(n,t,i){const o=n.value,r=t?t.value:null;if(o===r)if(o.component){const s=i.getContext(o.outlet);s&&this.deactivateChildRoutes(n,t,s.children)}else this.deactivateChildRoutes(n,t,i);else r&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const i=t.getContext(n.value.outlet),o=i&&n.value.component?i.children:t,r=Br(n);for(const s of Object.values(r))this.deactivateRouteAndItsChildren(s,o);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,t){const i=t.getContext(n.value.outlet),o=i&&n.value.component?i.children:t,r=Br(n);for(const s of Object.values(r))this.deactivateRouteAndItsChildren(s,o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,t,i){const o=Br(t);n.children.forEach(r=>{this.activateRoutes(r,o[r.value.outlet],i),this.forwardEvent(new Oj(r.value.snapshot))}),n.children.length&&this.forwardEvent(new Pj(n.value.snapshot))}activateRoutes(n,t,i){const o=n.value,r=t?t.value:null;if(jg(o),o===r)if(o.component){const s=i.getOrCreateContext(o.outlet);this.activateChildRoutes(n,t,s.children)}else this.activateChildRoutes(n,t,i);else if(o.component){const s=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),jg(a.route.value),this.activateChildRoutes(n,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(n,null,s.children)}else this.activateChildRoutes(n,null,i)}}class sS{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Pu{constructor(n,t){this.component=n,this.route=t}}function Qj(e,n,t){const i=e._root;return Pa(i,n?n._root:null,t,[i.value])}function Ur(e,n){const t=Symbol(),i=n.get(e,t);return i===t?"function"!=typeof e||function iT(e){return null!==tc(e)}(e)?n.get(e):e:i}function Pa(e,n,t,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const r=Br(n);return e.children.forEach(s=>{(function Kj(e,n,t,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const r=e.value,s=n?n.value:null,a=t?t.getContext(e.value.outlet):null;if(s&&r.routeConfig===s.routeConfig){const c=function Yj(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!vo(e.url,n.url);case"pathParamsOrQueryParamsChange":return!vo(e.url,n.url)||!Hn(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ug(e,n)||!Hn(e.queryParams,n.queryParams);default:return!Ug(e,n)}}(s,r,r.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new sS(i)):(r.data=s.data,r._resolvedData=s._resolvedData),Pa(e,n,r.component?a?a.children:null:t,i,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Pu(a.outlet.component,s))}else s&&Aa(n,a,o),o.canActivateChecks.push(new sS(i)),Pa(e,null,r.component?a?a.children:null:t,i,o)})(s,r[s.value.outlet],t,i.concat([s.value]),o),delete r[s.value.outlet]}),Object.entries(r).forEach(([s,a])=>Aa(a,t.getContext(s),o)),o}function Aa(e,n,t){const i=Br(e),o=e.value;Object.entries(i).forEach(([r,s])=>{Aa(s,o.component?n?n.children.getContext(r):null:n,t)}),t.canDeactivateChecks.push(new Pu(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}function Oa(e){return"function"==typeof e}function aS(e){return e instanceof mu||"EmptyError"===e?.name}const Au=Symbol("INITIAL_VALUE");function Hr(){return jn(e=>SD(e.map(n=>n.pipe(Fr(1),function $B(...e){const n=uu(e);return at((t,i)=>{(n?Sg(e,t,n):Sg(e,t)).subscribe(i)})}(Au)))).pipe(ce(n=>{for(const t of n)if(!0!==t){if(t===Au)return Au;if(!1===t||o8(t))return t}return!0}),Ei(n=>n!==Au),Fr(1)))}function o8(e){return yo(e)||e instanceof Gg}function cS(e){return function WI(...e){return Rm(e)}(xt(n=>{if("boolean"!=typeof n)throw ku(0,n)}),ce(n=>!0===n))}class $g{constructor(n){this.segmentGroup=n||null}}class Ou extends Error{constructor(n){super(),this.urlTree=n}}function Gr(e){return _u(new $g(e))}class _8{constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let i=[],o=t.root;for(;;){if(i=i.concat(o.segments),0===o.numberOfChildren)return X(i);if(o.numberOfChildren>1||!o.children[ne])return _u(new R(4e3,!1));o=o.children[ne]}}applyRedirectCommands(n,t,i,o,r){if("string"!=typeof t){const a=t,{queryParams:c,fragment:d,routeConfig:f,url:g,outlet:_,params:v,data:b,title:T}=o,E=Qn(r,()=>a({params:v,data:b,queryParams:c,fragment:d,routeConfig:f,url:g,outlet:_,title:T}));if(E instanceof _o)throw new Ou(E);t=E}const s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,i);if("/"===t[0])throw new Ou(s);return s}applyRedirectCreateUrlTree(n,t,i,o){const r=this.createSegmentGroup(n,t.root,i,o);return new _o(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const i={};return Object.entries(n).forEach(([o,r])=>{if("string"==typeof r&&":"===r[0]){const a=r.substring(1);i[o]=t[a]}else i[o]=r}),i}createSegmentGroup(n,t,i,o){const r=this.createSegments(n,t.segments,i,o);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(n,c,i,o)}),new be(r,s)}createSegments(n,t,i,o){return t.map(r=>":"===r.path[0]?this.findPosParam(n,r,o):this.findOrReturn(r,i))}findPosParam(n,t,i){const o=i[t.path.substring(1)];if(!o)throw new R(4001,!1);return o}findOrReturn(n,t){let i=0;for(const o of t){if(o.path===n.path)return t.splice(i),o;i++}return n}}const zg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function v8(e,n,t,i,o){const r=lS(e,n,t);return r.matched?(i=function Rj(e,n){return e.providers&&!e._injector&&(e._injector=Wf(e.providers,n,`Route: ${e.path}`)),e._injector??n}(n,i),function p8(e,n,t,i){const o=n.canMatch;return o&&0!==o.length?X(o.map(s=>{const a=Ur(s,e);return Pi(function i8(e){return e&&Oa(e.canMatch)}(a)?a.canMatch(n,t):Qn(e,()=>a(n,t)))})).pipe(Hr(),cS()):X(!0)}(i,n,t).pipe(ce(s=>!0===s?r:{...zg}))):X(r)}function lS(e,n,t){if("**"===n.path)return function y8(e){return{matched:!0,parameters:e.length>0?kD(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...zg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(n.matcher||JB)(t,e,n);if(!o)return{...zg};const r={};Object.entries(o.posParams??{}).forEach(([a,c])=>{r[a]=c.path});const s=o.consumed.length>0?{...r,...o.consumed[o.consumed.length-1].parameters}:r;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function uS(e,n,t,i){return t.length>0&&function M8(e,n,t){return t.some(i=>Ru(e,n,i)&&yn(i)!==ne)}(e,t,i)?{segmentGroup:new be(n,b8(i,new be(t,e.children))),slicedSegments:[]}:0===t.length&&function w8(e,n,t){return t.some(i=>Ru(e,n,i))}(e,t,i)?{segmentGroup:new be(e.segments,C8(e,t,i,e.children)),slicedSegments:t}:{segmentGroup:new be(e.segments,e.children),slicedSegments:t}}function C8(e,n,t,i){const o={};for(const r of t)if(Ru(e,n,r)&&!i[yn(r)]){const s=new be([],{});o[yn(r)]=s}return{...i,...o}}function b8(e,n){const t={};t[ne]=n;for(const i of e)if(""===i.path&&yn(i)!==ne){const o=new be([],{});t[yn(i)]=o}return t}function Ru(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}class S8{}class E8{constructor(n,t,i,o,r,s,a){this.injector=n,this.configLoader=t,this.rootComponentType=i,this.config=o,this.urlTree=r,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new _8(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new R(4002,`'${n.segmentGroup}'`)}recognize(){const n=uS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(ce(({children:t,rootSnapshot:i})=>{const o=new Cn(i,t),r=new XD("",o),s=function vj(e,n,t=null,i=null){return GD(HD(e),n,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(s),{state:r,tree:s}}))}match(n){const t=new Eu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),ne,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,ne,t).pipe(ce(i=>({children:i,rootSnapshot:t})),mo(i=>{if(i instanceof Ou)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof $g?this.noMatchError(i):i}))}processSegmentGroup(n,t,i,o,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,t,i,r):this.processSegment(n,t,i,i.segments,o,!0,r).pipe(ce(s=>s instanceof Cn?[s]:[]))}processChildren(n,t,i,o){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return ht(r).pipe(va(s=>{const a=i.children[s],c=function Bj(e,n){const t=e.filter(i=>yn(i)===n);return t.push(...e.filter(i=>yn(i)!==n)),t}(t,s);return this.processSegmentGroup(n,c,a,s,o)}),function WB(e,n){return at(function qB(e,n,t,i,o){return(r,s)=>{let a=t,c=n,d=0;r.subscribe(Qe(s,f=>{const g=d++;c=a?e(c,f,g):(a=!0,f),i&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}(e,n,arguments.length>=2,!0))}((s,a)=>(s.push(...a),s)),vu(null),function QB(e,n){const t=arguments.length>=2;return i=>i.pipe(e?Ei((o,r)=>e(o,r,i)):Vi,Tg(1),t?vu(n):ND(()=>new mu))}(),Nt(s=>{if(null===s)return Gr(i);const a=dS(s);return function N8(e){e.sort((n,t)=>n.value.outlet===ne?-1:t.value.outlet===ne?1:n.value.outlet.localeCompare(t.value.outlet))}(a),X(a)}))}processSegment(n,t,i,o,r,s,a){return ht(t).pipe(va(c=>this.processSegmentAgainstRoute(c._injector??n,t,c,i,o,r,s,a).pipe(mo(d=>{if(d instanceof $g)return X(null);throw d}))),go(c=>!!c),mo(c=>{if(aS(c))return function D8(e,n,t){return 0===n.length&&!e.children[t]}(i,o,r)?X(new S8):Gr(i);throw c}))}processSegmentAgainstRoute(n,t,i,o,r,s,a,c){return yn(i)===s||s!==ne&&Ru(o,r,i)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,o,i,r,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(n,o,t,i,r,s,c):Gr(o):Gr(o)}expandSegmentAgainstRouteUsingRedirect(n,t,i,o,r,s,a){const{matched:c,parameters:d,consumedSegments:f,positionalParamSegments:g,remainingSegments:_}=lS(t,o,r);if(!c)return Gr(t);"string"==typeof o.redirectTo&&"/"===o.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const v=new Eu(r,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hS(o),yn(o),o.component??o._loadedComponent??null,o,fS(o)),b=Tu(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);const T=this.applyRedirects.applyRedirectCommands(f,o.redirectTo,g,v,n);return this.applyRedirects.lineralizeSegments(o,T).pipe(Nt(E=>this.processSegment(n,i,t,E.concat(_),s,!1,a)))}matchSegmentAgainstRoute(n,t,i,o,r,s){const a=v8(t,i,o,n);return"**"===i.path&&(t.children={}),a.pipe(jn(c=>c.matched?this.getChildConfig(n=i._injector??n,i,o).pipe(jn(({routes:d})=>{const f=i._loadedInjector??n,{parameters:g,consumedSegments:_,remainingSegments:v}=c,b=new Eu(_,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hS(i),yn(i),i.component??i._loadedComponent??null,i,fS(i)),T=Tu(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(T.params),b.data=Object.freeze(T.data);const{segmentGroup:E,slicedSegments:P}=uS(t,_,v,d);if(0===P.length&&E.hasChildren())return this.processChildren(f,d,E,b).pipe(ce(j=>new Cn(b,j)));if(0===d.length&&0===P.length)return X(new Cn(b,[]));const x=yn(i)===r;return this.processSegment(f,d,E,P,x?ne:r,!0,b).pipe(ce(j=>new Cn(b,j instanceof Cn?[j]:[])))})):Gr(t)))}getChildConfig(n,t,i){return t.children?X({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?X({routes:t._loadedRoutes,injector:t._loadedInjector}):function f8(e,n,t,i){const o=n.canLoad;return void 0===o||0===o.length?X(!0):X(o.map(s=>{const a=Ur(s,e);return Pi(function Xj(e){return e&&Oa(e.canLoad)}(a)?a.canLoad(n,t):Qn(e,()=>a(n,t)))})).pipe(Hr(),cS())}(n,t,i).pipe(Nt(o=>o?this.configLoader.loadChildren(n,t).pipe(xt(r=>{t._loadedRoutes=r.routes,t._loadedInjector=r.injector})):function m8(){return _u(oS(!1,Yt.GuardRejected))}())):X({routes:[],injector:n})}}function x8(e){const n=e.value.routeConfig;return n&&""===n.path}function dS(e){const n=[],t=new Set;for(const i of e){if(!x8(i)){n.push(i);continue}const o=n.find(r=>i.value.routeConfig===r.value.routeConfig);void 0!==o?(o.children.push(...i.children),t.add(o)):n.push(i)}for(const i of t){const o=dS(i.children);n.push(new Cn(i.value,o))}return n.filter(i=>!t.has(i))}function hS(e){return e.data||{}}function fS(e){return e.resolve||{}}function pS(e){const n=e.children.map(t=>pS(t)).flat();return[e,...n]}function qg(e){return jn(n=>{const t=e(n);return t?ht(t).pipe(ce(()=>n)):X(n)})}let gS=(()=>{class e{buildTitle(t){let i,o=t.root;for(;void 0!==o;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(r=>r.outlet===ne);return i}getResolvedTitleForRoute(t){return t.data[Ma]}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>F(F8),providedIn:"root"})}}return e})(),F8=(()=>{class e extends gS{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||e)(Y(oV))}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Ra=new B("",{providedIn:"root",factory:()=>({})});let mS=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["ng-component"]],standalone:!0,features:[Fe],decls:1,vars:0,template:function(i,o){1&i&&W(0,"router-outlet")},dependencies:[Nu],encapsulation:2})}}return e})();function Wg(e){const n=e.children&&e.children.map(Wg),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==ne&&(t.component=mS),t}const Fu=new B("");let _S=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(x3)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return X(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Pi(t.loadComponent()).pipe(ce(vS),xt(r=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=r}),ya(()=>{this.componentLoaders.delete(t)})),o=new ED(i,()=>new jt).pipe(Ig());return this.componentLoaders.set(t,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return X({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const r=function L8(e,n,t,i){return Pi(e.loadChildren()).pipe(ce(vS),Nt(o=>o instanceof fb||Array.isArray(o)?X(o):ht(n.compileModuleAsync(o))),ce(o=>{i&&i(e);let r,s,a=!1;return Array.isArray(o)?(s=o,!0):(r=o.create(t).injector,s=r.get(Fu,[],{optional:!0,self:!0}).flat()),{routes:s.map(Wg),injector:r}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(ya(()=>{this.childrenLoaders.delete(i)})),s=new ED(r,()=>new jt).pipe(Ig());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function vS(e){return function V8(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let Qg=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>F(B8),providedIn:"root"})}}return e})(),B8=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const yS=new B(""),bS=new B("");let Lu=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new jt,this.transitionAbortSubject=new jt,this.configLoader=F(_S),this.environmentInjector=F(Rt),this.urlSerializer=F(Vr),this.rootContexts=F(xa),this.location=F(fa),this.inputBindingEnabled=null!==F(xu,{optional:!0}),this.titleStrategy=F(gS),this.options=F(Ra,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(Qg),this.createViewTransition=F(yS,{optional:!0}),this.navigationErrorHandler=F(bS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new xj(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new Nj(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,o){return this.transitions=new Ut({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ta,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ei(r=>0!==r.id),ce(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),jn(r=>{let s=!1,a=!1;return X(r).pipe(jn(c=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Yt.SupersededByNewNavigation),Un;this.currentTransition=r,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:"string"==typeof c.extras.browserUrl?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!d&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new Ea(c.id,this.urlSerializer.serialize(c.rawUrl),g,Og.IgnoredSameUrlNavigation)),c.resolve(!1),Un}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return X(c).pipe(jn(g=>{const _=this.transitions?.getValue();return this.events.next(new Ag(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?Un:Promise.resolve(g)}),function k8(e,n,t,i,o,r){return Nt(s=>function I8(e,n,t,i,o,r,s="emptyOnly"){return new E8(e,n,t,i,o,s,r).recognize()}(e,n,t,i,s.extractedUrl,o,r).pipe(ce(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),xt(g=>{r.targetSnapshot=g.targetSnapshot,r.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const _=new ZD(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:g,extractedUrl:_,source:v,restoredState:b,extras:T}=c,E=new Ag(g,this.urlSerializer.serialize(_),v,b);this.events.next(E);const P=JD(this.rootComponentType).snapshot;return this.currentTransition=r={...c,targetSnapshot:P,urlAfterRedirects:_,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=_,X(r)}{const g="";return this.events.next(new Ea(c.id,this.urlSerializer.serialize(c.extractedUrl),g,Og.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Un}}),xt(c=>{const d=new Sj(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),ce(c=>(this.currentTransition=r={...c,guards:Qj(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},r)),function r8(e,n){return Nt(t=>{const{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:r,canDeactivateChecks:s}}=t;return 0===s.length&&0===r.length?X({...t,guardsResult:!0}):function s8(e,n,t,i){return ht(e).pipe(Nt(o=>function h8(e,n,t,i,o){const r=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return r&&0!==r.length?X(r.map(a=>{const c=Na(n)??o,d=Ur(a,c);return Pi(function n8(e){return e&&Oa(e.canDeactivate)}(d)?d.canDeactivate(e,n,t,i):Qn(c,()=>d(e,n,t,i))).pipe(go())})).pipe(Hr()):X(!0)}(o.component,o.route,t,n,i)),go(o=>!0!==o,!0))}(s,i,o,e).pipe(Nt(a=>a&&function Jj(e){return"boolean"==typeof e}(a)?function a8(e,n,t,i){return ht(n).pipe(va(o=>Sg(function l8(e,n){return null!==e&&n&&n(new kj(e)),X(!0)}(o.route.parent,i),function c8(e,n){return null!==e&&n&&n(new Aj(e)),X(!0)}(o.route,i),function d8(e,n,t){const i=n[n.length-1],r=n.slice(0,n.length-1).reverse().map(s=>function Zj(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(s)).filter(s=>null!==s).map(s=>TD(()=>X(s.guards.map(c=>{const d=Na(s.node)??t,f=Ur(c,d);return Pi(function t8(e){return e&&Oa(e.canActivateChild)}(f)?f.canActivateChild(i,e):Qn(d,()=>f(i,e))).pipe(go())})).pipe(Hr())));return X(r).pipe(Hr())}(e,o.path,t),function u8(e,n,t){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return X(!0);const o=i.map(r=>TD(()=>{const s=Na(n)??t,a=Ur(r,s);return Pi(function e8(e){return e&&Oa(e.canActivate)}(a)?a.canActivate(n,e):Qn(s,()=>a(n,e))).pipe(go())}));return X(o).pipe(Hr())}(e,o.route,t))),go(o=>!0!==o,!0))}(i,r,e,n):X(a)),ce(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),xt(c=>{if(r.guardsResult=c.guardsResult,c.guardsResult&&"boolean"!=typeof c.guardsResult)throw ku(0,c.guardsResult);const d=new Ij(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),Ei(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",Yt.GuardRejected),!1)),qg(c=>{if(c.guards.canActivateChecks.length)return X(c).pipe(xt(d=>{const f=new Tj(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),jn(d=>{let f=!1;return X(d).pipe(function P8(e,n){return Nt(t=>{const{targetSnapshot:i,guards:{canActivateChecks:o}}=t;if(!o.length)return X(t);const r=new Set(o.map(c=>c.route)),s=new Set;for(const c of r)if(!s.has(c))for(const d of pS(c))s.add(d);let a=0;return ht(s).pipe(va(c=>r.has(c)?function A8(e,n,t,i){const o=e.routeConfig,r=e._resolve;return void 0!==o?.title&&!tS(o)&&(r[Ma]=o.title),function O8(e,n,t,i){const o=Eg(e);if(0===o.length)return X({});const r={};return ht(o).pipe(Nt(s=>function R8(e,n,t,i){const o=Na(n)??i,r=Ur(e,o);return Pi(r.resolve?r.resolve(n,t):Qn(o,()=>r(n,t)))}(e[s],n,t,i).pipe(go(),xt(a=>{if(a instanceof Gg)throw ku(new Cu,a);r[s]=a}))),Tg(1),function ZB(e){return ce(()=>e)}(r),mo(s=>aS(s)?Un:_u(s)))}(r,e,n,i).pipe(ce(s=>(e._resolvedData=s,e.data=Tu(e,e.parent,t).resolve,null)))}(c,i,e,n):(c.data=Tu(c,c.parent,e).resolve,X(void 0))),xt(()=>a++),Tg(1),Nt(c=>a===s.size?X(t):Un))})}(this.paramsInheritanceStrategy,this.environmentInjector),xt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",Yt.NoDataFromResolver)}}))}),xt(d=>{const f=new Ej(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),qg(c=>{const d=f=>{const g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(xt(_=>{f.component=_}),ce(()=>{})));for(const _ of f.children)g.push(...d(_));return g};return SD(d(c.targetSnapshot.root)).pipe(vu(null),Fr(1))}),qg(()=>this.afterPreactivation()),jn(()=>{const{currentSnapshot:c,targetSnapshot:d}=r,f=this.createViewTransition?.(this.environmentInjector,c.root,d.root);return f?ht(f).pipe(ce(()=>r)):X(r)}),ce(c=>{const d=function Hj(e,n,t){const i=ka(e,n._root,t?t._root:void 0);return new YD(i,n)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=r={...c,targetRouterState:d},this.currentNavigation.targetRouterState=d,r}),xt(()=>{this.events.next(new Fg)}),((e,n,t,i)=>ce(o=>(new Wj(n,o.targetRouterState,o.currentRouterState,t,i).activate(e),o)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Fr(1),xt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Co(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),function KB(e){return at((n,t)=>{Bn(e).subscribe(Qe(t,()=>t.complete(),cd)),!t.closed&&n.subscribe(t)})}(this.transitionAbortSubject.pipe(xt(c=>{throw c}))),ya(()=>{!s&&!a&&this.cancelNavigationTransition(r,"",Yt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),mo(c=>{if(a=!0,rS(c))this.events.next(new bo(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode)),function zj(e){return rS(e)&&yo(e.url)}(c)?this.events.next(new Iu(c.url,c.navigationBehaviorOptions)):r.resolve(!1);else{const d=new Rg(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);try{const f=Qn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof Gg){const{message:g,cancellationCode:_}=ku(0,f);this.events.next(new bo(r.id,this.urlSerializer.serialize(r.extractedUrl),g,_)),this.events.next(new Iu(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);const g=t.errorHandler(c);r.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(f)}}return Un}))}))}cancelNavigationTransition(t,i,o){const r=new bo(t.id,this.urlSerializer.serialize(t.extractedUrl),i,o);this.events.next(r),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function H8(e){return e!==Ta}let G8=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>F(z8),providedIn:"root"})}}return e})();class $8{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}let z8=(()=>{class e extends $8{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=it(e)))(o||e)}})()}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),MS=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:()=>F(q8),providedIn:"root"})}}return e})(),q8=(()=>{class e extends MS{constructor(){super(...arguments),this.location=F(fa),this.urlSerializer=F(Vr),this.options=F(Ra,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(Qg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new _o,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=JD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{"popstate"===i.type&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Ag)this.stateMemento=this.createStateMemento();else if(t instanceof Ea)this.rawUrlTree=i.initialUrl;else if(t instanceof ZD){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else t instanceof Fg?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof bo&&(t.code===Yt.GuardRejected||t.code===Yt.NoDataFromResolver)?this.restoreHistory(i):t instanceof Rg?this.restoreHistory(i,!0):t instanceof Co&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){const o=t instanceof _o?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const r={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(o,"",r)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-this.browserPageId;0!==r?this.location.historyGo(r):this.currentUrlTree===t.finalUrl&&0===r&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=it(e)))(o||e)}})()}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Fa=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Fa||{});function W8(e){throw e}const Q8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ai=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(HM),this.stateManager=F(MS),this.options=F(Ra,{optional:!0})||{},this.pendingTasks=F(Xn),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(Lu),this.urlSerializer=F(Vr),this.location=F(fa),this.urlHandlingStrategy=F(Qg),this._events=new jt,this.errorHandler=this.options.errorHandler||W8,this.navigated=!1,this.routeReuseStrategy=F(G8),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(Fu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(xu,{optional:!0}),this.eventsSubscription=new Ct,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const o=this.navigationTransitions.currentTransition,r=this.navigationTransitions.currentNavigation;if(null!==o&&null!==r)if(this.stateManager.handleRouterEvent(i,r),i instanceof bo&&i.code!==Yt.Redirect&&i.code!==Yt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Co)this.navigated=!0;else if(i instanceof Iu){const s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||"eager"===this.urlUpdateStrategy||H8(o.source),...s};this.scheduleNavigation(a,Ta,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}(function Y8(e){return!(e instanceof Fg||e instanceof Iu)})(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ta,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,o){const r={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(r.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,s,r)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Wg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:o,queryParams:r,fragment:s,queryParamsHandling:a,preserveFragment:c}=i,d=c?this.currentUrlTree.fragment:s;let g,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f={...this.currentUrlTree.queryParams,...r};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=r||null}null!==f&&(f=this.removeEmptyProps(f));try{g=HD(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),g=this.currentUrlTree.root}return GD(g,t,f,d??null)}navigateByUrl(t,i={skipLocationChange:!1}){const o=yo(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(r,Ta,null,i)}navigate(t,i={skipLocationChange:!1}){return function K8(e){for(let n=0;n<e.length;n++)if(null==e[n])throw new R(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let o;if(o=!0===i?{...Q8}:!1===i?{...Z8}:i,yo(t))return AD(this.currentUrlTree,t,o);const r=this.parseUrl(t);return AD(this.currentUrlTree,r,o)}removeEmptyProps(t){return Object.entries(t).reduce((i,[o,r])=>(null!=r&&(i[o]=r),i),{})}scheduleNavigation(t,i,o,r,s){if(this.disposed)return Promise.resolve(!1);let a,c,d;s?(a=s.resolve,c=s.reject,d=s.promise):d=new Promise((g,_)=>{a=g,c=_});const f=this.pendingTasks.add();return function wS(e,n){e.events.pipe(Ei(t=>t instanceof Co||t instanceof bo||t instanceof Rg||t instanceof Ea),ce(t=>t instanceof Co||t instanceof Ea?Fa.COMPLETE:t instanceof bo&&(t.code===Yt.Redirect||t.code===Yt.SupersededByNewNavigation)?Fa.REDIRECTING:Fa.FAILED),Ei(t=>t!==Fa.REDIRECTING),Fr(1)).subscribe(()=>{n()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:r,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Vu=(()=>{class e{constructor(t,i,o,r,s,a){this.router=t,this.route=i,this.tabIndexAttribute=o,this.renderer=r,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new jt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Co&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null==t?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=yo(t)||Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,o,r,s){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==t||i||o||r||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const i=null===this.href?null:function fy(e,n,t){return function g2(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?hy:zh}(n,t)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){const o=this.renderer,r=this.el.nativeElement;null!==i?o.setAttribute(r,t,i):o.removeAttribute(r,t)}get urlTree(){return null===this.routerLinkInput?null:yo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||e)(O(ai),O(jr),function ds(e){return function BE(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const i=t.length;let o=0;for(;o<i;){const r=t[o];if(n_(r))break;if(0===r)o+=2;else if("number"==typeof r)for(o++;o<i&&"string"==typeof t[o];)o++;else{if(r===n)return t[o+1];o+=2}}}return null}(ve(),e)}("tabindex"),O(ii),O(qt),O(Wl))}}static{this.\u0275dir=J({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){1&i&&I("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&i&&On("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Pr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Pr],replaceUrl:[2,"replaceUrl","replaceUrl",Pr],routerLink:"routerLink"},standalone:!0,features:[hb,Xt]})}}return e})();const Zg=new B("");function SS(e){return e.routerState.root}function IS(){const e=F(dt);return n=>{const t=e.get(Ln);if(n!==t.components[0])return;const i=e.get(ai),o=e.get(TS);1===e.get(Kg)&&i.initialNavigation(),e.get(ES,null,ae.Optional)?.setUpPreloading(),e.get(Zg,null,ae.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const TS=new B("",{factory:()=>new jt}),Kg=new B("",{providedIn:"root",factory:()=>1}),ES=new B("");let s5=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-root"]],standalone:!0,features:[Fe],decls:1,vars:0,template:function(i,o){1&i&&W(0,"router-outlet")},dependencies:[Nu]})}}return e})();function Yg(...e){const n=O0(e),{args:t,keys:i}=MD(e),o=new Ge(r=>{const{length:s}=t;if(!s)return void r.complete();const a=new Array(s);let c=s,d=s;for(let f=0;f<s;f++){let g=!1;Bn(t[f]).subscribe(Qe(r,_=>{g||(g=!0,d--),a[f]=_},()=>c--,void 0,()=>{(!c||!g)&&(d||r.next(i?DD(i,a):a),r.complete())}))}});return n?o.pipe(wD(n)):o}let xS=(()=>{class e{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||e)(O(ii),O(qt))}}static{this.\u0275dir=J({type:e})}}return e})(),Mo=(()=>{class e extends xS{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=it(e)))(o||e)}})()}static{this.\u0275dir=J({type:e,features:[Ce]})}}return e})();const zn=new B(""),a5={provide:zn,useExisting:De(()=>La),multi:!0};let La=(()=>{class e extends Mo{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=it(e)))(o||e)}})()}static{this.\u0275dir=J({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){1&i&&I("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},features:[Ae([a5]),Ce]})}}return e})();const c5={provide:zn,useExisting:De(()=>rt),multi:!0},u5=new B("");let rt=(()=>{class e extends xS{constructor(t,i,o){super(t,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function l5(){const e=Ii()?Ii().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||e)(O(ii),O(qt),O(u5,8))}}static{this.\u0275dir=J({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){1&i&&I("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[Ae([c5]),Ce]})}}return e})();function Ai(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}const vt=new B(""),Oi=new B("");function OS(e){return Ai(e.value)?{required:!0}:null}function Bu(e){return null}function jS(e){return null!=e}function US(e){return sa(e)?ht(e):e}function HS(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function GS(e,n){return n.map(t=>t(e))}function $S(e){return e.map(n=>function h5(e){return!e.validate}(n)?n:t=>n.validate(t))}function Jg(e){return null!=e?function zS(e){if(!e)return null;const n=e.filter(jS);return 0==n.length?null:function(t){return HS(GS(t,n))}}($S(e)):null}function Xg(e){return null!=e?function qS(e){if(!e)return null;const n=e.filter(jS);return 0==n.length?null:function(t){return Yg(GS(t,n).map(US)).pipe(ce(HS))}}($S(e)):null}function WS(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function em(e){return e?Array.isArray(e)?e:[e]:[]}function ju(e,n){return Array.isArray(e)?e.includes(n):e===n}function KS(e,n){const t=em(n);return em(e).forEach(o=>{ju(t,o)||t.push(o)}),t}function YS(e,n){return em(n).filter(t=>!ju(e,t))}class JS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Jg(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Xg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class kt extends JS{get formDirective(){return null}get path(){return null}}class Ri extends JS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class XS{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let ft=(()=>{class e extends XS{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||e)(O(Ri,2))}}static{this.\u0275dir=J({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){2&i&&Oe("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Ce]})}}return e})(),tm=(()=>{class e extends XS{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||e)(O(kt,10))}}static{this.\u0275dir=J({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){2&i&&Oe("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Ce]})}}return e})();const Va="VALID",Hu="INVALID",$r="PENDING",Ba="DISABLED";class zr{}class tI extends zr{constructor(n,t){super(),this.value=n,this.source=t}}class om extends zr{constructor(n,t){super(),this.pristine=n,this.source=t}}class rm extends zr{constructor(n,t){super(),this.touched=n,this.source=t}}class Gu extends zr{constructor(n,t){super(),this.status=n,this.source=t}}function sm(e){return($u(e)?e.validators:e)||null}function am(e,n){return($u(n)?n.asyncValidators:e)||null}function $u(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class cm{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ha(()=>this.statusReactive()),this.statusReactive=rr(void 0),this._pristine=ha(()=>this.pristineReactive()),this.pristineReactive=rr(!0),this._touched=ha(()=>this.touchedReactive()),this.touchedReactive=rr(!1),this._events=new jt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Vn(this.statusReactive)}set status(n){Vn(()=>this.statusReactive.set(n))}get valid(){return this.status===Va}get invalid(){return this.status===Hu}get pending(){return this.status==$r}get disabled(){return this.status===Ba}get enabled(){return this.status!==Ba}get pristine(){return Vn(this.pristineReactive)}set pristine(n){Vn(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return Vn(this.touchedReactive)}set touched(n){Vn(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(KS(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(KS(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(YS(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(YS(n,this._rawAsyncValidators))}hasValidator(n){return ju(this._rawValidators,n)}hasAsyncValidator(n){return ju(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){const t=!1===this.touched;this.touched=!0;const i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched({...n,sourceControl:i}),t&&!1!==n.emitEvent&&this._events.next(new rm(!0,i))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(n))}markAsUntouched(n={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const i=n.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:i})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,i),t&&!1!==n.emitEvent&&this._events.next(new rm(!1,i))}markAsDirty(n={}){const t=!0===this.pristine;this.pristine=!1;const i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty({...n,sourceControl:i}),t&&!1!==n.emitEvent&&this._events.next(new om(!1,i))}markAsPristine(n={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const i=n.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,i),t&&!1!==n.emitEvent&&this._events.next(new om(!0,i))}markAsPending(n={}){this.status=$r;const t=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new Gu(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending({...n,sourceControl:t})}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=Ba,this.errors=null,this._forEachChild(o=>{o.disable({...n,onlySelf:!0})}),this._updateValue();const i=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new tI(this.value,i)),this._events.next(new Gu(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t},this),this._onDisabledChange.forEach(o=>o(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=Va,this._forEachChild(i=>{i.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n,t){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Va||this.status===$r)&&this._runAsyncValidator(i,n.emitEvent)}const t=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new tI(this.value,t)),this._events.next(new Gu(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity({...n,sourceControl:t})}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ba:Va}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,t){if(this.asyncValidator){this.status=$r,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const i=US(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,o)=>i&&i._find(o),this)}getError(n,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,t,i){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||i)&&this._events.next(new Gu(this.status,t)),this._parent&&this._parent._updateControlsErrors(n,t,i)}_initObservables(){this.valueChanges=new Re,this.statusChanges=new Re}_calculateStatus(){return this._allControlsDisabled()?Ba:this.errors?Hu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($r)?$r:this._anyControlsHaveStatus(Hu)?Hu:Va}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,t){const i=!this._anyControlsDirty(),o=this.pristine!==i;this.pristine=i,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),o&&this._events.next(new om(this.pristine,t))}_updateTouched(n={},t){this.touched=this._anyControlsTouched(),this._events.next(new rm(this.touched,t)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){$u(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function y5(e){return Array.isArray(e)?Jg(e):e||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function C5(e){return Array.isArray(e)?Xg(e):e||null}(this._rawAsyncValidators)}}class lm extends cm{constructor(n,t,i){super(sm(t),am(i,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,i={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){(function iI(e,n,t){e._forEachChild((i,o)=>{if(void 0===t[o])throw new R(1002,"")})})(this,0,n),Object.keys(n).forEach(i=>{(function nI(e,n,t){const i=e.controls;if(!(n?Object.keys(i):i).length)throw new R(1e3,"");if(!i[t])throw new R(1001,"")})(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(Object.keys(n).forEach(i=>{const o=this.controls[i];o&&o.patchValue(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((i,o)=>{i.reset(n?n[o]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,i)=>(n[i]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&n(i,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&n(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,o)=>((i.enabled||this.disabled)&&(t[o]=i.value),t))}_reduceChildren(n,t){let i=n;return this._forEachChild((o,r)=>{i=t(i,o,r)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const qr=new B("CallSetDisabledState",{providedIn:"root",factory:()=>zu}),zu="always";function ja(e,n,t=zu){um(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||"always"===t)&&n.valueAccessor.setDisabledState?.(e.disabled),function w5(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&oI(e,n)})}(e,n),function S5(e,n){const t=(i,o)=>{n.valueAccessor.writeValue(i),o&&n.viewToModelUpdate(i)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function D5(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&oI(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function M5(e,n){if(n.valueAccessor.setDisabledState){const t=i=>{n.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function Qu(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function um(e,n){const t=function QS(e){return e._rawValidators}(e);null!==n.validator?e.setValidators(WS(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const i=function ZS(e){return e._rawAsyncValidators}(e);null!==n.asyncValidator?e.setAsyncValidators(WS(i,n.asyncValidator)):"function"==typeof i&&e.setAsyncValidators([i]);const o=()=>e.updateValueAndValidity();Qu(n._rawValidators,o),Qu(n._rawAsyncValidators,o)}function oI(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}const x5={provide:kt,useExisting:De(()=>Ha)},Ua=Promise.resolve();let Ha=(()=>{class e extends kt{get submitted(){return Vn(this.submittedReactive)}constructor(t,i,o){super(),this.callSetDisabledState=o,this._submitted=ha(()=>this.submittedReactive()),this.submittedReactive=rr(!1),this._directives=new Set,this.ngSubmit=new Re,this.form=new lm({},Jg(t),Xg(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ua.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),ja(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ua.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ua.then(()=>{const i=this._findContainer(t.path),o=new lm({});(function rI(e,n){um(e,n)})(o,t),i.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ua.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Ua.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),function sI(e,n){e._syncPendingControls(),n.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||e)(O(vt,10),O(Oi,10),O(qr,8))}}static{this.\u0275dir=J({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){1&i&&I("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ae([x5]),Ce]})}}return e})();function aI(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function cI(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const lI=class extends cm{constructor(n=null,t,i){super(sm(t),am(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$u(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=cI(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){aI(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){aI(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){cI(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},A5={provide:Ri,useExisting:De(()=>st)},hI=Promise.resolve();let st=(()=>{class e extends Ri{constructor(t,i,o,r,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new lI,this._registered=!1,this.name="",this.update=new Re,this._parent=t,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=function fm(e,n){if(!n)return null;let t,i,o;return Array.isArray(n),n.forEach(r=>{r.constructor===rt?t=r:function E5(e){return Object.getPrototypeOf(e.constructor)===Mo}(r)?i=r:o=r}),o||i||t||null}(0,r)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function hm(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ja(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){hI.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,o=0!==i&&Pr(i);hI.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function qu(e,n){return[...n.path,e]}(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||e)(O(kt,9),O(vt,10),O(Oi,10),O(zn,10),O(ca,8),O(qr,8))}}static{this.\u0275dir=J({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ae([A5]),Ce,Xt]})}}return e})(),pm=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=J({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();const O5={provide:zn,useExisting:De(()=>bn),multi:!0};let bn=(()=>{class e extends Mo{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=it(e)))(o||e)}})()}static{this.\u0275dir=J({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){1&i&&I("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},features:[Ae([O5]),Ce]})}}return e})();const R5={provide:zn,useExisting:De(()=>Ku),multi:!0};let F5=(()=>{class e{constructor(){this._accessors=[]}add(t,i){this._accessors.push([t,i])}remove(t){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===t)return void this._accessors.splice(i,1)}select(t){this._accessors.forEach(i=>{this._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})}_isSameGroup(t,i){return!!t[0].control&&t[0]._parent===i._control._parent&&t[1].name===i.name}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Ku=(()=>{class e extends Mo{constructor(t,i,o,r){super(t,i),this._registry=o,this._injector=r,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=F(qr,{optional:!0})??zu}ngOnInit(){this._control=this._injector.get(Ri),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(i){return new(i||e)(O(ii),O(qt),O(F5),O(dt))}}static{this.\u0275dir=J({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,o){1&i&&I("change",function(){return o.onChange()})("blur",function(){return o.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Ae([R5]),Ce]})}}return e})();const G5={provide:zn,useExisting:De(()=>Mn),multi:!0};function vI(e,n){return null==e?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${e}: ${n}`.slice(0,50))}let Mn=(()=>{class e extends Mo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=vI(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function $5(e){return e.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=it(e)))(o||e)}})()}static{this.\u0275dir=J({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){1&i&&I("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ae([G5]),Ce]})}}return e})(),ci=(()=>{class e{constructor(t,i,o){this._element=t,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(vI(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||e)(O(qt),O(ii),O(Mn,9))}}static{this.\u0275dir=J({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})();const z5={provide:zn,useExisting:De(()=>Yu),multi:!0};function yI(e,n){return null==e?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${e}: ${n}`.slice(0,50))}let Yu=(()=>{class e extends Mo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const o=t.map(r=>this._getOptionId(r));i=(r,s)=>{r._setSelected(o.indexOf(s.toString())>-1)}}else i=(o,r)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const o=[],r=i.selectedOptions;if(void 0!==r){const s=r;for(let a=0;a<s.length;a++){const d=this._getOptionValue(s[a].value);o.push(d)}}else{const s=i.options;for(let a=0;a<s.length;a++){const c=s[a];if(c.selected){const d=this._getOptionValue(c.value);o.push(d)}}}this.value=o,t(o)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function q5(e){return e.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=it(e)))(o||e)}})()}static{this.\u0275dir=J({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){1&i&&I("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ae([z5]),Ce]})}}return e})(),li=(()=>{class e{constructor(t,i,o){this._element=t,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(yI(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(yI(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||e)(O(qt),O(ii),O(Yu,9))}}static{this.\u0275dir=J({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})();function bI(e){return"number"==typeof e?e:parseFloat(e)}let wo=(()=>{class e{constructor(){this._validator=Bu}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Bu,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=J({type:e,features:[Xt]})}}return e})();const W5={provide:vt,useExisting:De(()=>Ju),multi:!0};let Ju=(()=>{class e extends wo{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>bI(t),this.createValidator=t=>function AS(e){return n=>{if(Ai(n.value)||Ai(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}}(t)}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=it(e)))(o||e)}})()}static{this.\u0275dir=J({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,o){2&i&&On("max",o._enabled?o.max:null)},inputs:{max:"max"},features:[Ae([W5]),Ce]})}}return e})();const Q5={provide:vt,useExisting:De(()=>Ga),multi:!0};let Ga=(()=>{class e extends wo{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>bI(t),this.createValidator=t=>function PS(e){return n=>{if(Ai(n.value)||Ai(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}}(t)}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=it(e)))(o||e)}})()}static{this.\u0275dir=J({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,o){2&i&&On("min",o._enabled?o.min:null)},inputs:{min:"min"},features:[Ae([Q5]),Ce]})}}return e})();const Z5={provide:vt,useExisting:De(()=>wn),multi:!0};let wn=(()=>{class e extends wo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Pr,this.createValidator=t=>OS}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=it(e)))(o||e)}})()}static{this.\u0275dir=J({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){2&i&&On("required",o._enabled?"":null)},inputs:{required:"required"},features:[Ae([Z5]),Ce]})}}return e})(),tU=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=Oo({type:e})}static{this.\u0275inj=Bi({})}}return e})(),yt=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:qr,useValue:t.callSetDisabledState??zu}]}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=Oo({type:e})}static{this.\u0275inj=Bi({imports:[tU]})}}return e})(),iU=(()=>{class e{constructor(t){this.http=t,this.username="",this.password=""}login(){this.http.post("http://localhost:3000/api/auth/login",{username:this.username,password:this.password}).subscribe({next:t=>{const o=t.email,r=t.role,s=t.token,a=t.branch,c=t.branches,d=t.GSTIN,f=t.GSTIN_ID;localStorage.setItem("username",t.username),localStorage.setItem("email",o),r&&localStorage.setItem("role",r),s&&localStorage.setItem("token",s),d&&localStorage.setItem("GSTIN",d),null!=f&&localStorage.setItem("GSTIN_ID",String(f)),Array.isArray(c)&&localStorage.setItem("branches",JSON.stringify(c));const g="admin"===String(r||"").toLowerCase();a?localStorage.setItem("branch",a):localStorage.setItem("branch",g?"All Branches":""),console.log("\u2705 Login successful for user:",localStorage.getItem("companyType")),this.http.get("http://localhost:3000/api/branches").subscribe({next:_=>{window.location.href=_&&0!==_.length?"/home/dashboard":"/home/Branches"},error:()=>{window.location.href="/home/Branches"}})},error:t=>{console.error(t),alert("Invalid credentials")}})}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-login"]],standalone:!0,features:[Fe],decls:8,vars:2,consts:[[1,"login-container"],[3,"ngSubmit"],["type","text","placeholder","Username","name","username","required","",3,"ngModelChange","ngModel"],["type","password","placeholder","Password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"h2"),h(2,"Login"),u(),l(3,"form",1),I("ngSubmit",function(){return o.login()}),l(4,"input",2),D("ngModelChange",function(s){return S(o.username,s)||(o.username=s),s}),u(),l(5,"input",3),D("ngModelChange",function(s){return S(o.password,s)||(o.password=s),s}),u(),l(6,"button",4),h(7,"Login"),u()()()),2&i&&(p(4),w("ngModel",o.username),p(),w("ngModel",o.password))},dependencies:[Bt,yt,pm,rt,ft,tm,wn,st,Ha],styles:[".login-container[_ngcontent-%COMP%]{width:300px;margin:100px auto;padding:20px;border:1px solid #ddd;border-radius:10px;text-align:center}.login-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;margin:10px 0;padding:8px}.login-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:10px;background:#1976d2;color:#fff;border:none;cursor:pointer}"]})}}return e})(),vm=(()=>{class e{constructor(){this.branchSubject=new Ut(localStorage.getItem("branch")||"All Branches"),this.branch$=this.branchSubject.asObservable()}get currentBranch(){return this.branchSubject.value}setBranch(t){t!==this.branchSubject.value&&(this.branchSubject.next(t),localStorage.setItem("branch",t))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function oU(e,n){1&e&&(l(0,"option",24),h(1,"All Branches"),u())}function rU(e,n){if(1&e&&(l(0,"option",25),h(1),u()),2&e){const t=n.$implicit;M("value",t),p(),L(t)}}function sU(e,n){1&e&&(l(0,"ul",26)(1,"li")(2,"a",27),h(3,"View Shipments"),u()(),l(4,"li")(5,"a",28),h(6,"Stocks"),u()(),l(7,"li")(8,"a",29),h(9,"Manifest"),u()(),l(10,"li")(11,"a",30),h(12,"Invoice"),u()(),l(13,"li")(14,"a",31),h(15,"Reports"),u()()())}function aU(e,n){1&e&&(l(0,"ul",26)(1,"li")(2,"a",33),h(3,"Clients"),u()(),l(4,"li")(5,"a",34),h(6,"Guests"),u()(),l(7,"li")(8,"a",35),h(9,"Branches"),u()(),l(10,"li")(11,"a",36),h(12,"Hubs"),u()(),l(13,"li")(14,"a",37),h(15,"Transport Partners"),u()(),l(16,"li")(17,"a",38),h(18,"Users"),u()(),l(19,"li")(20,"a",39),h(21,"Categories"),u()(),l(22,"li")(23,"a",40),h(24,"Packages"),u()(),l(25,"li")(26,"a",41),h(27,"Products"),u()(),l(28,"li")(29,"a",42),h(30,"Roles Settings"),u()()())}function cU(e,n){if(1&e){const t=A();so(0),l(1,"li",12),I("click",function(){return y(t),C(m().toggleMenu("admin"))}),l(2,"span"),W(3,"i",32),h(4," Admin"),u(),W(5,"i",14),u(),N(6,aU,31,0,"ul",15),ao()}if(2&e){const t=m();p(6),M("ngIf",t.showAdmin)}}function lU(e,n){1&e&&(l(0,"li",43)(1,"span"),W(2,"i",32),h(3," Admin (No privileges)"),u()())}function uU(e,n){1&e&&(l(0,"ul",26)(1,"li")(2,"a",44),h(3,"Configuration"),u()(),l(4,"li")(5,"a",45),h(6,"Logs"),u()(),l(7,"li")(8,"a",46),h(9,"Locations"),u()()())}function dU(e,n){1&e&&(l(0,"ul",26)(1,"li")(2,"a",47),h(3,"My Profile"),u()(),l(4,"li")(5,"a",48),h(6,"Change Password"),u()(),l(7,"li")(8,"a",49),h(9,"Roles"),u()()())}let hU=(()=>{class e{constructor(t,i){this.http=t,this.branchService=i,this.username=localStorage.getItem("username"),this.email=localStorage.getItem("email"),this.role=localStorage.getItem("role"),this.isAdmin="admin"===String(localStorage.getItem("role")||"").toLowerCase(),this.showShipments=!1,this.showAdmin=!1,this.showSettings=!1,this.showProfile=!1,this.branchOptions=[],this.selectedBranch=localStorage.getItem("branch")||""}ngOnInit(){if(this.isAdmin&&this.username)return this.http.get(`http://localhost:3000/api/branches/by-user/${this.username}`).subscribe(t=>{const i=(t||[]).map(o=>o.branchName).filter(Boolean);this.branchOptions=i}),this.selectedBranch||(this.selectedBranch="All Branches",localStorage.setItem("branch",this.selectedBranch)),void this.branchService.setBranch(this.selectedBranch);try{const t=JSON.parse(localStorage.getItem("branches")||"[]");Array.isArray(t)&&(this.branchOptions=t)}catch{this.branchOptions=[]}!this.selectedBranch&&this.branchOptions.length&&(this.selectedBranch=this.branchOptions[0],localStorage.setItem("branch",this.selectedBranch))}toggleMenu(t){"shipments"===t&&(this.showShipments=!this.showShipments),"admin"===t&&this.isAdmin&&(this.showAdmin=!this.showAdmin),"settings"===t&&(this.showSettings=!this.showSettings),"profile"===t&&(this.showProfile=!this.showProfile)}onBranchChange(t){const i=t.target.value;this.selectedBranch=i,localStorage.setItem("branch",i),this.branchService.setBranch(i),window.location.href.includes("/shipments")&&window.location.reload()}static{this.\u0275fac=function(i){return new(i||e)(O(ot),O(vm))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-home"]],standalone:!0,features:[Fe],decls:49,vars:11,consts:[["noAdminMenu",""],[1,"container"],[1,"sidebar"],[1,"welcome"],[1,"fas","fa-user-circle"],[3,"ngModelChange","change","ngModel","disabled"],["value","All Branches",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["routerLink","dashboard"],[1,"fas","fa-tachometer-alt"],["routerLink","new-shipment"],[1,"fas","fa-plus-circle"],[1,"menu-item",3,"click"],[1,"fas","fa-truck"],[1,"fas","fa-caret-down"],["class","submenu",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"fas","fa-cog"],[1,"fas","fa-id-badge"],["routerLink","notifications"],[1,"fas","fa-bell"],["routerLink","/"],[1,"fas","fa-sign-out-alt"],[1,"content"],["value","All Branches"],[3,"value"],[1,"submenu"],["routerLink","shipments"],["routerLink","Stocks"],["routerLink","Manifest"],["routerLink","Invoice"],["routerLink","Reports"],[1,"fas","fa-user-shield"],["routerLink","Clients"],["routerLink","Guests"],["routerLink","Branches"],["routerLink","Hubs"],["routerLink","Tpartners"],["routerLink","Users"],["routerLink","Categories"],["routerLink","Pkgs"],["routerLink","Products"],["routerLink","RoleSettings"],[1,"menu-item",2,"opacity","0.55","cursor","not-allowed"],["routerLink","Configuration"],["routerLink","Logs"],["routerLink","Locations"],["routerLink","profile"],["routerLink","changePass"],["routerLink","roles"]],template:function(i,o){if(1&i){const r=A();l(0,"div",1)(1,"aside",2)(2,"div",3)(3,"h3"),W(4,"i",4),h(5),u(),l(6,"select",5),D("ngModelChange",function(a){return y(r),S(o.selectedBranch,a)||(o.selectedBranch=a),C(a)}),I("change",function(a){return y(r),C(o.onBranchChange(a))}),N(7,oU,2,0,"option",6)(8,rU,2,2,"option",7),u()(),l(9,"ul")(10,"li")(11,"a",8),W(12,"i",9),h(13," Dashboard"),u()(),l(14,"li")(15,"a",10),W(16,"i",11),h(17," New Shipment"),u()(),l(18,"li",12),I("click",function(){return y(r),C(o.toggleMenu("shipments"))}),l(19,"span"),W(20,"i",13),h(21," Shipments"),u(),W(22,"i",14),u(),N(23,sU,16,0,"ul",15)(24,cU,7,1,"ng-container",16)(25,lU,4,0,"ng-template",null,0,Nr),l(27,"li",12),I("click",function(){return y(r),C(o.toggleMenu("settings"))}),l(28,"span"),W(29,"i",17),h(30," Settings"),u(),W(31,"i",14),u(),N(32,uU,10,0,"ul",15),l(33,"li",12),I("click",function(){return y(r),C(o.toggleMenu("profile"))}),l(34,"span"),W(35,"i",18),h(36," Profile"),u(),W(37,"i",14),u(),N(38,dU,10,0,"ul",15),l(39,"li")(40,"a",19),W(41,"i",20),h(42," Notifications"),u()(),l(43,"li")(44,"a",21),W(45,"i",22),h(46," Logout"),u()()()(),l(47,"main",23),W(48,"router-outlet"),u()()}if(2&i){const r=Ir(26);p(5),tt(" Welcome, ",o.username,", ",o.email,""),p(),w("ngModel",o.selectedBranch),M("disabled",!o.isAdmin&&o.branchOptions.length<=1),p(),M("ngIf",o.isAdmin),p(),M("ngForOf",o.branchOptions),p(15),M("ngIf",o.showShipments),p(),M("ngIf",o.isAdmin)("ngIfElse",r),p(8),M("ngIf",o.showSettings),p(6),M("ngIf",o.showProfile)}},dependencies:[Nu,Vu,_t,Et,yt,ci,li,Mn,ft,st],styles:[".container[_ngcontent-%COMP%]{display:flex}.sidebar[_ngcontent-%COMP%]{width:250px;background:#2c3e50;color:#fff;padding:20px;height:100vh;overflow-y:auto}.sidebar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:20px;font-size:16px}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px;cursor:pointer;display:flex;align-items:center;justify-content:space-between}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;display:flex;align-items:center;gap:8px}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#34495e}.submenu[_ngcontent-%COMP%]{background:#34495e;margin-left:10px;padding-left:10px}.submenu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px;font-size:14px}"]})}}return e})(),fU=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[Fe],decls:2,vars:0,template:function(i,o){1&i&&(l(0,"h2"),h(1,"Dashboard"),u())},styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})();function pU(e,n){if(1&e&&(l(0,"option",45),h(1),u()),2&e){const t=n.$implicit,i=m(2);M("value",t.clientName),p(),U(" ",i.formatClientOption(t)," ")}}function gU(e,n){if(1&e){const t=A();l(0,"div",39)(1,"div",40)(2,"span",27),h(3,"Saved clients"),u(),l(4,"button",41),I("click",function(){return y(t),C(m().openClientModal())}),h(5,"+ New Client/Edit Client"),u()(),l(6,"label"),h(7,"Sender Name "),l(8,"input",42),D("ngModelChange",function(o){y(t);const r=m();return S(r.consignor,o)||(r.consignor=o),C(o)}),I("change",function(){y(t);const o=m();return C(o.onConsignorSelect(o.consignor))}),u(),l(9,"datalist",43),N(10,pU,2,2,"option",44),u()()()}if(2&e){const t=m();p(8),w("ngModel",t.consignor),p(2),M("ngForOf",t.clientList)}}function mU(e,n){if(1&e&&(l(0,"option",45),h(1),u()),2&e){const t=n.$implicit,i=m(2);M("value",t.guestName),p(),U(" ",i.formatGuestOption(t)," ")}}function _U(e,n){if(1&e){const t=A();l(0,"div",39)(1,"div",40)(2,"span",27),h(3,"Guest senders"),u(),l(4,"button",41),I("click",function(){return y(t),C(m().openGuestModal())}),h(5,"+ New Guest"),u()(),l(6,"label"),h(7,"Guest Sender "),l(8,"select",46),D("ngModelChange",function(o){y(t);const r=m();return S(r.consignor,o)||(r.consignor=o),C(o)}),I("change",function(){y(t);const o=m();return C(o.onConsignorGuestSelect(o.consignor))}),N(9,mU,2,2,"option",44),u()()()}if(2&e){const t=m();p(8),w("ngModel",t.consignor),p(),M("ngForOf",t.guestList)}}function vU(e,n){if(1&e&&(l(0,"option",45),h(1),u()),2&e){const t=n.$implicit,i=m(2);M("value",t.clientName),p(),U(" ",i.formatClientOption(t)," ")}}function yU(e,n){if(1&e){const t=A();l(0,"div",39)(1,"div",40)(2,"span",27),h(3,"Saved clients"),u(),l(4,"button",41),I("click",function(){return y(t),C(m().openClientModal())}),h(5,"+ New Client/Edit Client"),u()(),l(6,"label"),h(7,"Receiver Name "),l(8,"input",47),D("ngModelChange",function(o){y(t);const r=m();return S(r.consignee,o)||(r.consignee=o),C(o)}),I("change",function(){y(t);const o=m();return C(o.onConsigneeSelect(o.consignee))}),u(),l(9,"datalist",48),N(10,vU,2,2,"option",44),u()()()}if(2&e){const t=m();p(8),w("ngModel",t.consignee),p(2),M("ngForOf",t.clientList)}}function CU(e,n){if(1&e&&(l(0,"option",45),h(1),u()),2&e){const t=n.$implicit,i=m(2);M("value",t.guestName),p(),U(" ",i.formatGuestOption(t)," ")}}function bU(e,n){if(1&e){const t=A();l(0,"div",39)(1,"div",40)(2,"span",27),h(3,"Guest receivers"),u(),l(4,"button",41),I("click",function(){return y(t),C(m().openGuestModal())}),h(5,"+ New Guest"),u()(),l(6,"label"),h(7,"Guest Receiver "),l(8,"select",46),D("ngModelChange",function(o){y(t);const r=m();return S(r.consignee,o)||(r.consignee=o),C(o)}),I("change",function(){y(t);const o=m();return C(o.onConsigneeGuestSelect(o.consignee))}),N(9,CU,2,2,"option",44),u()()()}if(2&e){const t=m();p(8),w("ngModel",t.consignee),p(),M("ngForOf",t.guestList)}}function MU(e,n){if(1&e){const t=A();l(0,"div",39)(1,"label"),h(2,"Name "),l(3,"input",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.billingName,o)||(r.billingName=o),C(o)}),u()(),l(4,"label"),h(5,"GSTIN "),l(6,"input",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.billingGSTIN,o)||(r.billingGSTIN=o),C(o)}),u()(),l(7,"label"),h(8,"Phone "),l(9,"input",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.billingPhone,o)||(r.billingPhone=o),C(o)}),u()(),l(10,"label"),h(11,"Address "),l(12,"textarea",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.billingAddress,o)||(r.billingAddress=o),C(o)}),u()()()}if(2&e){const t=m();p(3),w("ngModel",t.billingName),p(3),w("ngModel",t.billingGSTIN),p(3),w("ngModel",t.billingPhone),p(3),w("ngModel",t.billingAddress)}}function wU(e,n){1&e&&(l(0,"div",49),h(1,"Using consignor details"),u())}function DU(e,n){if(1&e){const t=A();l(0,"div",39)(1,"label"),h(2,"Name "),l(3,"input",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.pickupName,o)||(r.pickupName=o),C(o)}),u()(),l(4,"label"),h(5,"Phone "),l(6,"input",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.pickupPhone,o)||(r.pickupPhone=o),C(o)}),u()(),l(7,"label"),h(8,"Address "),l(9,"textarea",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.pickupAddress,o)||(r.pickupAddress=o),C(o)}),u()()()}if(2&e){const t=m();p(3),w("ngModel",t.pickupName),p(3),w("ngModel",t.pickupPhone),p(3),w("ngModel",t.pickupAddress)}}function SU(e,n){1&e&&(l(0,"div",49),h(1,"Using consignor details"),u())}function IU(e,n){if(1&e){const t=A();l(0,"div",39)(1,"div",11)(2,"label"),h(3,"Name "),l(4,"input",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.deliveryName,o)||(r.deliveryName=o),C(o)}),u()(),l(5,"label"),h(6,"Phone "),l(7,"input",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.deliveryPhone,o)||(r.deliveryPhone=o),C(o)}),u()()(),l(8,"label"),h(9,"Address "),l(10,"textarea",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.deliveryAddress,o)||(r.deliveryAddress=o),C(o)}),u()()()}if(2&e){const t=m();p(4),w("ngModel",t.deliveryName),p(3),w("ngModel",t.deliveryPhone),p(3),w("ngModel",t.deliveryAddress)}}function TU(e,n){1&e&&(l(0,"div",49),h(1,"Using consignee details"),u())}function EU(e,n){if(1&e&&(l(0,"option",45),h(1),u()),2&e){const t=n.$implicit;M("value",t.productName),p(),tt(" ",t.hsnNum," - ",t.productName," ")}}function NU(e,n){if(1&e){const t=A();l(0,"div",63)(1,"select",28),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.type,o)||(r.type=o),C(o)}),N(2,EU,2,3,"option",44),u(),l(3,"input",64),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.amount,o)||(r.amount=o),C(o)}),u(),l(4,"button",52),I("click",function(){const o=y(t).index,r=m().index,s=m().index;return C(m().deleteProduct(s,r,o))}),h(5,"\u2715"),u()()}if(2&e){const t=n.$implicit,i=m(3);p(),w("ngModel",t.type),p(),M("ngForOf",i.productList),p(),w("ngModel",t.amount)}}function xU(e,n){if(1&e&&(l(0,"option",45),h(1),u()),2&e){const t=n.$implicit;M("value",t.pkgName),p(),L(t.pkgName)}}function kU(e,n){if(1&e){const t=A();l(0,"div",63)(1,"select",28),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.type,o)||(r.type=o),C(o)}),N(2,xU,2,2,"option",44),u(),l(3,"input",64),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.amount,o)||(r.amount=o),C(o)}),u(),l(4,"button",52),I("click",function(){const o=y(t).index,r=m().index,s=m().index;return C(m().deletePackage(s,r,o))}),h(5,"\u2715"),u()()}if(2&e){const t=n.$implicit,i=m(3);p(),w("ngModel",t.type),p(),M("ngForOf",i.pkgList),p(),w("ngModel",t.amount)}}function PU(e,n){if(1&e){const t=A();l(0,"div",57)(1,"div",51)(2,"div")(3,"div",2),h(4),u()(),l(5,"button",52),I("click",function(){const o=y(t).index,r=m().index;return C(m().deleteInvoice(r,o))}),h(6,"\u2715"),u()(),l(7,"div",53)(8,"input",58),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.number,o)||(r.number=o),C(o)}),u(),l(9,"input",59),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.value,o)||(r.value=o),C(o)}),u()(),l(10,"div",60)(11,"div",61),h(12,"Products"),u(),N(13,NU,6,3,"div",62),l(14,"button",41),I("click",function(){const o=y(t).index,r=m().index;return C(m().addProduct(r,o))}),h(15,"+ Product"),u()(),l(16,"div",60)(17,"div",61),h(18,"Packages"),u(),N(19,kU,6,3,"div",62),l(20,"button",41),I("click",function(){const o=y(t).index,r=m().index;return C(m().addPackage(r,o))}),h(21,"+ Package"),u()()()}if(2&e){const t=n.$implicit,i=n.index;p(4),U("Invoice ",i+1,""),p(4),w("ngModel",t.number),p(),w("ngModel",t.value),p(4),M("ngForOf",t.products),p(6),M("ngForOf",t.packages)}}function AU(e,n){if(1&e){const t=A();l(0,"div",50)(1,"div",51)(2,"div",2),h(3),u(),l(4,"button",52),I("click",function(){const o=y(t).index;return C(m().deleteEwaybill(o))}),h(5,"\u2715"),u()(),l(6,"div",53)(7,"input",54),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.number,o)||(r.number=o),C(o)}),u(),l(8,"input",6),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.date,o)||(r.date=o),C(o)}),u()(),N(9,PU,22,5,"div",55),l(10,"button",56),I("click",function(){const o=y(t).index;return C(m().addInvoice(o))}),h(11,"+ Invoice"),u()()}if(2&e){const t=n.$implicit,i=n.index;p(3),U("E-Waybill ",i+1,""),p(4),w("ngModel",t.number),p(),w("ngModel",t.date),p(),M("ngForOf",t.invoices)}}function OU(e,n){if(1&e){const t=A();l(0,"div",77)(1,"input",78),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.location,o)||(r.location=o),C(o)}),u(),l(2,"button",41),I("click",function(){const o=y(t).index;return C(m(3).removeDeliveryLocation(o))}),h(3,"Remove"),u()()}if(2&e){const t=n.$implicit;p(),w("ngModel",t.location)}}function RU(e,n){if(1&e&&(l(0,"div",79),h(1),u()),2&e){const t=m(3);p(),L(t.clientError)}}function FU(e,n){if(1&e){const t=A();l(0,"div")(1,"label"),h(2,"Name* "),l(3,"input",28),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.newClient.clientName,o)||(r.newClient.clientName=o),C(o)}),u()(),l(4,"label"),h(5,"GSTIN* "),l(6,"input",28),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.newClient.GSTIN,o)||(r.newClient.GSTIN=o),C(o)}),u()(),l(7,"label"),h(8,"Phone* "),l(9,"input",28),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.newClient.phoneNum,o)||(r.newClient.phoneNum=o),C(o)}),u()(),l(10,"label"),h(11,"Branch* "),l(12,"input",12),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.newClient.branch,o)||(r.newClient.branch=o),C(o)}),u()(),l(13,"label"),h(14,"Address* "),l(15,"textarea",28),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.newClient.address,o)||(r.newClient.address=o),C(o)}),u()(),l(16,"div",70)(17,"input",71),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.newClient.city,o)||(r.newClient.city=o),C(o)}),u(),l(18,"input",72),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.newClient.state,o)||(r.newClient.state=o),C(o)}),u(),l(19,"input",73),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.newClient.pinCode,o)||(r.newClient.pinCode=o),C(o)}),u()(),l(20,"h4"),h(21,"Delivery Locations"),u(),N(22,OU,4,1,"div",74),l(23,"button",41),I("click",function(){return y(t),C(m(2).addDeliveryLocation())}),h(24,"+ Add Delivery Location"),u(),N(25,RU,2,1,"div",75),l(26,"div",76)(27,"button",19),I("click",function(){return y(t),C(m(2).saveNewClient())}),h(28,"Save"),u(),l(29,"button",19),I("click",function(){return y(t),C(m(2).closeModals())}),h(30,"Cancel"),u()()()}if(2&e){const t=m(2);p(3),w("ngModel",t.newClient.clientName),p(3),w("ngModel",t.newClient.GSTIN),p(3),w("ngModel",t.newClient.phoneNum),p(3),w("ngModel",t.newClient.branch),p(3),w("ngModel",t.newClient.address),p(2),w("ngModel",t.newClient.city),p(),w("ngModel",t.newClient.state),p(),w("ngModel",t.newClient.pinCode),p(3),M("ngForOf",t.newClient.deliveryLocations),p(3),M("ngIf",t.clientError)}}function LU(e,n){if(1&e&&(l(0,"option",45),h(1),u()),2&e){const t=n.$implicit,i=m(3);M("value",t._id),p(),L(i.formatClientOption(t))}}function VU(e,n){if(1&e){const t=A();l(0,"div",77)(1,"input",78),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.location,o)||(r.location=o),C(o)}),u(),l(2,"button",41),I("click",function(){const o=y(t).index;return C(m(4).removeEditDeliveryLocation(o))}),h(3,"Remove"),u()()}if(2&e){const t=n.$implicit;p(),w("ngModel",t.location)}}function BU(e,n){if(1&e){const t=A();l(0,"div")(1,"label"),h(2,"Name "),W(3,"input",82),u(),l(4,"label"),h(5,"GSTIN "),W(6,"input",82),u(),l(7,"label"),h(8,"Phone "),W(9,"input",82),u(),l(10,"label"),h(11,"Branch "),W(12,"input",82),u(),l(13,"label"),h(14,"Address "),W(15,"textarea",82),u(),l(16,"h4"),h(17,"Delivery Locations"),u(),N(18,VU,4,1,"div",74),l(19,"button",41),I("click",function(){return y(t),C(m(3).addEditDeliveryLocation())}),h(20,"+ Add Delivery Location"),u()()}if(2&e){const t=m(3);p(3),M("ngModel",t.editClient.clientName),p(3),M("ngModel",t.editClient.GSTIN),p(3),M("ngModel",t.editClient.phoneNum),p(3),M("ngModel",t.editClient.branch),p(3),M("ngModel",t.editClient.address),p(3),M("ngForOf",t.editClient.deliveryLocations)}}function jU(e,n){if(1&e&&(l(0,"div",79),h(1),u()),2&e){const t=m(3);p(),L(t.editClientError)}}function UU(e,n){if(1&e){const t=A();l(0,"div")(1,"label"),h(2,"Select Client "),l(3,"select",46),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.selectedEditClientId,o)||(r.selectedEditClientId=o),C(o)}),I("change",function(){y(t);const o=m(2);return C(o.onEditClientSelect(o.selectedEditClientId))}),l(4,"option",80),h(5,"Select..."),u(),N(6,LU,2,2,"option",44),u()(),N(7,BU,21,6,"div",69)(8,jU,2,1,"div",75),l(9,"div",76)(10,"button",81),I("click",function(){return y(t),C(m(2).saveEditedClient())}),h(11,"Save"),u(),l(12,"button",19),I("click",function(){return y(t),C(m(2).closeModals())}),h(13,"Cancel"),u()()()}if(2&e){const t=m(2);p(3),w("ngModel",t.selectedEditClientId),p(3),M("ngForOf",t.editableClientList),p(),M("ngIf",null==t.editClient?null:t.editClient._id),p(),M("ngIf",t.editClientError),p(2),M("disabled",!t.selectedEditClientId)}}function HU(e,n){if(1&e){const t=A();l(0,"div",65)(1,"div",66)(2,"div",67)(3,"h3"),h(4,"Add Client"),u(),l(5,"button",52),I("click",function(){return y(t),C(m().closeModals())}),h(6,"?\x07"),u()(),l(7,"div",68)(8,"button",19),I("click",function(){return y(t),C(m().setClientModalTab("add"))}),h(9,"New Client"),u(),l(10,"button",19),I("click",function(){return y(t),C(m().setClientModalTab("edit"))}),h(11,"Edit Client"),u()(),N(12,FU,31,10,"div",69)(13,UU,14,5,"div",69),u()()}if(2&e){const t=m();p(8),Oe("active","add"===t.clientModalTab),p(2),Oe("active","edit"===t.clientModalTab),p(2),M("ngIf","add"===t.clientModalTab),p(),M("ngIf","edit"===t.clientModalTab)}}function GU(e,n){if(1&e&&(l(0,"div",79),h(1),u()),2&e){const t=m(2);p(),L(t.guestError)}}function $U(e,n){if(1&e){const t=A();l(0,"div",65)(1,"div",66)(2,"div",67)(3,"h3"),h(4,"Add Guest"),u(),l(5,"button",52),I("click",function(){return y(t),C(m().closeModals())}),h(6,"\u2715"),u()(),l(7,"label"),h(8,"Name* "),l(9,"input",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.newGuest.guestName,o)||(r.newGuest.guestName=o),C(o)}),u()(),l(10,"label"),h(11,"Phone* "),l(12,"input",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.newGuest.phoneNum,o)||(r.newGuest.phoneNum=o),C(o)}),u()(),l(13,"label"),h(14,"Discount % "),l(15,"input",30),D("ngModelChange",function(o){y(t);const r=m();return S(r.newGuest.perDis,o)||(r.newGuest.perDis=o),C(o)}),u()(),l(16,"label"),h(17,"Address* "),l(18,"textarea",28),D("ngModelChange",function(o){y(t);const r=m();return S(r.newGuest.address,o)||(r.newGuest.address=o),C(o)}),u()(),l(19,"div",70)(20,"input",71),D("ngModelChange",function(o){y(t);const r=m();return S(r.newGuest.city,o)||(r.newGuest.city=o),C(o)}),u(),l(21,"input",72),D("ngModelChange",function(o){y(t);const r=m();return S(r.newGuest.state,o)||(r.newGuest.state=o),C(o)}),u(),l(22,"input",73),D("ngModelChange",function(o){y(t);const r=m();return S(r.newGuest.pinCode,o)||(r.newGuest.pinCode=o),C(o)}),u()(),N(23,GU,2,1,"div",75),l(24,"div",76)(25,"button",19),I("click",function(){return y(t),C(m().saveNewGuest())}),h(26,"Save"),u(),l(27,"button",19),I("click",function(){return y(t),C(m().closeModals())}),h(28,"Cancel"),u()()()()}if(2&e){const t=m();p(9),w("ngModel",t.newGuest.guestName),p(3),w("ngModel",t.newGuest.phoneNum),p(3),w("ngModel",t.newGuest.perDis),p(3),w("ngModel",t.newGuest.address),p(2),w("ngModel",t.newGuest.city),p(),w("ngModel",t.newGuest.state),p(),w("ngModel",t.newGuest.pinCode),p(),M("ngIf",t.guestError)}}let zU=(()=>{class e{constructor(t){this.http=t,this.DRAFT_PREFIX="newShipmentDraft",this.showClientModal=!1,this.showGuestModal=!1,this.clientError="",this.guestError="",this.clientModalTab="add",this.editClientError="",this.newClient={clientName:"",address:"",city:"",state:"",pinCode:"",GSTIN:"",phoneNum:"",perDis:0,creditType:"no-credit",products:[],deliveryLocations:[{location:""}],status:"active",branch:""},this.editableClientList=[],this.selectedEditClientId="",this.editClient={_id:"",clientName:"",GSTIN:"",phoneNum:"",address:"",city:"",state:"",pinCode:"",branch:"",deliveryLocations:[]},this.newGuest={guestName:"",address:"",city:"",state:"",pinCode:"",phoneNum:"",perDis:0},this.billingType="consignor",this.billingName="",this.billingAddress="",this.billingGSTIN="",this.billingPhone="",this.clientList=[],this.guestList=[],this.pkgList=[],this.productList=[],this.pickupType="consignor",this.pickupName="",this.pickupAddress="",this.pickupPhone="",this.deliveryType="consignee",this.deliveryName="",this.deliveryAddress="",this.deliveryPhone="",this.consignorTab="consignor",this.consigneeTab="consignee",this.username="",this.branch=localStorage.getItem("branch")||"All Branches",this.selectedConsignorId=null,this.consignmentNumber="nil",this.date=(new Date).toISOString().split("T")[0],this.consignor="",this.consignorGST="",this.consignorAddress="",this.consignorPhone="",this.consignee="",this.consigneeGST="",this.consigneeAddress="",this.consigneePhone="",this.paymentMode="To Pay",this.externalRefId="",this.ewaybills=[{number:"",date:this.date,invoices:[{number:"",value:0,packages:[{type:"",amount:0}],products:[{type:"",amount:1,instock:1,intransitstock:0,deliveredstock:0}]}]}],this.charges={odc:0,unloading:0,docket:0,other:0,ccc:0,consignorDiscount:0},this.finalAmount=0,this.shipmentStatus="Pending",this.shipmentStatusDetails="",this.isSaving=!1,this.onStorageChange=i=>{"branch"===i.key&&i.newValue&&this.handleBranchChange(i.newValue,i.oldValue||this.branch)}}ngOnInit(){typeof window>"u"||(this.username=localStorage.getItem("username")||"",this.branch=localStorage.getItem("branch")||"All Branches",this.newClient.branch=this.branch,this.loadDraft(this.branch),this.getCurrentConsignmentNumber(),this.loadLists(),this.branchCheckInterval=setInterval(()=>{const t=localStorage.getItem("branch")||"All Branches";t!==this.branch&&this.handleBranchChange(t,this.branch)},1e3),window.addEventListener("storage",this.onStorageChange))}ngOnDestroy(){this.branchCheckInterval&&clearInterval(this.branchCheckInterval),window.removeEventListener("storage",this.onStorageChange)}onBeforeUnload(){this.saveDraft(this.branch)}handleBranchChange(t,i){i&&this.saveDraft(i),this.branch=t||"All Branches",this.newClient.branch=this.branch,this.editClient.branch=this.branch,this.loadDraft(this.branch),this.getCurrentConsignmentNumber(),this.loadLists()}draftKey(t){return`${this.DRAFT_PREFIX}:${t||"All Branches"}`}saveDraft(t){if(typeof window>"u")return;const i=this.draftKey(t);localStorage.setItem(i,JSON.stringify({billingType:this.billingType,billingName:this.billingName,billingAddress:this.billingAddress,billingGSTIN:this.billingGSTIN,billingPhone:this.billingPhone,pickupType:this.pickupType,pickupName:this.pickupName,pickupAddress:this.pickupAddress,pickupPhone:this.pickupPhone,deliveryType:this.deliveryType,deliveryName:this.deliveryName,deliveryAddress:this.deliveryAddress,deliveryPhone:this.deliveryPhone,consignorTab:this.consignorTab,consigneeTab:this.consigneeTab,consignor:this.consignor,consignorGST:this.consignorGST,consignorAddress:this.consignorAddress,consignorPhone:this.consignorPhone,consignee:this.consignee,consigneeGST:this.consigneeGST,consigneeAddress:this.consigneeAddress,consigneePhone:this.consigneePhone,paymentMode:this.paymentMode,externalRefId:this.externalRefId,ewaybills:this.ewaybills,charges:this.charges,finalAmount:this.finalAmount,selectedConsignorId:this.selectedConsignorId,consignmentNumber:this.consignmentNumber,date:this.date}))}loadDraft(t){if(typeof window>"u")return;const i=localStorage.getItem(this.draftKey(t));if(i)try{const o=JSON.parse(i);Object.assign(this,{billingType:o.billingType??this.billingType,billingName:o.billingName??this.billingName,billingAddress:o.billingAddress??this.billingAddress,billingGSTIN:o.billingGSTIN??this.billingGSTIN,billingPhone:o.billingPhone??this.billingPhone,pickupType:o.pickupType??this.pickupType,pickupName:o.pickupName??this.pickupName,pickupAddress:o.pickupAddress??this.pickupAddress,pickupPhone:o.pickupPhone??this.pickupPhone,deliveryType:o.deliveryType??this.deliveryType,deliveryName:o.deliveryName??this.deliveryName,deliveryAddress:o.deliveryAddress??this.deliveryAddress,deliveryPhone:o.deliveryPhone??this.deliveryPhone,consignorTab:o.consignorTab??this.consignorTab,consigneeTab:o.consigneeTab??this.consigneeTab,consignor:o.consignor??this.consignor,consignorGST:o.consignorGST??this.consignorGST,consignorAddress:o.consignorAddress??this.consignorAddress,consignorPhone:o.consignorPhone??this.consignorPhone,consignee:o.consignee??this.consignee,consigneeGST:o.consigneeGST??this.consigneeGST,consigneeAddress:o.consigneeAddress??this.consigneeAddress,consigneePhone:o.consigneePhone??this.consigneePhone,paymentMode:o.paymentMode??this.paymentMode,externalRefId:o.externalRefId??this.externalRefId,ewaybills:o.ewaybills??this.ewaybills,charges:o.charges??this.charges,finalAmount:o.finalAmount??this.finalAmount,selectedConsignorId:o.selectedConsignorId??null,consignmentNumber:o.consignmentNumber??this.consignmentNumber,date:o.date??this.date})}catch{}}clearDraft(t){localStorage.removeItem(this.draftKey(t))}loadLists(){this.http.get(`http://localhost:3000/api/clients/clientslist?branch=${encodeURIComponent(this.branch)}`).subscribe(t=>this.clientList=t),this.http.get("http://localhost:3000/api/guests/guestslist").subscribe(t=>this.guestList=t),this.http.get("http://localhost:3000/api/pkgs/pkglist").subscribe(t=>this.pkgList=t),this.http.get("http://localhost:3000/api/products/productlist").subscribe(t=>this.productList=t)}addEwaybill(){this.ewaybills.push({number:"",date:this.date,invoices:[]})}deleteEwaybill(t){this.ewaybills.splice(t,1)}addInvoice(t){this.ewaybills[t].invoices.push({number:"",value:0,packages:[],products:[]})}deleteInvoice(t,i){this.ewaybills[t].invoices.splice(i,1)}addPackage(t,i){this.ewaybills[t].invoices[i].packages.push({type:"",amount:0})}deletePackage(t,i,o){this.ewaybills[t].invoices[i].packages.splice(o,1)}addProduct(t,i){this.ewaybills[t].invoices[i].products.push({type:"",amount:1,instock:1,intransitstock:0,deliveredstock:0})}deleteProduct(t,i,o){this.ewaybills[t].invoices[i].products.splice(o,1)}calculateFinalAmount(){let t=0,i=0;this.ewaybills.forEach(r=>{t+=r.invoices.reduce((s,a)=>s+(a.value||0),0),i+=r.invoices.reduce((s,a)=>s+a.packages.reduce((c,d)=>c+(d.amount||0),0),0)});const o=Object.values(this.charges).reduce((r,s)=>r+(Number(s)||0),0);this.finalAmount=t+i+o}resetForm(){this.billingType="consignor",this.billingName="",this.billingAddress="",this.billingGSTIN="",this.billingPhone="",this.pickupType="consignor",this.pickupName="",this.pickupAddress="",this.pickupPhone="",this.deliveryType="consignee",this.deliveryName="",this.deliveryAddress="",this.deliveryPhone="",this.consignorTab="consignor",this.consigneeTab="consignee",this.selectedConsignorId=null,this.consignor="",this.consignorGST="",this.consignorAddress="",this.consignorPhone="",this.consignee="",this.consigneeGST="",this.consigneeAddress="",this.consigneePhone="",this.paymentMode="To Pay",this.externalRefId="",this.ewaybills=[{number:"",date:this.date,invoices:[{number:"",value:0,packages:[{type:"",amount:0}],products:[{type:"",amount:1,instock:1,intransitstock:0,deliveredstock:0}]}]}],this.charges={odc:0,unloading:0,docket:0,other:0,ccc:0,consignorDiscount:0},this.finalAmount=0,this.saveDraft(this.branch)}getCurrentConsignmentNumber(){this.branch&&"All Branches"!==this.branch?this.http.get(`http://localhost:3000/api/newshipments/nextConsignment?username=${encodeURIComponent(this.username)}&branch=${encodeURIComponent(this.branch)}`).subscribe({next:t=>{this.consignmentNumber=t.nextNumber.toString(),localStorage.setItem("consignmentNumber",this.consignmentNumber)},error:t=>console.error("Error fetching consignment number",t)}):this.consignmentNumber="nil"}saveShipment(){if(this.isSaving||!this.ensureProductAmounts())return;this.isSaving=!0;const t={username:localStorage.getItem("username"),branch:localStorage.getItem("branch"),shipmentStatus:this.shipmentStatus,shipmentStatusDetails:`${localStorage.getItem("username")}$$${this.date}$$${this.shipmentStatus}`,consignmentNumber:this.consignmentNumber,date:this.date,paymentMode:this.paymentMode,externalRefId:this.externalRefId,consignorTab:this.consignorTab,consignor:this.consignor,consignorGST:this.consignorGST,consignorAddress:this.consignorAddress,consignorPhone:this.consignorPhone,consigneeTab:this.consigneeTab,consignee:this.consignee,consigneeGST:this.consigneeGST,consigneeAddress:this.consigneeAddress,consigneePhone:this.consigneePhone,billingType:this.billingType,billingName:this.billingName,billingGSTIN:this.billingGSTIN,billingAddress:this.billingAddress,billingPhone:this.billingPhone,pickupType:this.pickupType,pickupName:this.pickupName,pickupAddress:this.pickupAddress,pickupPhone:this.pickupPhone,deliveryType:this.deliveryType,deliveryName:this.deliveryName,deliveryAddress:this.deliveryAddress,deliveryPhone:this.deliveryPhone,ewaybills:this.ewaybills,charges:this.charges,finalAmount:this.finalAmount};"guest"===this.consignorTab&&(t.consignorGST="GUEST"),"guest"===this.consigneeTab&&(t.consigneeGST="GUEST"),"consignor"===this.billingType&&(t.billingName=this.consignor,t.billingAddress=this.consignorAddress,t.billingGSTIN=this.consignorGST,t.billingPhone=this.consignorPhone),"consignor"===this.pickupType&&(t.pickupName=this.consignor,t.pickupAddress=this.consignorAddress,t.pickupPhone=this.consignorPhone),"consignee"===this.deliveryType&&(t.deliveryName=this.consignee,t.deliveryAddress=this.consigneeAddress,t.deliveryPhone=this.consigneePhone),"All Branches"!==t.branch?(t.ewaybills=this.sanitizeEwaybills(t.ewaybills),this.http.post("http://localhost:3000/api/newshipments/add?summary=true",t,{headers:{"Content-Type":"application/json"}}).subscribe({next:()=>{alert(`Shipment ${this.consignmentNumber} saved successfully!`),this.getCurrentConsignmentNumber(),this.resetForm(),this.clearDraft(this.branch),this.isSaving=!1},error:i=>{const o=i?.error?.message||i?.message||"Bad Request";o.includes("E11000")?(alert("Consignment number already used. Refreshing number and please try again."),this.getCurrentConsignmentNumber()):alert("Error: "+o),this.isSaving=!1}})):(alert("Please select a branch before saving."),this.isSaving=!1)}sanitizeEwaybills(t){return(t||[]).map(i=>({...i,invoices:(i.invoices||[]).map(o=>({...o,packages:(o.packages||[]).filter(r=>r?.type&&Number(r?.amount)>0),products:(o.products||[]).filter(r=>r?.type&&Number(r?.amount)>0)}))}))}ensureProductAmounts(){for(const t of this.ewaybills)for(const i of t.invoices||[])for(const o of i.products||[]){if(!o.amount||o.amount<=0)return alert("Please enter a quantity greater than 0 for all products."),!1;(!o.instock||o.instock<=0)&&(o.instock=o.amount)}return!0}onConsignorSelect(t){const i=this.clientList.find(o=>o.clientName===t);i&&(this.consignorGST=i.GSTIN,this.consignorAddress=i.address,this.consignorPhone=i.phoneNum,this.charges.consignorDiscount=i.perDis,this.selectedConsignorId=i._id,this.loadPricingSuggestions(i._id))}onConsigneeSelect(t){const i=this.clientList.find(o=>o.clientName===t);i&&(this.consigneeGST=i.GSTIN,this.consigneeAddress=i.address,this.consigneePhone=i.phoneNum)}onConsignorGuestSelect(t){const i=this.guestList.find(o=>o.guestName===t);i&&(this.consignorGST="GUEST",this.consignorAddress=i.address,this.consignorPhone=i.phoneNum,this.selectedConsignorId=null,this.loadPricingSuggestions(null))}onConsigneeGuestSelect(t){const i=this.guestList.find(o=>o.guestName===t);i&&(this.consigneeGST="GUEST",this.consigneeAddress=i.address,this.consigneePhone=i.phoneNum)}onPackageList(t){this.pkgList.find(i=>i.pkgName===t)}onProductList(t){this.productList.find(i=>i.productName===t)}formatClientOption(t){return`${t?.GSTIN||"-"} | ${t?.clientName||"-"} | ${t?.address||"-"}`}formatGuestOption(t){return`- | ${t?.guestName||"-"} | ${t?.address||"-"}`}loadPricingSuggestions(t){if(!this.branch||"All Branches"===this.branch)return;const i=t?`branch=${encodeURIComponent(this.branch)}&clientId=${t}`:`branch=${encodeURIComponent(this.branch)}`;this.http.get(`http://localhost:3000/api/pricing/suggestions?${i}`).subscribe({next:o=>{o?.pricing&&(this.productList=o.pricing.map(r=>({productName:r.productName,hsnNum:r.hsnNum,ratePerNum:r.ratePerNum,ratePerVolume:r.ratePerVolume,ratePerKg:r.ratePerKg,source:r.source})))},error:()=>{}})}openClientModal(){this.branch&&"All Branches"!==this.branch?(this.clientModalTab="add",this.newClient={clientName:"",address:"",city:"",state:"",pinCode:"",GSTIN:"",phoneNum:"",perDis:0,creditType:"no-credit",products:[],deliveryLocations:[{location:""}],status:"active",branch:this.branch},this.clientError="",this.editClientError="",this.selectedEditClientId="",this.showClientModal=!0):alert("Select a branch before adding a client.")}setClientModalTab(t){this.clientModalTab=t,"edit"===t&&this.loadEditableClients()}loadEditableClients(){!this.branch||"All Branches"===this.branch||this.http.get(`http://localhost:3000/api/clients?branch=${encodeURIComponent(this.branch)}`).subscribe({next:t=>this.editableClientList=t||[],error:()=>{this.editableClientList=[]}})}onEditClientSelect(t){const i=this.editableClientList.find(o=>o._id===t);i&&(this.editClient={_id:i._id,clientName:i.clientName||"",GSTIN:i.GSTIN||"",phoneNum:i.phoneNum||"",address:i.address||"",city:i.city||"",state:i.state||"",pinCode:i.pinCode||"",branch:i.branch||"",deliveryLocations:Array.isArray(i.deliveryLocations)?i.deliveryLocations.map(o=>({location:o.location||""})):[]},this.editClient.deliveryLocations.length||(this.editClient.deliveryLocations=[{location:""}]),this.editClientError="")}addEditDeliveryLocation(){Array.isArray(this.editClient.deliveryLocations)||(this.editClient.deliveryLocations=[]),this.editClient.deliveryLocations.push({location:""})}removeEditDeliveryLocation(t){this.editClient.deliveryLocations.splice(t,1)}openGuestModal(){this.newGuest={guestName:"",address:"",city:"",state:"",pinCode:"",phoneNum:"",perDis:0},this.guestError="",this.showGuestModal=!0}saveNewClient(){this.clientError="",this.newClient.clientName&&this.newClient.address&&this.newClient.GSTIN&&this.newClient.phoneNum&&this.newClient.branch?"All Branches"!==this.newClient.branch?this.http.post("http://localhost:3000/api/clients/add",this.newClient).subscribe({next:t=>{this.clientList=[t,...this.clientList],this.consignor=t.clientName,this.onConsignorSelect(this.consignor),this.showClientModal=!1},error:t=>{this.clientError=t?.error?.message||"Failed to save client."}}):this.clientError="Select a specific branch before adding a client.":this.clientError="Please fill required fields (name, address, GSTIN, phone, branch)."}saveEditedClient(){if(this.editClientError="",!this.selectedEditClientId)return void(this.editClientError="Select a client to edit.");const t={deliveryLocations:(this.editClient.deliveryLocations||[]).filter(i=>i?.location)};this.http.put(`http://localhost:3000/api/clients/${this.selectedEditClientId}`,t).subscribe({next:()=>{this.showClientModal=!1},error:i=>{this.editClientError=i?.error?.message||"Failed to update client."}})}saveNewGuest(){this.guestError="",this.newGuest.guestName&&this.newGuest.address&&this.newGuest.phoneNum?this.http.post("http://localhost:3000/api/guests/add",this.newGuest).subscribe({next:t=>{this.guestList=[t,...this.guestList],"guest"===this.consignorTab&&(this.consignor=t.guestName,this.onConsignorGuestSelect(this.consignor)),this.showGuestModal=!1},error:t=>{this.guestError=t?.error?.message||"Failed to save guest."}}):this.guestError="Please fill required fields (name, address, phone)."}closeModals(){this.showClientModal=!1,this.showGuestModal=!1}addClientProduct(){this.newClient.products.push({hsnNum:"",productName:"",ratePerNum:0,ratePerVolume:0,ratePerKg:0})}removeClientProduct(t){this.newClient.products.splice(t,1)}addDeliveryLocation(){this.newClient.deliveryLocations.push({location:""})}removeDeliveryLocation(t){this.newClient.deliveryLocations.splice(t,1)}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-new-shipment"]],hostBindings:function(i,o){1&i&&I("beforeunload",function(){return o.onBeforeUnload()},0,vy)},standalone:!0,features:[Fe],decls:205,vars:52,consts:[[1,"page-shell"],[1,"page-header"],[1,"eyebrow"],[1,"subhead"],[1,"meta-stack"],[1,"chip-field"],["type","date",3,"ngModelChange","ngModel"],[1,"layout"],[1,"col"],[1,"card"],[1,"card-head"],[1,"grid-2"],["readonly","",3,"ngModelChange","ngModel"],["placeholder","Optional reference ID",3,"ngModelChange","ngModel"],[1,"pill"],[1,"grid-2","party-grid"],[1,"panel"],[1,"panel-head"],[1,"tab-buttons"],[3,"click"],["class","panel-body",4,"ngIf"],[1,"panel","soft"],[1,"tab-buttons","ghost"],["class","muted small-text",4,"ngIf"],[1,"tiny-btn","primary","black",3,"click"],["class","ewaybill",4,"ngFor","ngForOf"],[1,"inline-actions",2,"margin-top","8px"],[1,"muted"],[3,"ngModelChange","ngModel"],[1,"charges-grid"],["type","number",3,"ngModelChange","ngModel"],["type","number","placeholder","% Discount",3,"ngModelChange","ngModel"],["type","number","readonly","",3,"ngModelChange","ngModel"],[1,"action-bar"],[1,"summary"],[1,"action-buttons"],[1,"ghost",3,"click"],[1,"primary",3,"click","disabled"],["class","modal-backdrop",4,"ngIf"],[1,"panel-body"],[1,"inline-actions"],[1,"tiny-btn",3,"click"],["type","search","list","consignor-client-list",3,"ngModelChange","change","ngModel"],["id","consignor-client-list"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngModelChange","change","ngModel"],["type","search","list","consignee-client-list",3,"ngModelChange","change","ngModel"],["id","consignee-client-list"],[1,"muted","small-text"],[1,"ewaybill"],[1,"line-header"],[1,"icon-btn",3,"click"],[1,"grid-3","compact"],["placeholder","Customer Eway-bill No",3,"ngModelChange","ngModel"],["class","invoice-block",4,"ngFor","ngForOf"],[1,"tiny-btn","primary","ghost",3,"click"],[1,"invoice-block"],["placeholder","Customer INV No",3,"ngModelChange","ngModel"],["type","number","placeholder","Value",3,"ngModelChange","ngModel"],[1,"subsection"],[1,"subsection-title"],["class","compact-row",4,"ngFor","ngForOf"],[1,"compact-row"],["type","number","placeholder","Qty",3,"ngModelChange","ngModel"],[1,"modal-backdrop"],[1,"modal"],[1,"modal-head"],[1,"tab-buttons",2,"margin-bottom","12px"],[4,"ngIf"],[1,"grid-3"],["placeholder","City",3,"ngModelChange","ngModel"],["placeholder","State",3,"ngModelChange","ngModel"],["placeholder","PIN",3,"ngModelChange","ngModel"],["class","inline-fields",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"modal-actions"],[1,"inline-fields"],["placeholder","Delivery Address",1,"flex-1",3,"ngModelChange","ngModel"],[1,"error"],["value",""],[3,"click","disabled"],["readonly","",3,"ngModel"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"header",1)(2,"div")(3,"p",2),h(4,"Operations"),u(),l(5,"h1"),h(6,"New Shipment"),u(),l(7,"p",3),h(8,"Create and save a shipment with consignor/consignee, items, and charges."),u()(),l(9,"div",4)(10,"div",5)(11,"span"),h(12,"Branch"),u(),l(13,"strong"),h(14),u()(),l(15,"div",5)(16,"span"),h(17,"Consignment No."),u(),l(18,"strong"),h(19),u()(),l(20,"div",5)(21,"span"),h(22,"Date"),u(),l(23,"input",6),D("ngModelChange",function(s){return S(o.date,s)||(o.date=s),s}),u()()()(),l(24,"div",7)(25,"div",8)(26,"div",9)(27,"div",10)(28,"div")(29,"p",2),h(30,"Shipment"),u(),l(31,"h3"),h(32,"Shipment Details"),u()()(),l(33,"div",11)(34,"label"),h(35,"Consignment Number* "),l(36,"input",12),D("ngModelChange",function(s){return S(o.consignmentNumber,s)||(o.consignmentNumber=s),s}),u()(),l(37,"label"),h(38,"External Ref ID "),l(39,"input",13),D("ngModelChange",function(s){return S(o.externalRefId,s)||(o.externalRefId=s),s}),u()()()(),l(40,"div",9)(41,"div",10)(42,"div")(43,"p",2),h(44,"Parties"),u(),l(45,"h3"),h(46,"Sender & Receiver"),u()(),l(47,"div",14),h(48,"Branch scoped"),u()(),l(49,"div",15)(50,"div",16)(51,"div",17)(52,"h4"),h(53,"Consignor (Sender)"),u(),l(54,"div",18)(55,"button",19),I("click",function(){return o.consignorTab="consignor"}),h(56,"Client"),u(),l(57,"button",19),I("click",function(){return o.consignorTab="guest"}),h(58,"Guest"),u()()(),N(59,gU,11,2,"div",20)(60,_U,10,2,"div",20),u(),l(61,"div",16)(62,"div",17)(63,"h4"),h(64,"Consignee (Receiver)"),u(),l(65,"div",18)(66,"button",19),I("click",function(){return o.consigneeTab="consignee"}),h(67,"Client"),u(),l(68,"button",19),I("click",function(){return o.consigneeTab="guest"}),h(69,"Guest"),u()()(),N(70,yU,11,2,"div",20)(71,bU,10,2,"div",20),u()()(),l(72,"div",9)(73,"div",10)(74,"div")(75,"p",2),h(76,"Addresses"),u(),l(77,"h3"),h(78,"Billing, Pickup & Delivery"),u()()(),l(79,"div",11)(80,"div",21)(81,"div",17)(82,"h4"),h(83,"Billing"),u(),l(84,"div",22)(85,"button",19),I("click",function(){return o.billingType="consignor"}),h(86,"Use Consignor"),u(),l(87,"button",19),I("click",function(){return o.billingType="different"}),h(88,"Different"),u()()(),N(89,MU,13,4,"div",20)(90,wU,2,0,"div",23),u(),l(91,"div",21)(92,"div",17)(93,"h4"),h(94,"Pickup"),u(),l(95,"div",22)(96,"button",19),I("click",function(){return o.pickupType="consignor"}),h(97,"Use Consignor"),u(),l(98,"button",19),I("click",function(){return o.pickupType="different"}),h(99,"Different"),u()()(),N(100,DU,10,3,"div",20)(101,SU,2,0,"div",23),u()(),l(102,"div",21)(103,"div",17)(104,"h4"),h(105,"Delivery"),u(),l(106,"div",22)(107,"button",19),I("click",function(){return o.deliveryType="consignee"}),h(108,"Use Consignee"),u(),l(109,"button",19),I("click",function(){return o.deliveryType="different"}),h(110,"Different"),u()()(),N(111,IU,11,3,"div",20)(112,TU,2,0,"div",23),u()()(),l(113,"div",8)(114,"div",9)(115,"div",10)(116,"div")(117,"p",2),h(118,"Items"),u(),l(119,"h3"),h(120,"E-Waybills & Invoices"),u()(),l(121,"button",24),I("click",function(){return o.addEwaybill()}),h(122,"+ E-Waybill"),u()(),N(123,AU,12,4,"div",25),l(124,"div",26)(125,"span",27),h(126,"Need another e-waybill?"),u(),l(127,"button",24),I("click",function(){return o.addEwaybill()}),h(128,"+ E-Waybill"),u()()(),l(129,"div",9)(130,"div",10)(131,"div")(132,"p",2),h(133,"Money"),u(),l(134,"h3"),h(135,"Charges & Payment"),u()()(),l(136,"div",11)(137,"label"),h(138,"Payment Mode "),l(139,"select",28),D("ngModelChange",function(s){return S(o.paymentMode,s)||(o.paymentMode=s),s}),l(140,"option"),h(141,"To Pay"),u(),l(142,"option"),h(143,"Account Credit"),u(),l(144,"option"),h(145,"Paid"),u()()(),l(146,"label"),h(147,"Shipment Status "),l(148,"select",28),D("ngModelChange",function(s){return S(o.shipmentStatus,s)||(o.shipmentStatus=s),s}),l(149,"option"),h(150,"Pending"),u(),l(151,"option"),h(152,"In Transit"),u(),l(153,"option"),h(154,"Delivered"),u(),l(155,"option"),h(156,"Cancelled"),u()()()(),l(157,"div",29)(158,"label"),h(159,"ODC "),l(160,"input",30),D("ngModelChange",function(s){return S(o.charges.odc,s)||(o.charges.odc=s),s}),u()(),l(161,"label"),h(162,"Unloading "),l(163,"input",30),D("ngModelChange",function(s){return S(o.charges.unloading,s)||(o.charges.unloading=s),s}),u()(),l(164,"label"),h(165,"Docket "),l(166,"input",30),D("ngModelChange",function(s){return S(o.charges.docket,s)||(o.charges.docket=s),s}),u()(),l(167,"label"),h(168,"Other "),l(169,"input",30),D("ngModelChange",function(s){return S(o.charges.other,s)||(o.charges.other=s),s}),u()(),l(170,"label"),h(171,"CCC "),l(172,"input",30),D("ngModelChange",function(s){return S(o.charges.ccc,s)||(o.charges.ccc=s),s}),u()(),l(173,"label"),h(174,"Discount (Consignor) "),l(175,"input",31),D("ngModelChange",function(s){return S(o.charges.consignorDiscount,s)||(o.charges.consignorDiscount=s),s}),u()(),l(176,"label"),h(177,"Final Amount "),l(178,"input",32),D("ngModelChange",function(s){return S(o.finalAmount,s)||(o.finalAmount=s),s}),u()()()()()(),l(179,"div",33)(180,"div",34)(181,"div")(182,"span",2),h(183,"Consignment"),u(),l(184,"strong"),h(185),u()(),l(186,"div")(187,"span",2),h(188,"Branch"),u(),l(189,"strong"),h(190),u()(),l(191,"div")(192,"span",2),h(193,"Final Amount"),u(),l(194,"strong"),h(195),u()()(),l(196,"div",35)(197,"button",36),I("click",function(){return o.resetForm()}),h(198,"Reset"),u(),l(199,"button",36),I("click",function(){return o.calculateFinalAmount()}),h(200,"Calculate"),u(),l(201,"button",37),I("click",function(){return o.saveShipment()}),h(202),u()()()(),N(203,HU,14,6,"div",38)(204,$U,29,8,"div",38)),2&i&&(p(14),L(o.branch||"All Branches"),p(5),L(o.consignmentNumber),p(4),w("ngModel",o.date),p(13),w("ngModel",o.consignmentNumber),p(3),w("ngModel",o.externalRefId),p(16),Oe("active","consignor"===o.consignorTab),p(2),Oe("active","guest"===o.consignorTab),p(2),M("ngIf","consignor"===o.consignorTab),p(),M("ngIf","guest"===o.consignorTab),p(6),Oe("active","consignee"===o.consigneeTab),p(2),Oe("active","guest"===o.consigneeTab),p(2),M("ngIf","consignee"===o.consigneeTab),p(),M("ngIf","guest"===o.consigneeTab),p(14),Oe("active","consignor"===o.billingType),p(2),Oe("active","different"===o.billingType),p(2),M("ngIf","different"===o.billingType),p(),M("ngIf","consignor"===o.billingType),p(6),Oe("active","consignor"===o.pickupType),p(2),Oe("active","different"===o.pickupType),p(2),M("ngIf","different"===o.pickupType),p(),M("ngIf","consignor"===o.pickupType),p(6),Oe("active","consignee"===o.deliveryType),p(2),Oe("active","different"===o.deliveryType),p(2),M("ngIf","different"===o.deliveryType),p(),M("ngIf","consignee"===o.deliveryType),p(11),M("ngForOf",o.ewaybills),p(16),w("ngModel",o.paymentMode),p(9),w("ngModel",o.shipmentStatus),p(12),w("ngModel",o.charges.odc),p(3),w("ngModel",o.charges.unloading),p(3),w("ngModel",o.charges.docket),p(3),w("ngModel",o.charges.other),p(3),w("ngModel",o.charges.ccc),p(3),w("ngModel",o.charges.consignorDiscount),p(3),w("ngModel",o.finalAmount),p(7),L(o.consignmentNumber),p(5),L(o.branch),p(5),L(o.finalAmount||0),p(6),M("disabled",o.isSaving),p(),U(" ",o.isSaving?"Saving...":"Save"," "),p(),M("ngIf",o.showClientModal),p(),M("ngIf",o.showGuestModal))},dependencies:[Bt,Et,_t,yt,ci,li,rt,bn,Mn,ft,st],styles:["[_ngcontent-%COMP%]:root{--bg: #f6f8fb;--card: #ffffff;--border: #e5e7eb;--text: #000000;--muted: #000000;--primary: #2563eb;--primary-strong: #1e3a8a}.page-shell[_ngcontent-%COMP%]{max-width:1280px;margin:0 auto 72px;padding:24px;background:var(--bg);color:var(--text)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:16px;align-items:flex-start;margin-bottom:16px}.eyebrow[_ngcontent-%COMP%]{margin:0;font-size:12px;text-transform:uppercase;letter-spacing:.08em;color:var(--muted)}h1[_ngcontent-%COMP%]{margin:4px 0;font-size:26px}.subhead[_ngcontent-%COMP%]{margin:0;color:var(--muted);font-size:14px}.meta-stack[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.chip-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding:10px 12px;background:#eef2ff;border:1px solid #e0e7ff;border-radius:10px;min-width:160px}.chip-field[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:var(--muted)}.layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.1fr .9fr;gap:16px;align-items:start}.card[_ngcontent-%COMP%]{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:16px;box-shadow:0 4px 16px #0f172a0d}.card-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:12px}.pill[_ngcontent-%COMP%]{padding:6px 10px;border-radius:20px;background:#e0f2fe;color:#0ea5e9;font-weight:600;font-size:12px;white-space:nowrap}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}.grid-3[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px}label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-weight:600;font-size:13px;color:#1f2937}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:10px;border:1px solid var(--border);border-radius:8px;font-size:14px;color:var(--text);background:#fff}textarea[_ngcontent-%COMP%]{min-height:70px;resize:vertical}.tab-buttons[_ngcontent-%COMP%]{display:inline-flex;background:#e5e7eb;border-radius:8px;padding:4px;gap:4px}.tab-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:transparent;padding:6px 12px;border-radius:6px;cursor:pointer;color:var(--muted);font-weight:600}.tab-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff;color:var(--primary-strong);box-shadow:0 2px 8px #0f172a1f}.tab-buttons.ghost[_ngcontent-%COMP%]{background:#f8fafc}.party-grid[_ngcontent-%COMP%]{gap:12px}.panel[_ngcontent-%COMP%]{border:1px solid var(--border);border-radius:10px;padding:12px;background:#fff;display:flex;flex-direction:column;gap:8px}.panel.soft[_ngcontent-%COMP%]{background:#f8fafc}.panel-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:10px;align-items:center}.panel-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.inline-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:8px}.muted[_ngcontent-%COMP%]{color:var(--muted)}.muted[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text)}.small-text[_ngcontent-%COMP%]{font-size:12px}.tiny-btn[_ngcontent-%COMP%]{padding:8px 10px;border-radius:8px;border:1px solid var(--border);background:#fff;cursor:pointer;font-weight:600}.tiny-btn.primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border-color:var(--primary)}.tiny-btn.primary.black[_ngcontent-%COMP%]{background:#000;border-color:#000;color:#fff}.tiny-btn.primary.ghost[_ngcontent-%COMP%]{background:#eef2ff;color:var(--primary-strong)}.icon-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border);width:28px;height:28px;border-radius:6px;cursor:pointer;color:var(--muted)}.ewaybill[_ngcontent-%COMP%]{border:1px dashed var(--border);border-radius:12px;padding:12px;margin-bottom:12px;background:#f8fafc}.invoice-block[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border);border-radius:10px;padding:10px;margin-top:10px;display:flex;flex-direction:column;gap:10px}.line-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;justify-content:space-between;flex-wrap:wrap}.grid-3.compact[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}.compact-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 110px auto;gap:8px;align-items:center}.subsection[_ngcontent-%COMP%]{margin-top:8px;border:1px dashed var(--border);border-radius:10px;padding:10px;background:#fff}.subsection-title[_ngcontent-%COMP%]{font-weight:600;color:var(--muted);margin-bottom:8px}.charges-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:10px;margin-top:12px}.action-bar[_ngcontent-%COMP%]{position:sticky;bottom:0;display:flex;justify-content:space-between;align-items:center;gap:12px;padding:12px 16px;background:#fffffff2;border:1px solid var(--border);border-radius:12px;box-shadow:0 -4px 16px #0f172a14;margin-top:12px}.summary[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.summary[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}button.primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:1px solid var(--primary);padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}button.ghost[_ngcontent-%COMP%]{background:#f8fafc;color:var(--text);border:1px solid var(--border);padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;z-index:2000;padding:16px}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:16px;width:min(520px,100%);box-shadow:0 10px 40px #00000029;display:flex;flex-direction:column;gap:10px;max-height:90vh;overflow-y:auto}.modal-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:8px}.modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:70px}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px}.error[_ngcontent-%COMP%]{color:#b91c1c;font-size:12px}.inline-fields[_ngcontent-%COMP%]{display:flex;gap:8px;flex:1;min-width:260px}.inline-fields[_ngcontent-%COMP%]   .flex-1[_ngcontent-%COMP%]{flex:1;min-width:160px}.product-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:8px;align-items:center}@media (max-width: 1080px){.layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 720px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.grid-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}.meta-stack[_ngcontent-%COMP%], .action-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}@media (max-width: 520px){.grid-3[_ngcontent-%COMP%]{grid-template-columns:1fr}.inline-fields[_ngcontent-%COMP%]{flex-direction:column}.compact-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return e})();function qU(e,n){if(1&e){const t=A();l(0,"tr",13),I("click",function(){const o=y(t).$implicit;return C(m().openShipmentDetails(o))}),l(1,"td"),h(2),u(),l(3,"td"),h(4),u(),l(5,"td"),h(6),u(),l(7,"td"),h(8),u(),l(9,"td"),h(10),u()()}if(2&e){const t=n.$implicit,i=m();p(2),L(t.consignmentNumber),p(2),L(t.shipmentStatus),p(2),L(t.consignor),p(2),L(t.deliveryAddress),p(2),L(i.getInvoiceAmountTotal(t.invoices))}}function WU(e,n){if(1&e&&(l(0,"li")(1,"span",27),h(2),u(),l(3,"span",28),h(4),u(),l(5,"span",28),h(6),u()()),2&e){const t=n.$implicit;p(2),L(t.type),p(2),U("In Stock: ",t.instock,""),p(2),U("Total: ",t.amount,"")}}function QU(e,n){if(1&e&&(l(0,"div",23)(1,"div",24),h(2),u(),l(3,"ul",25),N(4,WU,7,3,"li",26),u()()),2&e){const t=n.$implicit;p(2),U("Invoice #",t.number,""),p(2),M("ngForOf",t.products)}}function ZU(e,n){if(1&e){const t=A();l(0,"div",14)(1,"div",15)(2,"button",16),I("click",function(){return y(t),C(m().closeShipmentDetails())}),h(3,"\xd7"),u(),l(4,"div",17)(5,"div")(6,"h2"),h(7,"Shipment Details"),u(),l(8,"p",18),h(9),u()(),l(10,"span",19),h(11),u()(),l(12,"div",20)(13,"p")(14,"strong"),h(15,"Consignment No.:"),u(),h(16),u(),l(17,"p")(18,"strong"),h(19,"Status:"),u(),h(20),u(),l(21,"p")(22,"strong"),h(23,"Consignor:"),u(),h(24),u(),l(25,"p")(26,"strong"),h(27,"Consignee:"),u(),h(28),u(),l(29,"p")(30,"strong"),h(31,"Delivery Address:"),u(),h(32),u(),l(33,"p")(34,"strong"),h(35,"Date:"),u(),h(36),Tr(37,"date"),u(),l(38,"p")(39,"strong"),h(40,"Products in stock:"),u(),h(41),u(),l(42,"p")(43,"strong"),h(44,"No. of Products:"),u(),h(45),u()(),l(46,"h3"),h(47,"Products"),u(),l(48,"div",21),N(49,QU,5,2,"div",22),u()()()}if(2&e){const t=m();p(9),U("Consignment ",t.selectedShipment.consignmentNumber,""),p(2),L(t.selectedShipment.shipmentStatus),p(5),U(" ",t.selectedShipment.consignmentNumber,""),p(4),U(" ",t.selectedShipment.shipmentStatus,""),p(4),U(" ",t.selectedShipment.consignor,""),p(4),U(" ",t.selectedShipment.consignee,""),p(4),U(" ",t.selectedShipment.deliveryAddress,""),p(4),U(" ",Er(37,11,t.selectedShipment.date,"short"),""),p(5),U(" ",t.getInStockAmountTotal(t.selectedShipment.invoices),""),p(4),U(" ",t.getInvoiceAmountTotal(t.selectedShipment.invoices),""),p(4),M("ngForOf",t.selectedShipment.invoices)}}let KU=(()=>{class e{constructor(t){this.http=t,this.shipments=[],this.filteredShipments=[],this.searchText="",this.filterDate="",this.filterStatus="",this.filterConsignor="",this.selectedShipment=null}ngOnInit(){this.loadShipments()}loadShipments(){this.http.get("http://localhost:3000/api/newshipments",{params:{username:localStorage.getItem("username")||"",branch:localStorage.getItem("branch")||"All Branches"}}).subscribe({next:t=>{const i=(t||[]).map(o=>({...o,invoices:this.flattenInvoices(o.ewaybills||o.invoices||[])}));this.shipments=i,this.filteredShipments=i},error:t=>console.error("Error loading shipments:",t)})}flattenInvoices(t){return(t||[]).flatMap(i=>i.invoices||[])}getProductTotal(t,i){return t?t.reduce((o,r)=>{const s=r.products?.reduce((a,c)=>a+Number(c[i]||0),0)||0;return o+Number(s||0)},0):0}getInStockAmountTotal(t){return this.getProductTotal(t,"instock")}getInvoiceAmountTotal(t){let i=0;return(t||[]).forEach(o=>{(o.products||[]).forEach(r=>{i+=Number(r.amount||0)})}),i}applyFilters(){this.filteredShipments=this.shipments.filter(t=>{const i=!this.searchText||t.consignmentNumber?.toLowerCase().includes(this.searchText.toLowerCase())||t.consignor?.toLowerCase().includes(this.searchText.toLowerCase()),o=!this.filterDate||new Date(t.date).toDateString()===new Date(this.filterDate).toDateString(),r=!this.filterStatus||t.shipmentStatus===this.filterStatus,s=!this.filterConsignor||t.consignor?.toLowerCase().includes(this.filterConsignor.toLowerCase());return i&&o&&r&&s})}openShipmentDetails(t){this.selectedShipment=t}closeShipmentDetails(){this.selectedShipment=null}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-view-shipments"]],standalone:!0,features:[Fe],decls:32,vars:6,consts:[[1,"shipments-container"],[1,"filters"],["type","text","placeholder","Search by consignment no. or consignor",3,"ngModelChange","input","ngModel"],["type","date",3,"ngModelChange","change","ngModel"],[3,"ngModelChange","change","ngModel"],["value",""],["value","Pending"],["value","In Transit"],["value","Delivered"],["type","text","placeholder","Filter by consignor",3,"ngModelChange","input","ngModel"],[1,"shipments-table"],[3,"click",4,"ngFor","ngForOf"],["class","modal details-modal",4,"ngIf"],[3,"click"],[1,"modal","details-modal"],[1,"modal-content","details-content"],["type","button",1,"details-close",3,"click"],[1,"details-header"],[1,"details-sub"],[1,"details-status"],[1,"shipment-details","details-grid"],[1,"details-products"],["class","details-invoice",4,"ngFor","ngForOf"],[1,"details-invoice"],[1,"details-invoice-title"],[1,"details-product-list"],[4,"ngFor","ngForOf"],[1,"product-name"],[1,"product-meta"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"h2"),h(2,"View Shipments"),u(),l(3,"div",1)(4,"input",2),D("ngModelChange",function(s){return S(o.searchText,s)||(o.searchText=s),s}),I("input",function(){return o.applyFilters()}),u(),l(5,"input",3),D("ngModelChange",function(s){return S(o.filterDate,s)||(o.filterDate=s),s}),I("change",function(){return o.applyFilters()}),u(),l(6,"select",4),D("ngModelChange",function(s){return S(o.filterStatus,s)||(o.filterStatus=s),s}),I("change",function(){return o.applyFilters()}),l(7,"option",5),h(8,"All Status"),u(),l(9,"option",6),h(10,"Pending"),u(),l(11,"option",7),h(12,"In Transit"),u(),l(13,"option",8),h(14,"Delivered"),u()(),l(15,"input",9),D("ngModelChange",function(s){return S(o.filterConsignor,s)||(o.filterConsignor=s),s}),I("input",function(){return o.applyFilters()}),u()(),l(16,"table",10)(17,"thead")(18,"tr")(19,"th"),h(20,"Consignment No."),u(),l(21,"th"),h(22,"Status"),u(),l(23,"th"),h(24,"Consignor"),u(),l(25,"th"),h(26,"Delivery Address"),u(),l(27,"th"),h(28,"No. of Products"),u()()(),l(29,"tbody"),N(30,qU,11,5,"tr",11),u()()(),N(31,ZU,50,14,"div",12)),2&i&&(p(4),w("ngModel",o.searchText),p(),w("ngModel",o.filterDate),p(),w("ngModel",o.filterStatus),p(9),w("ngModel",o.filterConsignor),p(15),M("ngForOf",o.filteredShipments),p(),M("ngIf",o.selectedShipment))},dependencies:[Bt,Et,_t,ru,yt,ci,li,rt,Mn,ft,st],styles:["[_nghost-%COMP%]{--page-bg: #f6f8fb;--card: #ffffff;--border: #e5e7eb;--text: #0f172a;--muted: #6b7280;--primary: #2563eb;--primary-strong: #1e3a8a}.shipments-container[_ngcontent-%COMP%]{padding:20px;color:var(--text)}.filters[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:15px}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:#fff;color:var(--text)}.shipments-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden}.shipments-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .shipments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid var(--border);padding:8px;text-align:left}.shipments-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;font-weight:600}.shipments-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8fafc;cursor:pointer}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;align-items:center;justify-content:center}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;width:500px;max-height:80vh;overflow-y:auto;border-radius:8px;position:relative}.close[_ngcontent-%COMP%]{position:absolute;right:15px;top:10px;font-size:24px;cursor:pointer}.details-modal[_ngcontent-%COMP%]{background:#0f172a8c}.details-content[_ngcontent-%COMP%]{background:var(--page-bg);color:var(--text);width:min(860px,92vw);max-height:85vh;border-radius:16px;border:1px solid var(--border);box-shadow:0 18px 40px #0f172a33}.details-close[_ngcontent-%COMP%]{position:absolute;right:18px;top:12px;background:transparent;border:none;font-size:24px;cursor:pointer;color:var(--muted)}.details-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:16px;gap:12px}.details-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px}.details-sub[_ngcontent-%COMP%]{margin:6px 0 0;color:var(--muted);font-size:13px}.details-status[_ngcontent-%COMP%]{background:#e0f2fe;color:#0ea5e9;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:600;white-space:nowrap}.details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px 16px;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px;margin-bottom:16px}.details-products[_ngcontent-%COMP%]{display:grid;gap:12px}.details-invoice[_ngcontent-%COMP%]{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px}.details-invoice-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:8px}.details-product-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:grid;gap:8px}.details-product-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;justify-content:space-between;border-bottom:1px solid var(--border);padding-bottom:6px}.details-product-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.product-name[_ngcontent-%COMP%]{font-weight:600}.product-meta[_ngcontent-%COMP%]{color:var(--muted);font-size:13px}@media (max-width: 700px){.details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.details-product-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}"]})}}return e})(),YU=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-admin"]],decls:2,vars:0,template:function(i,o){1&i&&(l(0,"h2"),h(1,"Admin"),u())},styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})(),JU=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-settings"]],decls:2,vars:0,template:function(i,o){1&i&&(l(0,"h2"),h(1,"Settings"),u())},styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})();function XU(e,n){1&e&&W(0,"img",20),2&e&&M("src",m().profile.photo,zh)}function e6(e,n){1&e&&(l(0,"span"),h(1,"No Photo"),u())}let t6=(()=>{class e{constructor(t){this.http=t,this.profile={name:"",photo:"",address:"",company:"",mobile:"",email:"",role:"",businessType:"",pricePerNumber:0,pricePerKg:0,pricePerArea:0}}ngOnInit(){this.loadProfile()}loadProfile(){const t=localStorage.getItem("email"),i=localStorage.getItem("username");this.http.get(`http://localhost:3000/api/profile?user=${i}&email=${t}`).subscribe({next:o=>{this.profile=o[0]||this.profile,console.log("Profile loaded:",this.profile)},error:o=>console.error("Error loading products:",o)})}onFileSelected(t){const i=t.target.files[0];if(i){const o=new FileReader;o.onload=()=>{this.profile.photo=o.result},o.readAsDataURL(i)}}saveProfile(){console.log("\u{1f4e4} Sending profile data:",this.profile),this.http.post("http://localhost:3000/api/profile/save",this.profile,{headers:{"Content-Type":"application/json"}}).subscribe({next:t=>{console.log("\u2705 Profile saved",t),alert("Profile saved successfully!")},error:t=>{console.error("\u274c Error saving profile:",t),alert("Error: "+t.error.message)}})}clearProfile(){this.profile={name:"",address:"",company:"",mobile:"",role:"",photo:"",businessType:""},console.log("Profile cleared locally.")}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-profile"]],standalone:!0,features:[Fe],decls:68,vars:14,consts:[[1,"profile-container"],[1,"profile-main"],[1,"photo-section"],[1,"photo-frame"],["alt","Profile Photo",3,"src",4,"ngIf"],[4,"ngIf"],["type","file",3,"change"],[1,"form-section"],[1,"form-row"],["placeholder","Enter address",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter company name",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter mobile number",3,"ngModelChange","ngModel"],["type","radio","value","5",3,"ngModelChange","ngModel"],["type","radio","value","12",3,"ngModelChange","ngModel"],["type","radio","value","18",3,"ngModelChange","ngModel"],[1,"pricing-section"],[1,"grid-3"],["type","number","placeholder","\u20b9",3,"ngModelChange","ngModel"],[1,"button-section"],[3,"click"],["alt","Profile Photo",3,"src"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),N(4,XU,1,1,"img",4)(5,e6,2,0,"span",5),u(),l(6,"input",6),I("change",function(s){return o.onFileSelected(s)}),u()(),l(7,"div",7)(8,"div",8)(9,"label"),h(10,"Name:"),u(),l(11,"span"),h(12),u()(),l(13,"div",8)(14,"label"),h(15,"Address:"),u(),l(16,"textarea",9),D("ngModelChange",function(s){return S(o.profile.address,s)||(o.profile.address=s),s}),u()(),l(17,"div",8)(18,"label"),h(19,"Company Name:"),u(),l(20,"input",10),D("ngModelChange",function(s){return S(o.profile.company,s)||(o.profile.company=s),s}),u()(),l(21,"div",8)(22,"label"),h(23,"Mobile Number:"),u(),l(24,"input",11),D("ngModelChange",function(s){return S(o.profile.mobile,s)||(o.profile.mobile=s),s}),u()(),l(25,"div",8)(26,"label"),h(27,"Email:"),u(),l(28,"span"),h(29),u()(),l(30,"div",8)(31,"label"),h(32,"Role:"),u(),l(33,"span"),h(34),u()()()(),l(35,"div",8)(36,"label"),h(37,"Type of Business:"),u(),l(38,"div")(39,"label")(40,"input",12),D("ngModelChange",function(s){return S(o.profile.businessType,s)||(o.profile.businessType=s),s}),u(),h(41," Goods Transport Agency (GTA) - 5% "),u(),l(42,"label")(43,"input",13),D("ngModelChange",function(s){return S(o.profile.businessType,s)||(o.profile.businessType=s),s}),u(),h(44," Parcel - 12% "),u(),l(45,"label")(46,"input",14),D("ngModelChange",function(s){return S(o.profile.businessType,s)||(o.profile.businessType=s),s}),u(),h(47," Courier - 18% "),u()()(),l(48,"div",15)(49,"h3"),h(50,"Standard Pricing"),u(),l(51,"div",16)(52,"label"),h(53,"Price per box (\u20b9) "),l(54,"input",17),D("ngModelChange",function(s){return S(o.profile.pricePerNumber,s)||(o.profile.pricePerNumber=s),s}),u()(),W(55,"br"),l(56,"label"),h(57,"Price per Kilogram (\u20b9) "),l(58,"input",17),D("ngModelChange",function(s){return S(o.profile.pricePerKg,s)||(o.profile.pricePerKg=s),s}),u()(),W(59,"br"),l(60,"label"),h(61,"Price per Area (cm\xb3 / sq units) (\u20b9) "),l(62,"input",17),D("ngModelChange",function(s){return S(o.profile.pricePerArea,s)||(o.profile.pricePerArea=s),s}),u()()()(),l(63,"div",18)(64,"button",19),I("click",function(){return o.saveProfile()}),h(65,"Save"),u(),l(66,"button",19),I("click",function(){return o.clearProfile()}),h(67,"Clear"),u()()()),2&i&&(p(4),M("ngIf",o.profile.photo),p(),M("ngIf",!o.profile.photo),p(7),L(o.profile.name),p(4),w("ngModel",o.profile.address),p(4),w("ngModel",o.profile.company),p(4),w("ngModel",o.profile.mobile),p(5),L(o.profile.email),p(5),L(o.profile.role),p(6),w("ngModel",o.profile.businessType),p(3),w("ngModel",o.profile.businessType),p(3),w("ngModel",o.profile.businessType),p(8),w("ngModel",o.profile.pricePerNumber),p(4),w("ngModel",o.profile.pricePerKg),p(4),w("ngModel",o.profile.pricePerArea))},dependencies:[Bt,_t,yt,rt,bn,Ku,ft,st,DB],styles:[".profile-container[_ngcontent-%COMP%]{max-width:900px;margin:auto;background:#f9f9f9;padding:20px;border-radius:10px;display:flex;flex-direction:column;gap:20px}.profile-main[_ngcontent-%COMP%]{display:flex;gap:30px;align-items:flex-start}.photo-section[_ngcontent-%COMP%]{flex:1;text-align:center}.photo-frame[_ngcontent-%COMP%]{width:150px;height:150px;border:2px solid #ccc;border-radius:50%;margin:auto;overflow:hidden;display:flex;align-items:center;justify-content:center;background:#eee}.photo-frame[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.photo-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-top:10px}.form-section[_ngcontent-%COMP%]{flex:2;display:grid;grid-template-columns:1fr 2fr;gap:15px 20px}.form-row[_ngcontent-%COMP%]{display:contents}.form-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;align-self:center}.form-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:8px;border-radius:5px;border:1px solid #ccc;width:100%}.button-section[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px}.button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer}.button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background:#2c3e50;color:#fff}.button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background:#e74c3c;color:#fff}"]})}}return e})();function n6(e,n){if(1&e){const t=A();l(0,"button",19),I("click",function(){y(t);const o=m().index;return C(m().removeVehicle(o))}),h(1,"\u{1f5d1}\ufe0f"),u()}}function i6(e,n){if(1&e){const t=A();l(0,"div",15)(1,"input",16),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.vehicleNo,o)||(r.vehicleNo=o),C(o)}),u(),l(2,"input",17),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.driverPhone,o)||(r.driverPhone=o),C(o)}),u(),N(3,n6,2,0,"button",18),u()}if(2&e){const t=n.$implicit,i=m();p(),w("ngModel",t.vehicleNo),p(),w("ngModel",t.driverPhone),p(),M("ngIf",i.newBranch.vehicles.length>1)}}function o6(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.branchName)}}function r6(e,n){if(1&e){const t=A();l(0,"input",25),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingBranch.branchName,o)||(r.editingBranch.branchName=o),C(o)}),u()}2&e&&w("ngModel",m(2).editingBranch.branchName)}function s6(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.address)}}function a6(e,n){if(1&e){const t=A();l(0,"input",25),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingBranch.address,o)||(r.editingBranch.address=o),C(o)}),u()}2&e&&w("ngModel",m(2).editingBranch.address)}function c6(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.city)}}function l6(e,n){if(1&e){const t=A();l(0,"input",25),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingBranch.city,o)||(r.editingBranch.city=o),C(o)}),u()}2&e&&w("ngModel",m(2).editingBranch.city)}function u6(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.state)}}function d6(e,n){if(1&e){const t=A();l(0,"input",25),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingBranch.state,o)||(r.editingBranch.state=o),C(o)}),u()}2&e&&w("ngModel",m(2).editingBranch.state)}function h6(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.pinCode)}}function f6(e,n){if(1&e){const t=A();l(0,"input",25),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingBranch.pinCode,o)||(r.editingBranch.pinCode=o),C(o)}),u()}2&e&&w("ngModel",m(2).editingBranch.pinCode)}function p6(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.phoneNum)}}function g6(e,n){if(1&e){const t=A();l(0,"input",25),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingBranch.phoneNum,o)||(r.editingBranch.phoneNum=o),C(o)}),u()}2&e&&w("ngModel",m(2).editingBranch.phoneNum)}function m6(e,n){if(1&e&&(l(0,"div"),h(1),u()),2&e){const t=n.$implicit;p(),tt(" \u{1f69a} ",t.vehicleNo," \u2014 \u{1f4de} ",t.driverPhone," ")}}function _6(e,n){if(1&e&&(l(0,"div"),N(1,m6,2,2,"div",14),u()),2&e){const t=m().$implicit;p(),M("ngForOf",t.vehicles)}}function v6(e,n){if(1&e){const t=A();l(0,"button",19),I("click",function(){y(t);const o=m().index;return C(m(3).removeVehicleEdit(o))}),h(1,"\u{1f5d1}\ufe0f"),u()}}function y6(e,n){if(1&e){const t=A();l(0,"div",15)(1,"input",16),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.vehicleNo,o)||(r.vehicleNo=o),C(o)}),u(),l(2,"input",17),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.driverPhone,o)||(r.driverPhone=o),C(o)}),u(),N(3,v6,2,0,"button",18),u()}if(2&e){const t=n.$implicit,i=m(3);p(),w("ngModel",t.vehicleNo),p(),w("ngModel",t.driverPhone),p(),M("ngIf",i.editingBranch.vehicles.length>1)}}function C6(e,n){if(1&e){const t=A();l(0,"div",26),N(1,y6,4,3,"div",10),l(2,"button",11),I("click",function(){return y(t),C(m(2).addVehicleEdit())}),h(3,"+ Vehicle"),u()()}if(2&e){const t=m(2);p(),M("ngForOf",t.editingBranch.vehicles)}}function b6(e,n){if(1&e){const t=A();l(0,"button",23),I("click",function(){y(t);const o=m().$implicit;return C(m().editBranch(o))}),h(1,"Edit"),u()}}function M6(e,n){if(1&e){const t=A();l(0,"button",23),I("click",function(){return y(t),C(m(2).saveEdit())}),h(1,"Save"),u()}}function w6(e,n){if(1&e){const t=A();l(0,"tr")(1,"td"),N(2,o6,2,1,"span",20)(3,r6,1,1,"input",21),u(),l(4,"td"),N(5,s6,2,1,"span",20)(6,a6,1,1,"input",21),u(),l(7,"td"),N(8,c6,2,1,"span",20)(9,l6,1,1,"input",21),u(),l(10,"td"),N(11,u6,2,1,"span",20)(12,d6,1,1,"input",21),u(),l(13,"td"),N(14,h6,2,1,"span",20)(15,f6,1,1,"input",21),u(),l(16,"td"),N(17,p6,2,1,"span",20)(18,g6,1,1,"input",21),u(),l(19,"td"),N(20,_6,2,1,"div",20)(21,C6,4,1,"div",22),u(),l(22,"td")(23,"button",23),I("click",function(){const o=y(t).$implicit;return C(m().toggleStatus(o))}),h(24),u()(),l(25,"td"),N(26,b6,2,0,"button",24)(27,M6,2,0,"button",24),u()()}if(2&e){const t=n.$implicit,i=m();p(2),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)!==t._id),p(),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)===t._id),p(2),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)!==t._id),p(),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)===t._id),p(2),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)!==t._id),p(),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)===t._id),p(2),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)!==t._id),p(),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)===t._id),p(2),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)!==t._id),p(),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)===t._id),p(2),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)!==t._id),p(),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)===t._id),p(2),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)!==t._id),p(),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)===t._id),p(3),U(" ","active"===t.status?"Deactivate":"Activate"," "),p(2),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)!==t._id),p(),M("ngIf",(null==i.editingBranch?null:i.editingBranch._id)===t._id)}}let D6=(()=>{class e{constructor(t){this.http=t,this.branches=[],this.newBranch={branchName:"",address:"",city:"",state:"",pinCode:"",phoneNum:"",vehicles:[{vehicleNo:"",driverPhone:""}],status:"active"},this.editingBranch=null}ngOnInit(){localStorage.setItem("branch","All Branches"),this.loadBranches()}loadBranches(){this.http.get("http://localhost:3000/api/branches").subscribe({next:t=>{this.branches=t},error:t=>console.error("Error loading branches:",t)})}addVehicle(){this.newBranch.vehicles.push({vehicleNo:"",driverPhone:""})}removeVehicle(t){this.newBranch.vehicles.splice(t,1)}addVehicleEdit(){this.editingBranch.vehicles.push({vehicleNo:"",driverPhone:""})}removeVehicleEdit(t){this.editingBranch.vehicles.splice(t,1)}addBranch(){if(!this.newBranch.branchName||!this.newBranch.address||!this.newBranch.phoneNum)return void alert("Branch Name, Address, and Branch Phone are required.");if(Array.isArray(this.newBranch.vehicles)&&this.newBranch.vehicles.some(r=>(r?.vehicleNo||r?.driverPhone)&&!(r?.vehicleNo&&r?.driverPhone)))return void alert("Each vehicle must have both Vehicle No. and Driver Phone (or leave the row empty).");const i=Array.isArray(this.newBranch.vehicles)?this.newBranch.vehicles.filter(r=>r?.vehicleNo&&r?.driverPhone):[];this.http.post("http://localhost:3000/api/branches/add",{branchName:this.newBranch.branchName,address:this.newBranch.address,city:this.newBranch.city,state:this.newBranch.state,pinCode:this.newBranch.pinCode,phoneNum:this.newBranch.phoneNum,vehicles:i},{headers:{"Content-Type":"application/json"}}).subscribe({next:()=>{alert("Branch added successfully!"),this.loadBranches(),this.resetNewBranch()},error:r=>{console.error("Error saving branch:",r),alert("Error: "+(r?.error?.message||r?.message||"Bad Request"))}})}resetNewBranch(){this.newBranch={branchName:"",address:"",city:"",state:"",pinCode:"",phoneNum:"",vehicles:[{vehicleNo:"",driverPhone:""}],status:"active"}}editBranch(t){this.editingBranch=JSON.parse(JSON.stringify(t))}saveEdit(){this.http.put(`http://localhost:3000/api/branches/${this.editingBranch._id}`,this.editingBranch).subscribe({next:()=>{alert("Branch updated successfully!"),this.editingBranch=null,this.loadBranches()},error:t=>{console.error("Error updating branch:",t),alert("Error: "+(t?.error?.message||t?.message||"Bad Request"))}})}toggleStatus(t){this.http.patch(`http://localhost:3000/api/branches/${t._id}/status`,{}).subscribe(()=>{this.loadBranches()})}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-branch"]],standalone:!0,features:[Fe],decls:40,vars:8,consts:[[1,"branches-container"],[1,"add-branch-form"],["placeholder","Branch Name","required","",3,"ngModelChange","ngModel"],["placeholder","Address","required","",3,"ngModelChange","ngModel"],["placeholder","City",3,"ngModelChange","ngModel"],["placeholder","State",3,"ngModelChange","ngModel"],["placeholder","Pin Code",3,"ngModelChange","ngModel"],["placeholder","Branch Phone","required","",3,"ngModelChange","ngModel"],[1,"vehicle-wrapper"],[1,"vehicle-label"],["class","vehicle-row",4,"ngFor","ngForOf"],[1,"add-vehicle-btn",3,"click"],[1,"add-btn",3,"click"],[1,"branches-table-wrapper"],[4,"ngFor","ngForOf"],[1,"vehicle-row"],["placeholder","Vehicle No.",3,"ngModelChange","ngModel"],["placeholder","Driver Phone",3,"ngModelChange","ngModel"],["class","remove-btn",3,"click",4,"ngIf"],[1,"remove-btn",3,"click"],[4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["class","vehicle-edit-wrapper",4,"ngIf"],[3,"click"],[3,"click",4,"ngIf"],[3,"ngModelChange","ngModel"],[1,"vehicle-edit-wrapper"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"h2"),h(2,"Manage Branches"),u(),l(3,"div",1)(4,"input",2),D("ngModelChange",function(s){return S(o.newBranch.branchName,s)||(o.newBranch.branchName=s),s}),u(),l(5,"input",3),D("ngModelChange",function(s){return S(o.newBranch.address,s)||(o.newBranch.address=s),s}),u(),l(6,"input",4),D("ngModelChange",function(s){return S(o.newBranch.city,s)||(o.newBranch.city=s),s}),u(),l(7,"input",5),D("ngModelChange",function(s){return S(o.newBranch.state,s)||(o.newBranch.state=s),s}),u(),l(8,"input",6),D("ngModelChange",function(s){return S(o.newBranch.pinCode,s)||(o.newBranch.pinCode=s),s}),u(),l(9,"input",7),D("ngModelChange",function(s){return S(o.newBranch.phoneNum,s)||(o.newBranch.phoneNum=s),s}),u(),l(10,"div",8)(11,"label",9),h(12,"Vehicles & Drivers"),u(),N(13,i6,4,3,"div",10),l(14,"button",11),I("click",function(){return o.addVehicle()}),h(15,"+ Add Vehicle"),u()(),l(16,"button",12),I("click",function(){return o.addBranch()}),h(17,"+ Add Branch"),u()(),l(18,"div",13)(19,"table")(20,"tr")(21,"th"),h(22,"Branch Name"),u(),l(23,"th"),h(24,"Address"),u(),l(25,"th"),h(26,"City"),u(),l(27,"th"),h(28,"State"),u(),l(29,"th"),h(30,"Pin"),u(),l(31,"th"),h(32,"Phone"),u(),l(33,"th"),h(34,"Vehicles & Drivers"),u(),l(35,"th"),h(36,"Status"),u(),l(37,"th"),h(38,"Actions"),u()(),N(39,w6,28,17,"tr",14),u()()()),2&i&&(p(4),w("ngModel",o.newBranch.branchName),p(),w("ngModel",o.newBranch.address),p(),w("ngModel",o.newBranch.city),p(),w("ngModel",o.newBranch.state),p(),w("ngModel",o.newBranch.pinCode),p(),w("ngModel",o.newBranch.phoneNum),p(4),M("ngForOf",o.newBranch.vehicles),p(26),M("ngForOf",o.branches))},dependencies:[Bt,Et,_t,yt,rt,ft,wn,st],styles:[".contact-row[_ngcontent-%COMP%], .compact-contact[_ngcontent-%COMP%]{display:flex;gap:6px}.delete-small[_ngcontent-%COMP%]{background-color:#fdd;border:1px solid red;padding:2px 6px;cursor:pointer}.tiny-btn[_ngcontent-%COMP%]{margin-top:5px;font-size:12px;padding:3px 8px;cursor:pointer}.active-btn[_ngcontent-%COMP%]{background:#3cb371;color:#fff}.inactive-btn[_ngcontent-%COMP%]{background:#777;color:#fff}"]})}}return e})();const S6=(e,n)=>({"active-btn":e,"inactive-btn":n});function I6(e,n){if(1&e){const t=A();l(0,"button",22),I("click",function(){y(t);const o=m().index;return C(m().removeAddress(o))}),h(1,"\u{1f5d1}\ufe0f"),u()}}function T6(e,n){if(1&e){const t=A();l(0,"button",22),I("click",function(){y(t);const o=m().index,r=m().index;return C(m().removeVehicle(r,o))}),h(1,"\u{1f5d1}\ufe0f"),u()}}function E6(e,n){if(1&e){const t=A();l(0,"div",23)(1,"input",24),D("ngModelChange",function(o){const r=y(t).index,s=m().$implicit;return S(s.vehicles[r].vehicleNo,o)||(s.vehicles[r].vehicleNo=o),C(o)}),u(),l(2,"input",25),D("ngModelChange",function(o){const r=y(t).index,s=m().$implicit;return S(s.vehicles[r].driverPhone,o)||(s.vehicles[r].driverPhone=o),C(o)}),u(),N(3,T6,2,0,"button",18),u()}if(2&e){const t=n.index,i=m().$implicit;p(),w("ngModel",i.vehicles[t].vehicleNo),p(),w("ngModel",i.vehicles[t].driverPhone),p(),M("ngIf",i.vehicles.length>1)}}function N6(e,n){if(1&e){const t=A();l(0,"div",15)(1,"div",16)(2,"input",17),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.location,o)||(r.location=o),C(o)}),u(),N(3,I6,2,0,"button",18),u(),l(4,"div",19)(5,"label"),h(6,"Vehicles for this address"),u(),N(7,E6,4,3,"div",20),l(8,"button",21),I("click",function(){const o=y(t).index;return C(m().addVehicle(o))}),h(9,"+ Add Vehicle"),u()()()}if(2&e){const t=n.$implicit,i=m();p(2),w("ngModel",t.location),p(),M("ngIf",i.newHub.deliveryAddresses.length>1),p(4),M("ngForOf",t.vehicles)}}function x6(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.hubName)}}function k6(e,n){if(1&e){const t=A();l(0,"input",32),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingHub.hubName,o)||(r.editingHub.hubName=o),C(o)}),u()}2&e&&w("ngModel",m(2).editingHub.hubName)}function P6(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.address)}}function A6(e,n){if(1&e){const t=A();l(0,"input",32),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingHub.address,o)||(r.editingHub.address=o),C(o)}),u()}2&e&&w("ngModel",m(2).editingHub.address)}function O6(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.city)}}function R6(e,n){if(1&e){const t=A();l(0,"input",32),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingHub.city,o)||(r.editingHub.city=o),C(o)}),u()}2&e&&w("ngModel",m(2).editingHub.city)}function F6(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.phoneNum)}}function L6(e,n){if(1&e){const t=A();l(0,"input",32),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingHub.phoneNum,o)||(r.editingHub.phoneNum=o),C(o)}),u()}2&e&&w("ngModel",m(2).editingHub.phoneNum)}function V6(e,n){if(1&e&&(l(0,"div",41),h(1),u()),2&e){const t=n.$implicit;p(),tt(" \u{1f69b} ",t.vehicleNo," \u2014 \u{1f4de} ",t.driverPhone," ")}}function B6(e,n){if(1&e&&(l(0,"div",39),N(1,V6,2,2,"div",40),u()),2&e){const t=m().$implicit;p(),M("ngForOf",t.vehicles)}}function j6(e,n){1&e&&(l(0,"div",42),h(1," \u2014 No vehicles assigned \u2014 "),u())}function U6(e,n){if(1&e&&(l(0,"div",35)(1,"div",36),h(2),u(),N(3,B6,2,1,"div",37)(4,j6,2,0,"div",38),u()),2&e){const t=n.$implicit;p(2),U("\u{1f4cd} ",t.location,""),p(),M("ngIf",null==t.vehicles?null:t.vehicles.length),p(),M("ngIf",!t.vehicles||0===t.vehicles.length)}}function H6(e,n){if(1&e&&(l(0,"div",33),N(1,U6,5,3,"div",34),u()),2&e){const t=m().$implicit;p(),M("ngForOf",t.deliveryAddresses)}}function G6(e,n){if(1&e){const t=A();l(0,"button",22),I("click",function(){y(t);const o=m().index;return C(m(3).removeAddressEdit(o))}),h(1,"\u{1f5d1}\ufe0f"),u()}}function $6(e,n){if(1&e){const t=A();l(0,"button",22),I("click",function(){y(t);const o=m().index,r=m().index;return C(m(3).removeVehicleEdit(r,o))}),h(1,"\u{1f5d1}\ufe0f"),u()}}function z6(e,n){if(1&e){const t=A();l(0,"div",23)(1,"input",24),D("ngModelChange",function(o){const r=y(t).index,s=m().index,a=m(3);return S(a.editingHub.deliveryAddresses[s].vehicles[r].vehicleNo,o)||(a.editingHub.deliveryAddresses[s].vehicles[r].vehicleNo=o),C(o)}),u(),l(2,"input",25),D("ngModelChange",function(o){const r=y(t).index,s=m().index,a=m(3);return S(a.editingHub.deliveryAddresses[s].vehicles[r].driverPhone,o)||(a.editingHub.deliveryAddresses[s].vehicles[r].driverPhone=o),C(o)}),u(),N(3,$6,2,0,"button",18),u()}if(2&e){const t=n.index,i=m().index,o=m(3);p(),w("ngModel",o.editingHub.deliveryAddresses[i].vehicles[t].vehicleNo),p(),w("ngModel",o.editingHub.deliveryAddresses[i].vehicles[t].driverPhone),p(),M("ngIf",o.editingHub.deliveryAddresses[i].vehicles.length>1)}}function q6(e,n){if(1&e){const t=A();l(0,"div",45)(1,"div",16)(2,"input",17),D("ngModelChange",function(o){const r=y(t).index,s=m(3);return S(s.editingHub.deliveryAddresses[r].location,o)||(s.editingHub.deliveryAddresses[r].location=o),C(o)}),u(),N(3,G6,2,0,"button",18),u(),l(4,"div",46)(5,"label"),h(6,"Vehicles"),u(),N(7,z6,4,3,"div",20),l(8,"button",21),I("click",function(){const o=y(t).index;return C(m(3).addVehicleEdit(o))}),h(9,"+ Add Vehicle"),u()()()}if(2&e){const t=n.$implicit,i=n.index,o=m(3);p(2),w("ngModel",o.editingHub.deliveryAddresses[i].location),p(),M("ngIf",o.editingHub.deliveryAddresses.length>1),p(4),M("ngForOf",t.vehicles)}}function W6(e,n){if(1&e){const t=A();l(0,"div",43),N(1,q6,10,3,"div",44),l(2,"button",11),I("click",function(){return y(t),C(m(2).addAddressEdit())}),h(3,"+ Add Address"),u()()}if(2&e){const t=m(2);p(),M("ngForOf",t.editingHub.deliveryAddresses)}}function Q6(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),U("",t.perRev,"%")}}function Z6(e,n){if(1&e){const t=A();l(0,"input",32),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingHub.perRev,o)||(r.editingHub.perRev=o),C(o)}),u()}2&e&&w("ngModel",m(2).editingHub.perRev)}function K6(e,n){if(1&e){const t=A();l(0,"button",47),I("click",function(){y(t);const o=m().$implicit;return C(m().editHub(o))}),h(1,"Edit"),u()}}function Y6(e,n){if(1&e){const t=A();l(0,"button",47),I("click",function(){return y(t),C(m(2).saveEdit())}),h(1,"Save"),u()}}function J6(e,n){if(1&e){const t=A();l(0,"tr")(1,"td"),N(2,x6,2,1,"span",26)(3,k6,1,1,"input",27),u(),l(4,"td"),N(5,P6,2,1,"span",26)(6,A6,1,1,"input",27),u(),l(7,"td"),N(8,O6,2,1,"span",26)(9,R6,1,1,"input",27),u(),l(10,"td"),N(11,F6,2,1,"span",26)(12,L6,1,1,"input",27),u(),l(13,"td"),N(14,H6,2,1,"div",28)(15,W6,4,1,"div",29),u(),l(16,"td"),N(17,Q6,2,1,"span",26)(18,Z6,1,1,"input",27),u(),l(19,"td")(20,"button",30),I("click",function(){const o=y(t).$implicit;return C(m().toggleStatus(o))}),h(21),u()(),l(22,"td"),N(23,K6,2,0,"button",31)(24,Y6,2,0,"button",31),u()()}if(2&e){const t=n.$implicit,i=m();p(2),M("ngIf",(null==i.editingHub?null:i.editingHub._id)!==t._id),p(),M("ngIf",(null==i.editingHub?null:i.editingHub._id)===t._id),p(2),M("ngIf",(null==i.editingHub?null:i.editingHub._id)!==t._id),p(),M("ngIf",(null==i.editingHub?null:i.editingHub._id)===t._id),p(2),M("ngIf",(null==i.editingHub?null:i.editingHub._id)!==t._id),p(),M("ngIf",(null==i.editingHub?null:i.editingHub._id)===t._id),p(2),M("ngIf",(null==i.editingHub?null:i.editingHub._id)!==t._id),p(),M("ngIf",(null==i.editingHub?null:i.editingHub._id)===t._id),p(2),M("ngIf",(null==i.editingHub?null:i.editingHub._id)!==t._id),p(),M("ngIf",(null==i.editingHub?null:i.editingHub._id)===t._id),p(2),M("ngIf",(null==i.editingHub?null:i.editingHub._id)!==t._id),p(),M("ngIf",(null==i.editingHub?null:i.editingHub._id)===t._id),p(2),M("ngClass",function bM(e,n,t,i,o){return wM(k(),wt(),e,n,t,i,o)}(16,S6,"active"===t.status,"inactive"===t.status)),p(),U(" ","active"===t.status?"Active":"Inactive"," "),p(2),M("ngIf",(null==i.editingHub?null:i.editingHub._id)!==t._id),p(),M("ngIf",(null==i.editingHub?null:i.editingHub._id)===t._id)}}let X6=(()=>{class e{constructor(t){this.http=t,this.hubs=[],this.newHub={hubName:"",address:"",city:"",state:"",pinCode:"",phoneNum:"",perRev:"",branch:localStorage.getItem("branch")||"All Branches",deliveryAddresses:[{location:"",vehicles:[{vehicleNo:"",driverPhone:""}]}],status:"active"},this.editingHub=null}ngOnInit(){localStorage.setItem("branch","All Branches"),this.newHub.branch=localStorage.getItem("branch")||"All Branches",this.loadHubs()}loadHubs(){this.http.get("http://localhost:3000/api/hubs").subscribe({next:t=>{console.log("Hubs loaded:",t),this.hubs=t},error:t=>console.error("Error loading hubs:",t)})}addHub(){this.newHub.branch=localStorage.getItem("branch")||"All Branches",this.http.post("http://localhost:3000/api/hubs/add",this.newHub).subscribe({next:()=>{alert("Hub added successfully!"),this.loadHubs(),this.resetForm()},error:t=>{console.error("Error saving hub:",t),alert("Error: "+t.error?.message)}})}resetForm(){this.newHub={hubName:"",address:"",city:"",state:"",pinCode:"",phoneNum:"",perRev:"",branch:localStorage.getItem("branch")||"All Branches",deliveryAddresses:[{location:"",vehicles:[{vehicleNo:"",driverPhone:""}]}],status:"active"}}addAddress(){this.newHub.deliveryAddresses.push({location:"",vehicles:[{vehicleNo:"",driverPhone:""}]})}removeAddress(t){this.newHub.deliveryAddresses.splice(t,1)}addVehicle(t){this.newHub.deliveryAddresses[t].vehicles.push({vehicleNo:"",driverPhone:""})}removeVehicle(t,i){this.newHub.deliveryAddresses[t].vehicles.splice(i,1)}editHub(t){this.editingHub=JSON.parse(JSON.stringify(t))}addAddressEdit(){this.editingHub.deliveryAddresses.push({location:"",vehicles:[{vehicleNo:"",driverPhone:""}]})}removeAddressEdit(t){this.editingHub.deliveryAddresses.splice(t,1)}addVehicleEdit(t){this.editingHub.deliveryAddresses[t].vehicles.push({vehicleNo:"",driverPhone:""})}removeVehicleEdit(t,i){this.editingHub.deliveryAddresses[t].vehicles.splice(i,1)}saveEdit(){this.http.put(`http://localhost:3000/api/hubs/${this.editingHub._id}`,this.editingHub).subscribe({next:()=>{this.loadHubs(),this.editingHub=null},error:t=>alert("Update failed!")})}toggleStatus(t){this.http.patch(`http://localhost:3000/api/hubs/${t._id}/status`,{status:"active"===t.status?"inactive":"active"}).subscribe(()=>this.loadHubs())}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-hub"]],standalone:!0,features:[Fe],decls:41,vars:9,consts:[[1,"hubs-container"],[1,"add-hub-form"],["placeholder","Hub Name","required","",3,"ngModelChange","ngModel"],["placeholder","Address","required","",3,"ngModelChange","ngModel"],["placeholder","City",3,"ngModelChange","ngModel"],["placeholder","State",3,"ngModelChange","ngModel"],["placeholder","Pin Code",3,"ngModelChange","ngModel"],["placeholder","Phone Number","required","",3,"ngModelChange","ngModel"],["placeholder","% of Revenue","required","",3,"ngModelChange","ngModel"],[1,"delivery-wrapper"],["class","addr-block",4,"ngFor","ngForOf"],[1,"add-addr-btn",3,"click"],[1,"add-btn",3,"click"],[1,"hubs-table-wrapper"],[4,"ngFor","ngForOf"],[1,"addr-block"],[1,"addr-row"],["placeholder","Address / Location",3,"ngModelChange","ngModel"],["class","delete-btn",3,"click",4,"ngIf"],[1,"vehicles-for-address"],["class","vehicle-row",4,"ngFor","ngForOf"],[1,"add-vehicle-btn",3,"click"],[1,"delete-btn",3,"click"],[1,"vehicle-row"],["placeholder","Vehicle No",3,"ngModelChange","ngModel"],["placeholder","Driver Phone",3,"ngModelChange","ngModel"],[4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["class","addr-list-view",4,"ngIf"],["class","addr-list-edit",4,"ngIf"],[3,"click","ngClass"],[3,"click",4,"ngIf"],[3,"ngModelChange","ngModel"],[1,"addr-list-view"],["class","addr-view-block",4,"ngFor","ngForOf"],[1,"addr-view-block"],[1,"addr-title"],["class","vehicles-list-view",4,"ngIf"],["class","no-vehicles",4,"ngIf"],[1,"vehicles-list-view"],["class","vehicle-view",4,"ngFor","ngForOf"],[1,"vehicle-view"],[1,"no-vehicles"],[1,"addr-list-edit"],["class","addr-edit-block",4,"ngFor","ngForOf"],[1,"addr-edit-block"],[1,"vehicles-for-address-edit"],[3,"click"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"h2"),h(2,"Manage Hubs"),u(),l(3,"div",1)(4,"input",2),D("ngModelChange",function(s){return S(o.newHub.hubName,s)||(o.newHub.hubName=s),s}),u(),l(5,"input",3),D("ngModelChange",function(s){return S(o.newHub.address,s)||(o.newHub.address=s),s}),u(),l(6,"input",4),D("ngModelChange",function(s){return S(o.newHub.city,s)||(o.newHub.city=s),s}),u(),l(7,"input",5),D("ngModelChange",function(s){return S(o.newHub.state,s)||(o.newHub.state=s),s}),u(),l(8,"input",6),D("ngModelChange",function(s){return S(o.newHub.pinCode,s)||(o.newHub.pinCode=s),s}),u(),l(9,"input",7),D("ngModelChange",function(s){return S(o.newHub.phoneNum,s)||(o.newHub.phoneNum=s),s}),u(),l(10,"input",8),D("ngModelChange",function(s){return S(o.newHub.perRev,s)||(o.newHub.perRev=s),s}),u(),l(11,"div",9)(12,"label"),h(13,"Delivery / Pickup Addresses"),u(),N(14,N6,10,3,"div",10),l(15,"button",11),I("click",function(){return o.addAddress()}),h(16,"+ Add Address"),u()(),l(17,"button",12),I("click",function(){return o.addHub()}),h(18,"+ Add Hub"),u()(),l(19,"div",13)(20,"table")(21,"thead")(22,"tr")(23,"th"),h(24,"Hub Name"),u(),l(25,"th"),h(26,"Address"),u(),l(27,"th"),h(28,"City"),u(),l(29,"th"),h(30,"Phone"),u(),l(31,"th"),h(32,"Delivery / Pickup (with Vehicles)"),u(),l(33,"th"),h(34,"% of Revenue"),u(),l(35,"th"),h(36,"Status"),u(),l(37,"th"),h(38,"Actions"),u()()(),l(39,"tbody"),N(40,J6,25,19,"tr",14),u()()()()),2&i&&(p(4),w("ngModel",o.newHub.hubName),p(),w("ngModel",o.newHub.address),p(),w("ngModel",o.newHub.city),p(),w("ngModel",o.newHub.state),p(),w("ngModel",o.newHub.pinCode),p(),w("ngModel",o.newHub.phoneNum),p(),w("ngModel",o.newHub.perRev),p(4),M("ngForOf",o.newHub.deliveryAddresses),p(26),M("ngForOf",o.hubs))},dependencies:[Bt,Jp,Et,_t,yt,rt,ft,wn,st],styles:[".hubs-container[_ngcontent-%COMP%]{padding:15px;max-width:100%;box-sizing:border-box}.hubs-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;vertical-align:top}.edit-field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.edit-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;max-width:200px;margin-bottom:5px;box-sizing:border-box}"]})}}return e})();function eH(e,n){if(1&e){const t=A();l(0,"div",21),h(1),l(2,"span",22),I("click",function(){const o=y(t).index;return C(m().removeVehicle(o))}),h(3,"\xd7"),u()()}if(2&e){const t=n.$implicit;p(),tt(" ",t.number," | ",t.phone," ")}}function tH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.partnerName)}}function nH(e,n){if(1&e){const t=A();l(0,"input",27),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editing.partnerName,o)||(r.editing.partnerName=o),C(o)}),u()}2&e&&w("ngModel",m(2).editing.partnerName)}function iH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.GSTIN)}}function oH(e,n){if(1&e){const t=A();l(0,"input",27),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editing.GSTIN,o)||(r.editing.GSTIN=o),C(o)}),u()}2&e&&w("ngModel",m(2).editing.GSTIN)}function rH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.address)}}function sH(e,n){if(1&e){const t=A();l(0,"div",28)(1,"input",29),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editing.address,o)||(r.editing.address=o),C(o)}),u(),l(2,"input",6),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editing.city,o)||(r.editing.city=o),C(o)}),u(),l(3,"input",7),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editing.state,o)||(r.editing.state=o),C(o)}),u(),l(4,"input",8),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editing.pinCode,o)||(r.editing.pinCode=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editing.address),p(),w("ngModel",t.editing.city),p(),w("ngModel",t.editing.state),p(),w("ngModel",t.editing.pinCode)}}function aH(e,n){if(1&e&&(l(0,"div",31),h(1),W(2,"br"),h(3),u()),2&e){const t=n.$implicit;p(),U(" ",t.number," "),p(2),U(" ",t.phone," ")}}function cH(e,n){if(1&e&&(l(0,"div"),N(1,aH,4,2,"div",30),u()),2&e){const t=m().$implicit;p(),M("ngForOf",t.vehicleNumbers)}}function lH(e,n){if(1&e){const t=A();l(0,"div",35)(1,"input",27),D("ngModelChange",function(o){const r=y(t).index,s=m(3);return S(s.editing.vehicleNumbers[r].number,o)||(s.editing.vehicleNumbers[r].number=o),C(o)}),u(),l(2,"input",27),D("ngModelChange",function(o){const r=y(t).index,s=m(3);return S(s.editing.vehicleNumbers[r].phone,o)||(s.editing.vehicleNumbers[r].phone=o),C(o)}),u(),l(3,"button",16),I("click",function(){const o=y(t).index;return C(m(3).removeEditingVehicle(o))}),h(4,"-"),u()()}if(2&e){const t=n.index,i=m(3);p(),w("ngModel",i.editing.vehicleNumbers[t].number),p(),w("ngModel",i.editing.vehicleNumbers[t].phone)}}function uH(e,n){if(1&e){const t=A();l(0,"div"),N(1,lH,5,2,"div",32),l(2,"input",33),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editVehicleField.number,o)||(r.editVehicleField.number=o),C(o)}),u(),l(3,"input",34),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editVehicleField.phone,o)||(r.editVehicleField.phone=o),C(o)}),u(),l(4,"button",16),I("click",function(){return y(t),C(m(2).addEditingVehicle())}),h(5,"+ Veh"),u()()}if(2&e){const t=m(2);p(),M("ngForOf",t.editing.vehicleNumbers),p(),w("ngModel",t.editVehicleField.number),p(),w("ngModel",t.editVehicleField.phone)}}function dH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),tt(" ",t.rateValue," / ","km"===t.rateType?"Km":"Day"," ")}}function hH(e,n){if(1&e){const t=A();l(0,"div")(1,"select",27),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editing.rateType,o)||(r.editing.rateType=o),C(o)}),l(2,"option",10),h(3,"Rate / Km"),u(),l(4,"option",11),h(5,"Rate / Day"),u()(),l(6,"input",36),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editing.rateValue,o)||(r.editing.rateValue=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editing.rateType),p(5),w("ngModel",t.editing.rateValue)}}function fH(e,n){if(1&e){const t=A();l(0,"button",16),I("click",function(){y(t);const o=m().$implicit;return C(m().editPartner(o))}),h(1,"Edit"),u()}}function pH(e,n){if(1&e){const t=A();l(0,"button",16),I("click",function(){return y(t),C(m(2).saveEdit())}),h(1,"Save"),u()}}function gH(e,n){if(1&e){const t=A();l(0,"tr")(1,"td"),N(2,tH,2,1,"span",23)(3,nH,1,1,"input",24),u(),l(4,"td"),N(5,iH,2,1,"span",23)(6,oH,1,1,"input",24),u(),l(7,"td"),N(8,rH,2,1,"span",23)(9,sH,5,4,"div",25),u(),l(10,"td"),N(11,cH,2,1,"div",23)(12,uH,6,3,"div",23),u(),l(13,"td"),N(14,dH,2,2,"span",23)(15,hH,7,2,"div",23),u(),l(16,"td")(17,"button",16),I("click",function(){const o=y(t).$implicit;return C(m().toggleStatus(o))}),h(18),u()(),l(19,"td"),N(20,fH,2,0,"button",26)(21,pH,2,0,"button",26),u()()}if(2&e){const t=n.$implicit,i=m();p(2),M("ngIf",(null==i.editing?null:i.editing._id)!==t._id),p(),M("ngIf",(null==i.editing?null:i.editing._id)===t._id),p(2),M("ngIf",(null==i.editing?null:i.editing._id)!==t._id),p(),M("ngIf",(null==i.editing?null:i.editing._id)===t._id),p(2),M("ngIf",(null==i.editing?null:i.editing._id)!==t._id),p(),M("ngIf",(null==i.editing?null:i.editing._id)===t._id),p(2),M("ngIf",(null==i.editing?null:i.editing._id)!==t._id),p(),M("ngIf",(null==i.editing?null:i.editing._id)===t._id),p(2),M("ngIf",(null==i.editing?null:i.editing._id)!==t._id),p(),M("ngIf",(null==i.editing?null:i.editing._id)===t._id),p(2),Oe("active","active"===t.status)("inactive","active"!==t.status),p(),U(" ","active"===t.status?"Active":"Inactive"," "),p(2),M("ngIf",(null==i.editing?null:i.editing._id)!==t._id),p(),M("ngIf",(null==i.editing?null:i.editing._id)===t._id)}}let mH=(()=>{class e{constructor(t){this.http=t,this.partners=[],this.newPartner={partnerName:"",address:"",city:"",state:"",pinCode:"",GSTIN:"",vehicleNumbers:[],rateType:"km",rateValue:0,status:"active"},this.newVehicle={number:"",phone:""},this.editVehicleField={number:"",phone:""},this.editing=null}ngOnInit(){this.loadPartners()}addVehicle(){this.newVehicle.number.trim()&&this.newVehicle.phone.trim()&&(this.newPartner.vehicleNumbers.push({...this.newVehicle}),this.newVehicle={number:"",phone:""})}removeVehicle(t){this.newPartner.vehicleNumbers.splice(t,1)}addEditingVehicle(){this.editVehicleField.number.trim()&&this.editVehicleField.phone.trim()&&(this.editing.vehicleNumbers.push({...this.editVehicleField}),this.editVehicleField={number:"",phone:""})}removeEditingVehicle(t){this.editing.vehicleNumbers.splice(t,1)}loadPartners(){this.http.get("http://localhost:3000/api/tpartners").subscribe(t=>this.partners=t)}addPartner(){this.http.post("http://localhost:3000/api/tpartners/add",this.newPartner).subscribe({next:()=>{alert("Transport Partner added!"),this.loadPartners(),this.resetForm()},error:t=>alert(t.error.message)})}resetForm(){this.newPartner={partnerName:"",address:"",city:"",state:"",pinCode:"",GSTIN:"",vehicleNumbers:[],rateType:"km",rateValue:0,status:"active"}}editPartner(t){this.editing=JSON.parse(JSON.stringify(t))}saveEdit(){this.http.put(`http://localhost:3000/api/tpartners/${this.editing._id}`,this.editing).subscribe(()=>{alert("Updated Successfully"),this.editing=null,this.loadPartners()})}toggleStatus(t){this.http.patch(`http://localhost:3000/api/tpartners/${t._id}/status`,{}).subscribe(()=>this.loadPartners())}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-transport-partner"]],standalone:!0,features:[Fe],decls:48,vars:12,consts:[[1,"tpartner-container"],[1,"add-partner-form"],[1,"form-row"],["placeholder","Partner Name*","required","",3,"ngModelChange","ngModel"],["placeholder","GSTIN*","required","",3,"ngModelChange","ngModel"],["placeholder","Address*","required","",3,"ngModelChange","ngModel"],["placeholder","City",3,"ngModelChange","ngModel"],["placeholder","State",3,"ngModelChange","ngModel"],["placeholder","Pin Code",3,"ngModelChange","ngModel"],["required","",3,"ngModelChange","ngModel"],["value","km"],["value","day"],["type","number","placeholder","Rate Value*","required","",3,"ngModelChange","ngModel"],[1,"vehicle-entry"],["placeholder","Vehicle Number",3,"ngModelChange","ngModel"],["placeholder","Driver Phone",3,"ngModelChange","ngModel"],[3,"click"],["class","vehicle-tag",4,"ngFor","ngForOf"],[1,"btn-add",3,"click"],[1,"tpartner-table-wrapper"],[4,"ngFor","ngForOf"],[1,"vehicle-tag"],[1,"delete-tag",3,"click"],[4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["class","edit-field",4,"ngIf"],[3,"click",4,"ngIf"],[3,"ngModelChange","ngModel"],[1,"edit-field"],["placeholder","Address",3,"ngModelChange","ngModel"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],["class","tag-edit",4,"ngFor","ngForOf"],["placeholder","Vehicle",3,"ngModelChange","ngModel"],["placeholder","Phone",3,"ngModelChange","ngModel"],[1,"tag-edit"],["type","number",3,"ngModelChange","ngModel"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"h2"),h(2,"Transport Partners"),u(),l(3,"div",1)(4,"div",2)(5,"input",3),D("ngModelChange",function(s){return S(o.newPartner.partnerName,s)||(o.newPartner.partnerName=s),s}),u(),l(6,"input",4),D("ngModelChange",function(s){return S(o.newPartner.GSTIN,s)||(o.newPartner.GSTIN=s),s}),u()(),l(7,"div",2)(8,"input",5),D("ngModelChange",function(s){return S(o.newPartner.address,s)||(o.newPartner.address=s),s}),u(),l(9,"input",6),D("ngModelChange",function(s){return S(o.newPartner.city,s)||(o.newPartner.city=s),s}),u()(),l(10,"div",2)(11,"input",7),D("ngModelChange",function(s){return S(o.newPartner.state,s)||(o.newPartner.state=s),s}),u(),l(12,"input",8),D("ngModelChange",function(s){return S(o.newPartner.pinCode,s)||(o.newPartner.pinCode=s),s}),u()(),l(13,"div",2)(14,"label"),h(15,"Rate Type "),l(16,"select",9),D("ngModelChange",function(s){return S(o.newPartner.rateType,s)||(o.newPartner.rateType=s),s}),l(17,"option",10),h(18,"Rate / Km"),u(),l(19,"option",11),h(20,"Rate / Day"),u()()(),l(21,"input",12),D("ngModelChange",function(s){return S(o.newPartner.rateValue,s)||(o.newPartner.rateValue=s),s}),u()(),l(22,"div",13)(23,"input",14),D("ngModelChange",function(s){return S(o.newVehicle.number,s)||(o.newVehicle.number=s),s}),u(),l(24,"input",15),D("ngModelChange",function(s){return S(o.newVehicle.phone,s)||(o.newVehicle.phone=s),s}),u(),l(25,"button",16),I("click",function(){return o.addVehicle()}),h(26,"+ Vehicle"),u()(),N(27,eH,4,2,"div",17),l(28,"button",18),I("click",function(){return o.addPartner()}),h(29,"+ Add Partner"),u()(),l(30,"div",19)(31,"table")(32,"tr")(33,"th"),h(34,"Partner"),u(),l(35,"th"),h(36,"GSTIN"),u(),l(37,"th"),h(38,"Address"),u(),l(39,"th"),h(40,"Vehicles"),u(),l(41,"th"),h(42,"Rate"),u(),l(43,"th"),h(44,"Status"),u(),l(45,"th"),h(46,"Actions"),u()(),N(47,gH,22,17,"tr",20),u()()()),2&i&&(p(5),w("ngModel",o.newPartner.partnerName),p(),w("ngModel",o.newPartner.GSTIN),p(2),w("ngModel",o.newPartner.address),p(),w("ngModel",o.newPartner.city),p(2),w("ngModel",o.newPartner.state),p(),w("ngModel",o.newPartner.pinCode),p(4),w("ngModel",o.newPartner.rateType),p(5),w("ngModel",o.newPartner.rateValue),p(2),w("ngModel",o.newVehicle.number),p(),w("ngModel",o.newVehicle.phone),p(3),M("ngForOf",o.newPartner.vehicleNumbers),p(20),M("ngForOf",o.partners))},dependencies:[Bt,Et,_t,yt,ci,li,rt,bn,Mn,ft,wn,st],styles:[".tpartner-container[_ngcontent-%COMP%]{width:100%;padding:10px}.add-partner-form[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;flex-direction:column;gap:8px}.add-partner-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-partner-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px;font-size:14px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px}.vehicle-entry[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap}.vehicle-tag[_ngcontent-%COMP%]{background:#e0f3ff;padding:3px 6px;border-radius:4px;display:inline-block;margin:3px;font-size:12px}.delete-tag[_ngcontent-%COMP%]{cursor:pointer;font-size:12px;color:red}.btn-add[_ngcontent-%COMP%]{background:#0069ff;color:#fff;border-radius:4px;padding:6px;width:fit-content}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:6px;border:1px solid #ccc}.active[_ngcontent-%COMP%]{background:green;color:#fff}.inactive[_ngcontent-%COMP%]{background:#000;color:#fff}.tag-edit[_ngcontent-%COMP%], .tag[_ngcontent-%COMP%]{background:#f2f2f2;padding:4px;margin-bottom:4px;border-radius:4px}.edit-field[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:6px}@media (max-width: 720px){.form-row[_ngcontent-%COMP%], .edit-field[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return e})(),_H=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-notifications"]],decls:2,vars:0,template:function(i,o){1&i&&(l(0,"h2"),h(1,"Notifications"),u())},styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})();function vH(e,n){if(1&e){const t=A();l(0,"div",24)(1,"input",25),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.location,o)||(r.location=o),C(o)}),u(),l(2,"button",21),I("click",function(){const o=y(t).index;return C(m(2).removeDeliveryLocation(o))}),h(3,"Remove"),u()()}if(2&e){const t=n.$implicit;p(),w("ngModel",t.location)}}function yH(e,n){if(1&e&&(l(0,"option",33),h(1),u()),2&e){const t=n.$implicit;M("value",t.productName),p(),tt(" ",t.hsnNum," - ",t.productName," ")}}function CH(e,n){if(1&e){const t=A();l(0,"div",26)(1,"select",27),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.productName,o)||(r.productName=o),C(o)}),I("change",function(){const o=y(t).$implicit;return C(m(2).onProductSelect(o))}),l(2,"option",28),h(3,"Select Product"),u(),N(4,yH,2,3,"option",29),u(),W(5,"br"),l(6,"label"),h(7,"Rate per Box:"),u(),l(8,"input",30),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.ratePerNum,o)||(r.ratePerNum=o),C(o)}),u(),W(9,"br"),l(10,"label"),h(11,"Rate per Volume cm3:"),u(),l(12,"input",31),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.ratePerVolume,o)||(r.ratePerVolume=o),C(o)}),u(),W(13,"br"),l(14,"label"),h(15,"Rate per Kilogram:"),u(),l(16,"input",32),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.ratePerKg,o)||(r.ratePerKg=o),C(o)}),u(),W(17,"br"),l(18,"button",21),I("click",function(){const o=y(t).index;return C(m(2).removeProduct(o))}),h(19,"Remove"),u()()}if(2&e){const t=n.$implicit,i=m(2);p(),w("ngModel",t.productName),p(3),M("ngForOf",i.productOptions),p(4),w("ngModel",t.ratePerNum),p(4),w("ngModel",t.ratePerVolume),p(4),w("ngModel",t.ratePerKg)}}function bH(e,n){if(1&e){const t=A();l(0,"div",5)(1,"div",6)(2,"span",7),I("click",function(){return y(t),C(m().closeAddClientPopup())}),h(3,"\xd7"),u(),l(4,"h3"),h(5,"Add New Client"),u(),l(6,"div",8)(7,"input",9),D("ngModelChange",function(o){y(t);const r=m();return S(r.newClient.clientName,o)||(r.newClient.clientName=o),C(o)}),u(),l(8,"input",10),D("ngModelChange",function(o){y(t);const r=m();return S(r.newClient.address,o)||(r.newClient.address=o),C(o)}),u(),l(9,"input",11),D("ngModelChange",function(o){y(t);const r=m();return S(r.newClient.city,o)||(r.newClient.city=o),C(o)}),u(),l(10,"input",12),D("ngModelChange",function(o){y(t);const r=m();return S(r.newClient.state,o)||(r.newClient.state=o),C(o)}),u(),l(11,"input",13),D("ngModelChange",function(o){y(t);const r=m();return S(r.newClient.pinCode,o)||(r.newClient.pinCode=o),C(o)}),u(),l(12,"input",14),D("ngModelChange",function(o){y(t);const r=m();return S(r.newClient.GSTIN,o)||(r.newClient.GSTIN=o),C(o)}),u(),l(13,"input",15),D("ngModelChange",function(o){y(t);const r=m();return S(r.newClient.phoneNum,o)||(r.newClient.phoneNum=o),C(o)}),u(),l(14,"input",16),D("ngModelChange",function(o){y(t);const r=m();return S(r.newClient.perDis,o)||(r.newClient.perDis=o),C(o)}),u(),l(15,"select",17),D("ngModelChange",function(o){y(t);const r=m();return S(r.newClient.creditType,o)||(r.newClient.creditType=o),C(o)}),l(16,"option",18),h(17,"No Credit"),u(),l(18,"option",19),h(19,"Credit Allowed"),u()(),l(20,"h4"),h(21,"Delivery Locations"),u(),N(22,vH,4,1,"div",20),l(23,"button",21),I("click",function(){return y(t),C(m().addDeliveryLocation())}),h(24,"+ Add Delivery Location"),u(),W(25,"br")(26,"br"),l(27,"h4"),h(28,"Product Pricing"),u(),N(29,CH,20,5,"div",22),l(30,"button",21),I("click",function(){return y(t),C(m().addProduct())}),h(31,"+ Add Product"),u(),W(32,"br")(33,"br"),l(34,"button",23),I("click",function(){return y(t),C(m().addClient())}),h(35,"+ Add Client"),u()()()()}if(2&e){const t=m();p(7),w("ngModel",t.newClient.clientName),p(),w("ngModel",t.newClient.address),p(),w("ngModel",t.newClient.city),p(),w("ngModel",t.newClient.state),p(),w("ngModel",t.newClient.pinCode),p(),w("ngModel",t.newClient.GSTIN),p(),w("ngModel",t.newClient.phoneNum),p(),w("ngModel",t.newClient.perDis),p(),w("ngModel",t.newClient.creditType),p(7),M("ngForOf",t.newClient.deliveryLocations),p(7),M("ngForOf",t.newClient.products)}}function MH(e,n){if(1&e&&(l(0,"div"),h(1),u()),2&e){const t=n.$implicit;p(),U(" \u{1f4e6} ",t.location," ")}}function wH(e,n){if(1&e){const t=A();l(0,"tr")(1,"td"),h(2),u(),l(3,"td"),h(4),u(),l(5,"td"),h(6),u(),l(7,"td"),h(8),u(),l(9,"td"),h(10),u(),l(11,"td"),h(12),u(),l(13,"td"),h(14),u(),l(15,"td"),h(16),u(),l(17,"td")(18,"button",34),I("click",function(){const o=y(t).$implicit;return C(m().toggleCreditType(o))}),h(19),u()(),l(20,"td"),N(21,MH,2,1,"div",4),u(),l(22,"td")(23,"button",34),I("click",function(){const o=y(t).$implicit;return C(m().toggleStatus(o))}),h(24),u()(),l(25,"td")(26,"button",23),I("click",function(){const o=y(t).$implicit;return C(m().openEditClientPopup(o))}),h(27,"Edit"),u()()()}if(2&e){const t=n.$implicit;p(2),L(t.clientName),p(2),L(t.address),p(2),L(t.city),p(2),L(t.state),p(2),L(t.pinCode),p(2),L(t.GSTIN),p(2),L(t.phoneNum),p(2),L(t.perDis),p(2),M("ngClass","credit"===t.creditType?"credit-active":"credit-inactive"),p(),U(" ","credit"===t.creditType?"Credit \u2714":"No Credit"," "),p(2),M("ngForOf",t.deliveryLocations),p(2),M("ngClass","active"===t.status?"status-active":"status-inactive"),p(),U(" ","active"===t.status?"Active":"Deactivated"," ")}}function DH(e,n){if(1&e){const t=A();l(0,"div",24)(1,"input",25),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.location,o)||(r.location=o),C(o)}),u(),l(2,"button",21),I("click",function(){const o=y(t).index;return C(m(2).removeDeliveryLocationEdit(o))}),h(3,"Remove"),u()()}if(2&e){const t=n.$implicit;p(),w("ngModel",t.location)}}function SH(e,n){if(1&e&&(l(0,"option",33),h(1),u()),2&e){const t=n.$implicit;M("value",t.productName),p(),tt(" ",t.hsnNum," - ",t.productName," ")}}function IH(e,n){if(1&e){const t=A();l(0,"div",26)(1,"select",27),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.productName,o)||(r.productName=o),C(o)}),I("change",function(){const o=y(t).$implicit;return C(m(2).onProductSelect(o))}),l(2,"option",28),h(3,"Select Product"),u(),N(4,SH,2,3,"option",29),u(),W(5,"br"),l(6,"label"),h(7,"Rate per Box:"),u(),l(8,"input",30),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.ratePerNum,o)||(r.ratePerNum=o),C(o)}),u(),W(9,"br"),l(10,"label"),h(11,"Rate per Volume cm3:"),u(),l(12,"input",31),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.ratePerVolume,o)||(r.ratePerVolume=o),C(o)}),u(),W(13,"br"),l(14,"label"),h(15,"Rate per Kilogram:"),u(),l(16,"input",32),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.ratePerKg,o)||(r.ratePerKg=o),C(o)}),u(),W(17,"br"),l(18,"button",21),I("click",function(){const o=y(t).index;return C(m(2).removeProductEdit(o))}),h(19,"Remove"),u()()}if(2&e){const t=n.$implicit,i=m(2);p(),w("ngModel",t.productName),p(3),M("ngForOf",i.productOptions),p(4),w("ngModel",t.ratePerNum),p(4),w("ngModel",t.ratePerVolume),p(4),w("ngModel",t.ratePerKg)}}function TH(e,n){if(1&e){const t=A();l(0,"div",5)(1,"div",6)(2,"span",7),I("click",function(){return y(t),C(m().closeEditClientPopup())}),h(3,"\xd7"),u(),l(4,"h3"),h(5,"Edit Client"),u(),l(6,"div",8)(7,"input",9),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingClient.clientName,o)||(r.editingClient.clientName=o),C(o)}),u(),l(8,"input",10),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingClient.address,o)||(r.editingClient.address=o),C(o)}),u(),l(9,"input",11),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingClient.city,o)||(r.editingClient.city=o),C(o)}),u(),l(10,"input",12),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingClient.state,o)||(r.editingClient.state=o),C(o)}),u(),l(11,"input",13),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingClient.pinCode,o)||(r.editingClient.pinCode=o),C(o)}),u(),l(12,"input",14),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingClient.GSTIN,o)||(r.editingClient.GSTIN=o),C(o)}),u(),l(13,"input",15),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingClient.phoneNum,o)||(r.editingClient.phoneNum=o),C(o)}),u(),l(14,"input",16),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingClient.perDis,o)||(r.editingClient.perDis=o),C(o)}),u(),l(15,"select",17),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingClient.creditType,o)||(r.editingClient.creditType=o),C(o)}),l(16,"option",18),h(17,"No Credit"),u(),l(18,"option",19),h(19,"Credit Allowed"),u()(),l(20,"h4"),h(21,"Delivery Locations"),u(),N(22,DH,4,1,"div",20),l(23,"button",21),I("click",function(){return y(t),C(m().addDeliveryLocationEdit())}),h(24,"+ Add Delivery Location"),u(),W(25,"br")(26,"br"),l(27,"h4"),h(28,"Product Pricing"),u(),N(29,IH,20,5,"div",22),l(30,"button",21),I("click",function(){return y(t),C(m().addProductEdit())}),h(31,"+ Add Product"),u(),W(32,"br")(33,"br"),l(34,"button",23),I("click",function(){return y(t),C(m().saveEdit())}),h(35,"Save"),u()()()()}if(2&e){const t=m();p(7),w("ngModel",t.editingClient.clientName),p(),w("ngModel",t.editingClient.address),p(),w("ngModel",t.editingClient.city),p(),w("ngModel",t.editingClient.state),p(),w("ngModel",t.editingClient.pinCode),p(),w("ngModel",t.editingClient.GSTIN),p(),w("ngModel",t.editingClient.phoneNum),p(),w("ngModel",t.editingClient.perDis),p(),w("ngModel",t.editingClient.creditType),p(7),M("ngForOf",t.editingClient.deliveryLocations),p(7),M("ngForOf",t.editingClient.products)}}let EH=(()=>{class e{constructor(t){this.http=t,this.clients=[],this.productOptions=[],this.showAddClientPopup=!1,this.showEditClientPopup=!1,this.cbranch=localStorage.getItem("branch")||"All Branches",this.newClient={clientName:"",address:"",city:"",state:"",pinCode:"",GSTIN:"",phoneNum:"",perDis:"",creditType:"no-credit",products:[],deliveryLocations:[{location:""}],status:"active",branch:localStorage.getItem("branch")||"All Branches",email:localStorage.getItem("email"),username:localStorage.getItem("username")},this.editingClient=null,this.onStorage=i=>{"branch"===i.key&&i.newValue&&i.newValue!==this.cbranch&&(this.cbranch=i.newValue,this.loadClients(),this.loadProducts())}}ngOnInit(){this.loadClients(),this.loadProducts(),this.branchCheck=setInterval(()=>{const t=localStorage.getItem("branch")||"All Branches";t!==this.cbranch&&(this.cbranch=t,this.loadClients(),this.loadProducts())},1e3),window.addEventListener("storage",this.onStorage)}ngOnDestroy(){this.branchCheck&&clearInterval(this.branchCheck),window.removeEventListener("storage",this.onStorage)}loadClients(){const t=localStorage.getItem("email");this.cbranch=localStorage.getItem("branch")||"All Branches",this.http.get(`http://localhost:3000/api/clients?email=${t}&branch=${this.cbranch}`).subscribe({next:i=>{console.log("Clients loaded:",i),this.clients=i},error:i=>console.error("Error loading clients:",i)})}loadProducts(){const t=localStorage.getItem("branch")||"All Branches";this.http.get("http://localhost:3000/api/products").subscribe({next:i=>{this.productOptions=(i||[]).filter(o=>"All Branches"===t||o.branch===t)},error:i=>console.error("Error loading products:",i)})}openAddClientPopup(){this.showAddClientPopup=!0}closeAddClientPopup(){this.showAddClientPopup=!1}openEditClientPopup(t){this.editingClient=JSON.parse(JSON.stringify(t)),Array.isArray(this.editingClient.products)||(this.editingClient.products=[]),Array.isArray(this.editingClient.deliveryLocations)||(this.editingClient.deliveryLocations=[{location:""}]),this.showEditClientPopup=!0}closeEditClientPopup(){this.showEditClientPopup=!1,this.editingClient=null}addProduct(){this.newClient.products.push({hsnNum:"",productName:"",ratePerNum:0,ratePerVolume:0,ratePerKg:0})}onProductSelect(t){const i=this.productOptions.find(o=>o.productName===t.productName);i&&(t.hsnNum=i.hsnNum)}removeProduct(t){this.newClient.products.splice(t,1)}addProductEdit(){this.editingClient.products.push({hsnNum:"",productName:"",ratePerNum:0,ratePerVolume:0,ratePerKg:0})}removeProductEdit(t){this.editingClient.products.splice(t,1)}addDeliveryLocation(){this.newClient.deliveryLocations.push({location:""})}removeDeliveryLocation(t){this.newClient.deliveryLocations.splice(t,1)}addDeliveryLocationEdit(){this.editingClient.deliveryLocations.push({location:""})}removeDeliveryLocationEdit(t){this.editingClient.deliveryLocations.splice(t,1)}addClient(){console.log("\u{1f4e4} Sending client data:",this.newClient),this.newClient.branch=localStorage.getItem("branch")||"All Branches","All Branches"!==this.newClient.branch?this.http.post("http://localhost:3000/api/clients/add",this.newClient,{headers:{"Content-Type":"application/json"}}).subscribe({next:t=>{console.log("\u2705 Client saved",t),alert("Client added successfully!"),window.location.reload()},error:t=>{console.error("\u274c Error saving client:",t),alert("Error: "+t.error.message)}}):alert("Please select a specific branch before adding a client.")}saveEdit(){this.http.put(`http://localhost:3000/api/clients/${this.editingClient._id}`,this.editingClient).subscribe(()=>{this.loadClients(),this.closeEditClientPopup()})}toggleCreditType(t){this.http.patch(`http://localhost:3000/api/clients/${t._id}/credit`,{}).subscribe(()=>this.loadClients()),console.log("Toggled credit type for client:",t._id)}toggleStatus(t){this.http.patch(`http://localhost:3000/api/clients/${t._id}/status`,{}).subscribe(()=>this.loadClients())}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-client"]],standalone:!0,features:[Fe],decls:37,vars:3,consts:[[1,"clients-container"],[1,"add-client-btn",3,"click"],["class","modal",4,"ngIf"],[1,"clients-table-wrapper"],[4,"ngFor","ngForOf"],[1,"modal"],[1,"modal-content"],[1,"close",3,"click"],[1,"add-client-form"],["placeholder","Client Name","required","",3,"ngModelChange","ngModel"],["placeholder","Address","required","",3,"ngModelChange","ngModel"],["placeholder","City",3,"ngModelChange","ngModel"],["placeholder","State",3,"ngModelChange","ngModel"],["placeholder","Pin Code",3,"ngModelChange","ngModel"],["placeholder","GSTIN","required","",3,"ngModelChange","ngModel"],["placeholder","Contact Number","required","",3,"ngModelChange","ngModel"],["placeholder","% of Discount","required","",3,"ngModelChange","ngModel"],[1,"small-select",3,"ngModelChange","ngModel"],["value","no-credit"],["value","credit"],["class","delivery-form",4,"ngFor","ngForOf"],["type","button",3,"click"],["class","product-form",4,"ngFor","ngForOf"],[3,"click"],[1,"delivery-form"],["placeholder","Delivery Address","required","",3,"ngModelChange","ngModel"],[1,"product-form"],["required","",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","placeholder","Rate per Number",3,"ngModelChange","ngModel"],["type","number","placeholder","Rate per Volume",3,"ngModelChange","ngModel"],["type","number","placeholder","Rate per Kg",3,"ngModelChange","ngModel"],[3,"value"],[3,"click","ngClass"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"h2"),h(2,"Manage Clients"),u(),l(3,"button",1),I("click",function(){return o.openAddClientPopup()}),h(4,"+ Add Client"),u(),N(5,bH,36,11,"div",2),l(6,"div",3)(7,"table")(8,"thead")(9,"tr")(10,"th"),h(11,"Client Name"),u(),l(12,"th"),h(13,"Address"),u(),l(14,"th"),h(15,"City"),u(),l(16,"th"),h(17,"State"),u(),l(18,"th"),h(19,"Pin"),u(),l(20,"th"),h(21,"GSTIN"),u(),l(22,"th"),h(23,"Contact Number"),u(),l(24,"th"),h(25,"% Discount"),u(),l(26,"th"),h(27,"Credit Type"),u(),l(28,"th"),h(29,"Delivery Locations"),u(),l(30,"th"),h(31,"Status"),u(),l(32,"th"),h(33,"Actions"),u()()(),l(34,"tbody"),N(35,wH,28,13,"tr",4),u()()()(),N(36,TH,36,11,"div",2)),2&i&&(p(5),M("ngIf",o.showAddClientPopup),p(30),M("ngForOf",o.clients),p(),M("ngIf",o.showEditClientPopup))},dependencies:[Bt,Jp,Et,_t,yt,ci,li,rt,bn,Mn,ft,wn,st],styles:[".clients-container[_ngcontent-%COMP%]{padding:15px;max-width:100%;box-sizing:border-box}.clients-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;vertical-align:top}.edit-field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.edit-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;max-width:200px;margin-bottom:5px;box-sizing:border-box}.credit-active[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;font-weight:700;border:none;padding:5px 10px;border-radius:4px}.credit-inactive[_ngcontent-%COMP%]{background-color:#333;color:#fff;border:none;padding:5px 10px;border-radius:4px}.status-active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700;border:none;padding:5px 10px;border-radius:4px}.status-inactive[_ngcontent-%COMP%]{background-color:#555;color:#fff;border:none;padding:5px 10px;border-radius:4px}.modal[_ngcontent-%COMP%]{display:flex;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:#00000080;justify-content:center;align-items:center}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:6px;width:400px;max-width:90%}.close[_ngcontent-%COMP%]{float:right;font-size:24px;cursor:pointer}"]})}}return e})();function NH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.guestName)}}function xH(e,n){if(1&e){const t=A();l(0,"div",15)(1,"input",16),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingGuest.guestName,o)||(r.editingGuest.guestName=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingGuest.guestName)}}function kH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.address)}}function PH(e,n){if(1&e){const t=A();l(0,"div",15)(1,"input",16),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingGuest.address,o)||(r.editingGuest.address=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingGuest.address)}}function AH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.city)}}function OH(e,n){if(1&e){const t=A();l(0,"div",15)(1,"input",16),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingGuest.city,o)||(r.editingGuest.city=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingGuest.city)}}function RH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.state)}}function FH(e,n){if(1&e){const t=A();l(0,"div",15)(1,"input",16),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingGuest.state,o)||(r.editingGuest.state=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingGuest.state)}}function LH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.pinCode)}}function VH(e,n){if(1&e){const t=A();l(0,"div",15)(1,"input",16),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingGuest.pinCode,o)||(r.editingGuest.pinCode=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingGuest.pinCode)}}function BH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.phoneNum)}}function jH(e,n){if(1&e){const t=A();l(0,"div",15)(1,"input",16),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingGuest.phoneNum,o)||(r.editingGuest.phoneNum=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingGuest.phoneNum)}}function UH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.perDis)}}function HH(e,n){if(1&e){const t=A();l(0,"div",15)(1,"input",16),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingGuest.perDis,o)||(r.editingGuest.perDis=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingGuest.perDis)}}function GH(e,n){if(1&e){const t=A();l(0,"button",9),I("click",function(){y(t);const o=m().$implicit;return C(m().editGuest(o))}),h(1,"Edit"),u()}}function $H(e,n){if(1&e){const t=A();l(0,"button",9),I("click",function(){return y(t),C(m(2).saveEdit())}),h(1,"Save"),u()}}function zH(e,n){if(1&e){const t=A();l(0,"tr")(1,"td"),N(2,NH,2,1,"span",12)(3,xH,2,1,"div",13),u(),l(4,"td"),N(5,kH,2,1,"span",12)(6,PH,2,1,"div",13),u(),l(7,"td"),N(8,AH,2,1,"span",12)(9,OH,2,1,"div",13),u(),l(10,"td"),N(11,RH,2,1,"span",12)(12,FH,2,1,"div",13),u(),l(13,"td"),N(14,LH,2,1,"span",12)(15,VH,2,1,"div",13),u(),l(16,"td"),N(17,BH,2,1,"span",12)(18,jH,2,1,"div",13),u(),l(19,"td"),N(20,UH,2,1,"span",12)(21,HH,2,1,"div",13),u(),l(22,"td")(23,"button",9),I("click",function(){const o=y(t).$implicit;return C(m().toggleStatus(o))}),h(24),u()(),l(25,"td"),N(26,GH,2,0,"button",14)(27,$H,2,0,"button",14),u()()}if(2&e){const t=n.$implicit,i=m();p(2),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)!==t._id),p(),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)===t._id),p(2),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)!==t._id),p(),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)===t._id),p(2),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)!==t._id),p(),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)===t._id),p(2),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)!==t._id),p(),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)===t._id),p(2),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)!==t._id),p(),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)===t._id),p(2),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)!==t._id),p(),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)===t._id),p(2),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)!==t._id),p(),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)===t._id),p(3),U(" ","active"===t.status?"Deactivate":"Activate"," "),p(2),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)!==t._id),p(),M("ngIf",(null==i.editingGuest?null:i.editingGuest._id)===t._id)}}let qH=(()=>{class e{constructor(t){this.http=t,this.guests=[],this.newGuest={guestName:"",address:"",city:"",state:"",pinCode:"",phoneNum:"",perDis:"",status:"active",email:localStorage.getItem("email"),username:localStorage.getItem("username")},this.editingGuest=null}ngOnInit(){this.loadGuests()}loadGuests(){const t=localStorage.getItem("email");this.http.get(`http://localhost:3000/api/guests?email=${t}`).subscribe({next:i=>{console.log("Guests loaded:",i),this.guests=i},error:i=>console.error("Error loading guests:",i)})}addGuest(){console.log("\u{1f4e4} Sending guest data:"),this.http.post("http://localhost:3000/api/guests/add",this.newGuest,{headers:{"Content-Type":"application/json"}}).subscribe({next:t=>{console.log("\u2705 Guest saved",t),alert("Guest added successfully!"),window.location.reload()},error:t=>{console.error("\u274c Error saving guest:",t),alert("Error12: "+t.error.message)}})}editGuest(t){this.editingGuest={...t}}saveEdit(){this.http.put(`http://localhost:3000/api/guests/${this.editingGuest._id}`,this.editingGuest).subscribe(()=>{this.loadGuests(),this.editingGuest=null})}toggleStatus(t){this.http.patch(`http://localhost:3000/api/guests/${t._id}/status`,{}).subscribe(()=>this.loadGuests())}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-guest"]],standalone:!0,features:[Fe],decls:35,vars:8,consts:[[1,"guests-container"],[1,"add-guest-form"],["placeholder","Guest Name","required","",3,"ngModelChange","ngModel"],["placeholder","Address","required","",3,"ngModelChange","ngModel"],["placeholder","City",3,"ngModelChange","ngModel"],["placeholder","State",3,"ngModelChange","ngModel"],["placeholder","Pin Code",3,"ngModelChange","ngModel"],["placeholder","Contact Number","required","",3,"ngModelChange","ngModel"],["placeholder","% of Discount","required","",3,"ngModelChange","ngModel"],[3,"click"],[1,"guests-table-wrapper"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","edit-field",4,"ngIf"],[3,"click",4,"ngIf"],[1,"edit-field"],[3,"ngModelChange","ngModel"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"h2"),h(2,"Manage Guests"),u(),l(3,"div",1)(4,"input",2),D("ngModelChange",function(s){return S(o.newGuest.guestName,s)||(o.newGuest.guestName=s),s}),u(),l(5,"input",3),D("ngModelChange",function(s){return S(o.newGuest.address,s)||(o.newGuest.address=s),s}),u(),l(6,"input",4),D("ngModelChange",function(s){return S(o.newGuest.city,s)||(o.newGuest.city=s),s}),u(),l(7,"input",5),D("ngModelChange",function(s){return S(o.newGuest.state,s)||(o.newGuest.state=s),s}),u(),l(8,"input",6),D("ngModelChange",function(s){return S(o.newGuest.pinCode,s)||(o.newGuest.pinCode=s),s}),u(),l(9,"input",7),D("ngModelChange",function(s){return S(o.newGuest.phoneNum,s)||(o.newGuest.phoneNum=s),s}),u(),l(10,"input",8),D("ngModelChange",function(s){return S(o.newGuest.perDis,s)||(o.newGuest.perDis=s),s}),u(),l(11,"button",9),I("click",function(){return o.addGuest()}),h(12,"+ Add Guest"),u()(),l(13,"div",10)(14,"table")(15,"tr")(16,"th"),h(17,"Guest Name"),u(),l(18,"th"),h(19,"Address"),u(),l(20,"th"),h(21,"City"),u(),l(22,"th"),h(23,"State"),u(),l(24,"th"),h(25,"Pin"),u(),l(26,"th"),h(27,"Contact Number"),u(),l(28,"th"),h(29,"% of Discount"),u(),l(30,"th"),h(31,"Status"),u(),l(32,"th"),h(33,"Actions"),u()(),N(34,zH,28,17,"tr",11),u()()()),2&i&&(p(4),w("ngModel",o.newGuest.guestName),p(),w("ngModel",o.newGuest.address),p(),w("ngModel",o.newGuest.city),p(),w("ngModel",o.newGuest.state),p(),w("ngModel",o.newGuest.pinCode),p(),w("ngModel",o.newGuest.phoneNum),p(),w("ngModel",o.newGuest.perDis),p(24),M("ngForOf",o.guests))},dependencies:[Bt,Et,_t,yt,rt,ft,wn,st],styles:[".guests-container[_ngcontent-%COMP%]{padding:15px;max-width:100%;box-sizing:border-box}.guests-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;vertical-align:top}.edit-field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.edit-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;max-width:200px;margin-bottom:5px;box-sizing:border-box}"]})}}return e})(),WH=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-categories"]],standalone:!0,features:[Fe],decls:2,vars:0,template:function(i,o){1&i&&(l(0,"h2"),h(1,"Categories"),u())},styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})();function QH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.pkgName)}}function ZH(e,n){if(1&e){const t=A();l(0,"div",10)(1,"input",11),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingPkg.pkgName,o)||(r.editingPkg.pkgName=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingPkg.pkgName)}}function KH(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.rate)}}function YH(e,n){if(1&e){const t=A();l(0,"div",10)(1,"input",12),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingPkg.rate,o)||(r.editingPkg.rate=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingPkg.rate)}}function JH(e,n){if(1&e){const t=A();l(0,"button",4),I("click",function(){y(t);const o=m().$implicit;return C(m().editPkg(o))}),h(1,"Edit"),u()}}function XH(e,n){if(1&e){const t=A();l(0,"button",4),I("click",function(){return y(t),C(m(2).saveEdit())}),h(1,"Save"),u()}}function e9(e,n){if(1&e){const t=A();l(0,"tr")(1,"td"),N(2,QH,2,1,"span",7)(3,ZH,2,1,"div",8),u(),l(4,"td"),N(5,KH,2,1,"span",7)(6,YH,2,1,"div",8),u(),l(7,"td")(8,"button",4),I("click",function(){const o=y(t).$implicit;return C(m().toggleStatus(o))}),h(9),u()(),l(10,"td"),N(11,JH,2,0,"button",9)(12,XH,2,0,"button",9),u()()}if(2&e){const t=n.$implicit,i=m();p(2),M("ngIf",(null==i.editingPkg?null:i.editingPkg._id)!==t._id),p(),M("ngIf",(null==i.editingPkg?null:i.editingPkg._id)===t._id),p(2),M("ngIf",(null==i.editingPkg?null:i.editingPkg._id)!==t._id),p(),M("ngIf",(null==i.editingPkg?null:i.editingPkg._id)===t._id),p(3),U(" ","active"===t.status?"Deactivate":"Activate"," "),p(2),M("ngIf",(null==i.editingPkg?null:i.editingPkg._id)!==t._id),p(),M("ngIf",(null==i.editingPkg?null:i.editingPkg._id)===t._id)}}let t9=(()=>{class e{constructor(t){this.http=t,this.pkgs=[],this.newPkg={pkgName:"",rate:0,status:"active",email:localStorage.getItem("email"),username:localStorage.getItem("username")},this.editingPkg=null}ngOnInit(){this.loadPkgs()}loadPkgs(){const t=localStorage.getItem("email");this.http.get(`http://localhost:3000/api/pkgs?email=${t}`).subscribe({next:i=>{console.log("Packages loaded:",i),this.pkgs=i},error:i=>console.error("Error loading pkgs:",i)})}addPkg(){console.log("\u{1f4e4} Sending pkg data:"),this.http.post("http://localhost:3000/api/pkgs/add",this.newPkg,{headers:{"Content-Type":"application/json"}}).subscribe({next:t=>{console.log("\u2705 Package type saved",t),alert("Package type added successfully!"),window.location.reload()},error:t=>{console.error("\u274c Error saving pkg:",t),alert("Error12: "+t.error.message)}})}editPkg(t){this.editingPkg={...t}}saveEdit(){this.http.put(`http://localhost:3000/api/pkgs/${this.editingPkg._id}`,this.editingPkg).subscribe(()=>{this.loadPkgs(),this.editingPkg=null})}toggleStatus(t){this.http.patch(`http://localhost:3000/api/pkgs/${t._id}/status`,{}).subscribe(()=>this.loadPkgs())}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-pkg"]],standalone:!0,features:[Fe],decls:20,vars:3,consts:[[1,"pkgs-container"],[1,"add-pkg-form"],["placeholder","Package Type","required","",3,"ngModelChange","ngModel"],["type","number","placeholder","Rate","required","",3,"ngModelChange","ngModel"],[3,"click"],[1,"pkgs-table-wrapper"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","edit-field",4,"ngIf"],[3,"click",4,"ngIf"],[1,"edit-field"],[3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"h2"),h(2,"Manage Packages"),u(),l(3,"div",1)(4,"input",2),D("ngModelChange",function(s){return S(o.newPkg.pkgName,s)||(o.newPkg.pkgName=s),s}),u(),l(5,"input",3),D("ngModelChange",function(s){return S(o.newPkg.rate,s)||(o.newPkg.rate=s),s}),u(),l(6,"button",4),I("click",function(){return o.addPkg()}),h(7,"+ Add Package"),u()(),l(8,"div",5)(9,"table")(10,"tr")(11,"th"),h(12,"Package Type"),u(),l(13,"th"),h(14,"Rate"),u(),l(15,"th"),h(16,"Status"),u(),l(17,"th"),h(18,"Actions"),u()(),N(19,e9,13,7,"tr",6),u()()()),2&i&&(p(4),w("ngModel",o.newPkg.pkgName),p(),w("ngModel",o.newPkg.rate),p(14),M("ngForOf",o.pkgs))},dependencies:[Bt,Et,_t,yt,rt,bn,ft,wn,st],styles:[".pkgs-container[_ngcontent-%COMP%]{padding:15px;max-width:100%;box-sizing:border-box}.pkgs-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;vertical-align:top}.edit-field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.edit-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;max-width:200px;margin-bottom:5px;box-sizing:border-box}"]})}}return e})();function n9(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.hsnNum)}}function i9(e,n){if(1&e){const t=A();l(0,"div",13)(1,"input",14),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingProduct.hsnNum,o)||(r.editingProduct.hsnNum=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingProduct.hsnNum)}}function o9(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.productName)}}function r9(e,n){if(1&e){const t=A();l(0,"div",13)(1,"input",14),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingProduct.productName,o)||(r.editingProduct.productName=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingProduct.productName)}}function s9(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.ratePerNum)}}function a9(e,n){if(1&e){const t=A();l(0,"div",13)(1,"input",15),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingProduct.ratePerNum,o)||(r.editingProduct.ratePerNum=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingProduct.ratePerNum)}}function c9(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.ratePerVolume)}}function l9(e,n){if(1&e){const t=A();l(0,"div",13)(1,"input",15),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingProduct.ratePerVolume,o)||(r.editingProduct.ratePerVolume=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingProduct.ratePerVolume)}}function u9(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),L(t.ratePerKg)}}function d9(e,n){if(1&e){const t=A();l(0,"div",13)(1,"input",15),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingProduct.ratePerKg,o)||(r.editingProduct.ratePerKg=o),C(o)}),u()()}if(2&e){const t=m(2);p(),w("ngModel",t.editingProduct.ratePerKg)}}function h9(e,n){if(1&e){const t=A();l(0,"button",7),I("click",function(){y(t);const o=m().$implicit;return C(m().editProduct(o))}),h(1,"Edit"),u()}}function f9(e,n){if(1&e){const t=A();l(0,"button",7),I("click",function(){return y(t),C(m(2).saveEdit())}),h(1,"Save"),u()}}function p9(e,n){if(1&e){const t=A();l(0,"tr")(1,"td"),N(2,n9,2,1,"span",10)(3,i9,2,1,"div",11),u(),l(4,"td"),N(5,o9,2,1,"span",10)(6,r9,2,1,"div",11),u(),l(7,"td"),N(8,s9,2,1,"span",10)(9,a9,2,1,"div",11),u(),l(10,"td"),N(11,c9,2,1,"span",10)(12,l9,2,1,"div",11),u(),l(13,"td"),N(14,u9,2,1,"span",10)(15,d9,2,1,"div",11),u(),l(16,"td")(17,"button",7),I("click",function(){const o=y(t).$implicit;return C(m().toggleStatus(o))}),h(18),u()(),l(19,"td"),N(20,h9,2,0,"button",12)(21,f9,2,0,"button",12),u()()}if(2&e){const t=n.$implicit,i=m();p(2),M("ngIf",(null==i.editingProduct?null:i.editingProduct._id)!==t._id),p(),M("ngIf",(null==i.editingProduct?null:i.editingProduct._id)===t._id),p(2),M("ngIf",(null==i.editingProduct?null:i.editingProduct._id)!==t._id),p(),M("ngIf",(null==i.editingProduct?null:i.editingProduct._id)===t._id),p(2),M("ngIf",(null==i.editingProduct?null:i.editingProduct._id)!==t._id),p(),M("ngIf",(null==i.editingProduct?null:i.editingProduct._id)===t._id),p(2),M("ngIf",(null==i.editingProduct?null:i.editingProduct._id)!==t._id),p(),M("ngIf",(null==i.editingProduct?null:i.editingProduct._id)===t._id),p(2),M("ngIf",(null==i.editingProduct?null:i.editingProduct._id)!==t._id),p(),M("ngIf",(null==i.editingProduct?null:i.editingProduct._id)===t._id),p(3),U(" ","active"===t.status?"Deactivate":"Activate"," "),p(2),M("ngIf",(null==i.editingProduct?null:i.editingProduct._id)!==t._id),p(),M("ngIf",(null==i.editingProduct?null:i.editingProduct._id)===t._id)}}let g9=(()=>{class e{constructor(t){this.http=t,this.products=[],this.newProduct={productName:"",branch:localStorage.getItem("branch")||"All Branches",status:"active",email:localStorage.getItem("email"),username:localStorage.getItem("username")},this.editingProduct=null}ngOnInit(){this.loadProducts()}loadProducts(){const t=localStorage.getItem("email");this.http.get(`http://localhost:3000/api/products?email=${t}`).subscribe({next:i=>{this.products=i},error:i=>console.error("Error loading products:",i)})}addProduct(){this.newProduct.branch=localStorage.getItem("branch")||"All Branches","All Branches"!==this.newProduct.branch?this.http.post("http://localhost:3000/api/products/add",this.newProduct,{headers:{"Content-Type":"application/json"}}).subscribe({next:()=>{alert("Product type added successfully!"),window.location.reload()},error:t=>{alert("Error: "+t.error?.message)}}):alert("Please select a specific branch before adding a product.")}editProduct(t){this.editingProduct={...t}}saveEdit(){this.http.put(`http://localhost:3000/api/products/${this.editingProduct._id}`,this.editingProduct).subscribe(()=>{this.loadProducts(),this.editingProduct=null})}toggleStatus(t){this.http.patch(`http://localhost:3000/api/products/${t._id}/status`,{}).subscribe(()=>this.loadProducts())}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-product"]],standalone:!0,features:[Fe],decls:29,vars:6,consts:[[1,"products-container"],[1,"add-product-form"],["placeholder","HSN number","required","",3,"ngModelChange","ngModel"],["placeholder","Product Type","required","",3,"ngModelChange","ngModel"],["type","number","placeholder","Rate / Box","required","",3,"ngModelChange","ngModel"],["type","number","placeholder","Rate / cm\xb3","required","",3,"ngModelChange","ngModel"],["type","number","placeholder","Rate / Kg","required","",3,"ngModelChange","ngModel"],[3,"click"],[1,"products-table-wrapper"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","edit-field",4,"ngIf"],[3,"click",4,"ngIf"],[1,"edit-field"],[3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"h2"),h(2,"Manage Standard Products Pricing"),u(),l(3,"div",1)(4,"input",2),D("ngModelChange",function(s){return S(o.newProduct.hsnNum,s)||(o.newProduct.hsnNum=s),s}),u(),l(5,"input",3),D("ngModelChange",function(s){return S(o.newProduct.productName,s)||(o.newProduct.productName=s),s}),u(),l(6,"input",4),D("ngModelChange",function(s){return S(o.newProduct.ratePerNum,s)||(o.newProduct.ratePerNum=s),s}),u(),l(7,"input",5),D("ngModelChange",function(s){return S(o.newProduct.ratePerVolume,s)||(o.newProduct.ratePerVolume=s),s}),u(),l(8,"input",6),D("ngModelChange",function(s){return S(o.newProduct.ratePerKg,s)||(o.newProduct.ratePerKg=s),s}),u(),l(9,"button",7),I("click",function(){return o.addProduct()}),h(10,"+ Add Product"),u()(),l(11,"div",8)(12,"table")(13,"tr")(14,"th"),h(15,"HSN number"),u(),l(16,"th"),h(17,"Product Type"),u(),l(18,"th"),h(19,"Rate / Box."),u(),l(20,"th"),h(21,"Rate / cm\xb3"),u(),l(22,"th"),h(23,"Rate / Kg"),u(),l(24,"th"),h(25,"Status"),u(),l(26,"th"),h(27,"Actions"),u()(),N(28,p9,22,13,"tr",9),u()()()),2&i&&(p(4),w("ngModel",o.newProduct.hsnNum),p(),w("ngModel",o.newProduct.productName),p(),w("ngModel",o.newProduct.ratePerNum),p(),w("ngModel",o.newProduct.ratePerVolume),p(),w("ngModel",o.newProduct.ratePerKg),p(20),M("ngForOf",o.products))},dependencies:[Bt,Et,_t,yt,rt,bn,ft,wn,st],styles:[".products-container[_ngcontent-%COMP%]{padding:15px;max-width:100%;box-sizing:border-box}.products-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;vertical-align:top}.edit-field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.edit-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;max-width:200px;margin-bottom:5px;box-sizing:border-box}"]})}}return e})();function m9(e,n){if(1&e&&(l(0,"option",18),h(1),u()),2&e){const t=n.$implicit;M("ngValue",t.branchName),p(),L(t.branchName)}}function _9(e,n){if(1&e){const t=A();so(0),l(1,"td",19),h(2),u(),l(3,"td",19),h(4),u(),l(5,"td",19),h(6),u(),l(7,"td",19),h(8),u(),l(9,"td",19),h(10),u(),l(11,"td",19)(12,"button",20),I("click",function(){y(t);const o=m().$implicit;return C(m(2).startEdit(o))}),h(13,"Edit"),u(),l(14,"button",21),I("click",function(){y(t);const o=m().$implicit;return C(m(2).deleteUser(o._id))}),h(15,"Delete"),u()(),ao()}if(2&e){const t=m().$implicit;p(2),L(t._id),p(2),L(t.email),p(2),L(t.username),p(2),L(t.role),p(2),L(t.branches&&t.branches.length?t.branches.join(", "):t.branch)}}function v9(e,n){if(1&e&&(l(0,"option",18),h(1),u()),2&e){const t=n.$implicit;M("ngValue",t.branchName),p(),L(t.branchName)}}function y9(e,n){if(1&e){const t=A();l(0,"td",19),h(1),u(),l(2,"td",19)(3,"input",22),D("ngModelChange",function(o){y(t);const r=m(3);return S(r.editUser.email,o)||(r.editUser.email=o),C(o)}),u()(),l(4,"td",19)(5,"input",22),D("ngModelChange",function(o){y(t);const r=m(3);return S(r.editUser.username,o)||(r.editUser.username=o),C(o)}),u()(),l(6,"td",19)(7,"select",9),D("ngModelChange",function(o){y(t);const r=m(3);return S(r.editUser.role,o)||(r.editUser.role=o),C(o)}),I("change",function(){return y(t),C(m(3).onEditRoleChange())}),l(8,"option",10),h(9,"User"),u(),l(10,"option",11),h(11,"Admin"),u()()(),l(12,"td",19)(13,"select",12),D("ngModelChange",function(o){y(t);const r=m(3);return S(r.editUser.branches,o)||(r.editUser.branches=o),C(o)}),N(14,v9,2,2,"option",13),u(),l(15,"div",23)(16,"input",24),D("ngModelChange",function(o){y(t);const r=m(3);return S(r.editUser.password,o)||(r.editUser.password=o),C(o)}),u()()(),l(17,"td",19)(18,"button",20),I("click",function(){return y(t),C(m(3).saveEdit())}),h(19,"Save"),u(),l(20,"button",21),I("click",function(){return y(t),C(m(3).cancelEdit())}),h(21,"Cancel"),u()()}if(2&e){const t=m().$implicit,i=m(2);p(),L(t._id),p(2),w("ngModel",i.editUser.email),p(2),w("ngModel",i.editUser.username),p(2),w("ngModel",i.editUser.role),p(6),w("ngModel",i.editUser.branches),M("disabled","admin"===i.editUser.role),p(),M("ngForOf",i.branches),p(2),w("ngModel",i.editUser.password)}}function C9(e,n){if(1&e&&(l(0,"tr"),N(1,_9,16,5,"ng-container",2)(2,y9,22,8,"ng-template",null,1,Nr),u()),2&e){const t=n.$implicit,i=Ir(3),o=m(2);p(),M("ngIf",o.editId!==t._id)("ngIfElse",i)}}function b9(e,n){if(1&e){const t=A();so(0),l(1,"h2"),h(2,"Roles Settings"),u(),l(3,"p"),h(4,"Create/manage users for this company here."),u(),l(5,"div",3)(6,"h3",4),h(7,"Add User"),u(),l(8,"div",5)(9,"div")(10,"label"),h(11,"Email"),u(),l(12,"input",6),D("ngModelChange",function(o){y(t);const r=m();return S(r.newUser.email,o)||(r.newUser.email=o),C(o)}),u()(),l(13,"div")(14,"label"),h(15,"Username"),u(),l(16,"input",7),D("ngModelChange",function(o){y(t);const r=m();return S(r.newUser.username,o)||(r.newUser.username=o),C(o)}),u()(),l(17,"div")(18,"label"),h(19,"Password"),u(),l(20,"input",8),D("ngModelChange",function(o){y(t);const r=m();return S(r.newUser.password,o)||(r.newUser.password=o),C(o)}),u()(),l(21,"div")(22,"label"),h(23,"Role"),u(),l(24,"select",9),D("ngModelChange",function(o){y(t);const r=m();return S(r.newUser.role,o)||(r.newUser.role=o),C(o)}),I("change",function(){return y(t),C(m().onNewRoleChange())}),l(25,"option",10),h(26,"User"),u(),l(27,"option",11),h(28,"Admin"),u()()(),l(29,"div")(30,"label"),h(31,"Branch"),u(),l(32,"select",12),D("ngModelChange",function(o){y(t);const r=m();return S(r.newUser.branches,o)||(r.newUser.branches=o),C(o)}),N(33,m9,2,2,"option",13),u()(),l(34,"div")(35,"button",14),I("click",function(){return y(t),C(m().createUser())}),h(36,"Add"),u()()()(),l(37,"h3"),h(38,"Users"),u(),l(39,"table",15)(40,"thead")(41,"tr")(42,"th",16),h(43,"User ID"),u(),l(44,"th",16),h(45,"Email"),u(),l(46,"th",16),h(47,"Username"),u(),l(48,"th",16),h(49,"Role"),u(),l(50,"th",16),h(51,"Branch"),u(),l(52,"th",16),h(53,"Actions"),u()()(),l(54,"tbody"),N(55,C9,4,2,"tr",17),u()(),ao()}if(2&e){const t=m();p(12),w("ngModel",t.newUser.email),p(4),w("ngModel",t.newUser.username),p(4),w("ngModel",t.newUser.password),p(4),w("ngModel",t.newUser.role),p(8),w("ngModel",t.newUser.branches),M("disabled","admin"===t.newUser.role),p(),M("ngForOf",t.branches),p(22),M("ngForOf",t.users)}}function M9(e,n){1&e&&(l(0,"h2"),h(1,"No privileges"),u(),l(2,"p"),h(3,"Only admins can access Roles Settings."),u())}let w9=(()=>{class e{constructor(t){this.http=t,this.isAdmin="admin"===String(localStorage.getItem("role")||"").toLowerCase(),this.email=localStorage.getItem("email")||"",this.branches=[],this.users=[],this.newUser={branches:[],email:"",username:"",password:"",role:"user"},this.editId=null,this.editUser={branches:[],email:"",username:"",password:"",role:"user"}}ngOnInit(){this.isAdmin&&(this.loadBranches(),this.loadUsers())}loadBranches(){this.http.get("http://localhost:3000/api/branches").subscribe({next:t=>{this.branches=t||[]},error:()=>{this.branches=[]}})}loadUsers(){this.http.get("http://localhost:3000/api/admin/users").subscribe({next:t=>{this.users=t||[]},error:()=>{this.users=[]}})}onNewRoleChange(){"admin"===String(this.newUser.role).toLowerCase()&&(this.newUser.branches=["All Branches"])}createUser(){this.newUser.email&&this.newUser.username&&this.newUser.password?"admin"===String(this.newUser.role).toLowerCase()||this.newUser.branches.length?this.http.post("http://localhost:3000/api/admin/users",this.newUser).subscribe({next:()=>{this.newUser={branches:[],email:"",username:"",password:"",role:"user"},this.loadUsers()},error:t=>{alert(t?.error?.message||"Failed to create user")}}):alert("At least one branch is required"):alert("Email, username, and password are required")}startEdit(t){this.editId=Number(t?._id),this.editUser={branches:Array.isArray(t?.branches)?t.branches:t?.branch?[t.branch]:[],email:t?.email||"",username:t?.username||"",password:"",role:t?.role||"user"}}cancelEdit(){this.editId=null,this.editUser={branches:[],email:"",username:"",password:"",role:"user"}}onEditRoleChange(){"admin"===String(this.editUser.role).toLowerCase()&&(this.editUser.branches=["All Branches"])}saveEdit(){if(null===this.editId)return;const t={branches:this.editUser.branches,email:this.editUser.email,username:this.editUser.username,role:this.editUser.role};this.editUser.password&&(t.password=this.editUser.password),this.http.put(`http://localhost:3000/api/admin/users/${this.editId}`,t).subscribe({next:()=>{this.cancelEdit(),this.loadUsers()},error:i=>{alert(i?.error?.message||"Failed to update user")}})}deleteUser(t){const i=Number(t);Number.isFinite(i)&&confirm("Delete this user?")&&this.http.delete(`http://localhost:3000/api/admin/users/${i}`).subscribe({next:()=>this.loadUsers(),error:o=>alert(o?.error?.message||"Failed to delete user")})}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-roleSettings"]],standalone:!0,features:[Fe],decls:3,vars:2,consts:[["noPrivileges",""],["editRow",""],[4,"ngIf","ngIfElse"],[2,"margin","12px 0","padding","12px","border","1px solid #ddd","border-radius","8px"],[2,"margin-top","0"],[2,"display","grid","grid-template-columns","1fr 1fr","gap","10px","align-items","end"],["placeholder","user@example.com",2,"width","100%",3,"ngModelChange","ngModel"],["placeholder","username",2,"width","100%",3,"ngModelChange","ngModel"],["type","password","placeholder","password",2,"width","100%",3,"ngModelChange","ngModel"],[2,"width","100%",3,"ngModelChange","change","ngModel"],["value","user"],["value","admin"],["multiple","",2,"width","100%","min-height","80px",3,"ngModelChange","ngModel","disabled"],[3,"ngValue",4,"ngFor","ngForOf"],[2,"width","100%",3,"click"],[2,"width","100%","border-collapse","collapse"],[2,"text-align","left","border-bottom","1px solid #ddd","padding","6px"],[4,"ngFor","ngForOf"],[3,"ngValue"],[2,"padding","6px","border-bottom","1px solid #f0f0f0"],[3,"click"],[2,"margin-left","6px",3,"click"],[2,"width","100%",3,"ngModelChange","ngModel"],[2,"margin-top","6px"],["type","password","placeholder","new password (optional)",2,"width","100%",3,"ngModelChange","ngModel"]],template:function(i,o){if(1&i&&N(0,b9,56,8,"ng-container",2)(1,M9,4,0,"ng-template",null,0,Nr),2&i){const r=Ir(2);M("ngIf",o.isAdmin)("ngIfElse",r)}},dependencies:[_t,Et,yt,ci,li,rt,Mn,Yu,ft,st],styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})(),D9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-users"]],standalone:!0,features:[Fe],decls:2,vars:0,template:function(i,o){1&i&&(l(0,"h2"),h(1,"Users"),u())},styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})();function S9(e,n){if(1&e){const t=A();l(0,"tr",7),I("click",function(){const o=y(t).$implicit;return C(m().openStockDetails(o))}),l(1,"td")(2,"input",15),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.selected,o)||(r.selected=o),C(o)}),I("click",function(o){return y(t),C(o.stopPropagation())}),u()(),l(3,"td"),h(4),u(),l(5,"td"),h(6),u(),l(7,"td"),h(8),u(),l(9,"td"),h(10),u(),l(11,"td")(12,"button",7),I("click",function(o){const r=y(t).$implicit;return m().editStock(r),C(o.stopPropagation())}),h(13,"Edit"),u()()()}if(2&e){const t=n.$implicit,i=m();p(2),w("ngModel",t.selected),p(2),L(t.consignmentNumber),p(2),L(t.consignor),p(2),L(t.deliveryAddress),p(2),L(i.getInvoiceAmountTotal(t.invoices))}}function I9(e,n){if(1&e&&(l(0,"li")(1,"span",29),h(2),u(),l(3,"span",30),h(4),u(),l(5,"span",30),h(6),u()()),2&e){const t=n.$implicit;p(2),L(t.type),p(2),U("In Stock: ",t.instock,""),p(2),U("Total: ",t.amount,"")}}function T9(e,n){if(1&e&&(l(0,"div",25)(1,"div",26),h(2),u(),l(3,"ul",27),N(4,I9,7,3,"li",28),u()()),2&e){const t=n.$implicit;p(2),U("Invoice #",t.number,""),p(2),M("ngForOf",t.products)}}function E9(e,n){if(1&e){const t=A();l(0,"div",16)(1,"div",17)(2,"button",18),I("click",function(){return y(t),C(m().closeStockDetails())}),h(3,"\xd7"),u(),l(4,"div",19)(5,"div")(6,"h2"),h(7,"Shipment Details"),u(),l(8,"p",20),h(9),u()(),l(10,"span",21),h(11),u()(),l(12,"div",22)(13,"p")(14,"strong"),h(15,"Consignment No.:"),u(),h(16),u(),l(17,"p")(18,"strong"),h(19,"Status:"),u(),h(20),u(),l(21,"p")(22,"strong"),h(23,"Consignor:"),u(),h(24),u(),l(25,"p")(26,"strong"),h(27,"Consignee:"),u(),h(28),u(),l(29,"p")(30,"strong"),h(31,"Delivery Address:"),u(),h(32),u(),l(33,"p")(34,"strong"),h(35,"Date:"),u(),h(36),Tr(37,"date"),u(),l(38,"p")(39,"strong"),h(40,"Products in stock:"),u(),h(41),u(),l(42,"p")(43,"strong"),h(44,"No. of Products:"),u(),h(45),u()(),l(46,"h3"),h(47,"Products"),u(),l(48,"div",23),N(49,T9,5,2,"div",24),u()()()}if(2&e){const t=m();p(9),U("Consignment ",t.selectedStock.consignmentNumber,""),p(2),L(t.selectedStock.shipmentStatus),p(5),U(" ",t.selectedStock.consignmentNumber,""),p(4),U(" ",t.selectedStock.shipmentStatus,""),p(4),U(" ",t.selectedStock.consignor,""),p(4),U(" ",t.selectedStock.consignee,""),p(4),U(" ",t.selectedStock.deliveryAddress,""),p(4),U(" ",Er(37,11,t.selectedStock.date,"short"),""),p(5),U(" ",t.getInStockAmountTotal(t.selectedStock.invoices),""),p(4),U(" ",t.getInvoiceAmountTotal(t.selectedStock.invoices),""),p(4),M("ngForOf",t.selectedStock.invoices)}}function N9(e,n){if(1&e&&(l(0,"option",53),h(1),u()),2&e){const t=n.$implicit;M("value",t.clientName),p(),tt("",t.clientName,", ",t.address,"")}}function x9(e,n){if(1&e){const t=A();l(0,"div",36)(1,"label"),h(2,"Consignor: "),l(3,"select",50),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consignor,o)||(r.editingStock.consignor=o),C(o)}),I("change",function(){y(t);const o=m(2);return C(o.onConsignorSelect(o.editingStock.consignor))}),N(4,N9,2,3,"option",51),u()(),l(5,"label"),h(6,"GSTIN: "),l(7,"input",52),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consignorGST,o)||(r.editingStock.consignorGST=o),C(o)}),u()(),l(8,"label"),h(9,"Address: "),l(10,"input",52),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consignorAddress,o)||(r.editingStock.consignorAddress=o),C(o)}),u()(),l(11,"label"),h(12,"Phone: "),l(13,"input",52),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consignorPhone,o)||(r.editingStock.consignorPhone=o),C(o)}),u()()()}if(2&e){const t=m(2);p(3),w("ngModel",t.editingStock.consignor),p(),M("ngForOf",t.clientList),p(3),w("ngModel",t.editingStock.consignorGST),p(3),w("ngModel",t.editingStock.consignorAddress),p(3),w("ngModel",t.editingStock.consignorPhone)}}function k9(e,n){if(1&e&&(l(0,"option",53),h(1),u()),2&e){const t=n.$implicit;M("value",t.guestName),p(),tt("",t.guestName,", ",t.address,"")}}function P9(e,n){if(1&e){const t=A();l(0,"div",36)(1,"label"),h(2,"Guest Name: "),l(3,"select",50),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consignor,o)||(r.editingStock.consignor=o),C(o)}),I("change",function(){y(t);const o=m(2);return C(o.onConsignorGuestSelect(o.editingStock.consignor))}),N(4,k9,2,3,"option",51),u()(),l(5,"label"),h(6,"Address: "),l(7,"input",52),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consignorAddress,o)||(r.editingStock.consignorAddress=o),C(o)}),u()(),l(8,"label"),h(9,"Phone: "),l(10,"input",52),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consignorPhone,o)||(r.editingStock.consignorPhone=o),C(o)}),u()()()}if(2&e){const t=m(2);p(3),w("ngModel",t.editingStock.consignor),p(),M("ngForOf",t.guestList),p(3),w("ngModel",t.editingStock.consignorAddress),p(3),w("ngModel",t.editingStock.consignorPhone)}}function A9(e,n){if(1&e&&(l(0,"option",53),h(1),u()),2&e){const t=n.$implicit;M("value",t.clientName),p(),tt("",t.clientName,", ",t.address,"")}}function O9(e,n){if(1&e){const t=A();l(0,"div",36)(1,"label"),h(2,"Consignee: "),l(3,"select",50),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consignee,o)||(r.editingStock.consignee=o),C(o)}),I("change",function(){y(t);const o=m(2);return C(o.onConsigneeSelect(o.editingStock.consignee))}),N(4,A9,2,3,"option",51),u()(),l(5,"label"),h(6,"GSTIN: "),l(7,"input",52),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consigneeGST,o)||(r.editingStock.consigneeGST=o),C(o)}),u()(),l(8,"label"),h(9,"Address: "),l(10,"input",52),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consigneeAddress,o)||(r.editingStock.consigneeAddress=o),C(o)}),u()(),l(11,"label"),h(12,"Phone: "),l(13,"input",52),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consigneePhone,o)||(r.editingStock.consigneePhone=o),C(o)}),u()()()}if(2&e){const t=m(2);p(3),w("ngModel",t.editingStock.consignee),p(),M("ngForOf",t.clientList),p(3),w("ngModel",t.editingStock.consigneeGST),p(3),w("ngModel",t.editingStock.consigneeAddress),p(3),w("ngModel",t.editingStock.consigneePhone)}}function R9(e,n){if(1&e&&(l(0,"option",53),h(1),u()),2&e){const t=n.$implicit;M("value",t.guestName),p(),tt("",t.guestName,", ",t.address,"")}}function F9(e,n){if(1&e){const t=A();l(0,"div",36)(1,"label"),h(2,"Guest Name: "),l(3,"select",50),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consignee,o)||(r.editingStock.consignee=o),C(o)}),I("change",function(){y(t);const o=m(2);return C(o.onConsigneeGuestSelect(o.editingStock.consignee))}),N(4,R9,2,3,"option",51),u()(),l(5,"label"),h(6,"Address: "),l(7,"input",52),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consigneeAddress,o)||(r.editingStock.consigneeAddress=o),C(o)}),u()(),l(8,"label"),h(9,"Phone: "),l(10,"input",52),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.consigneePhone,o)||(r.editingStock.consigneePhone=o),C(o)}),u()()()}if(2&e){const t=m(2);p(3),w("ngModel",t.editingStock.consignee),p(),M("ngForOf",t.guestList),p(3),w("ngModel",t.editingStock.consigneeAddress),p(3),w("ngModel",t.editingStock.consigneePhone)}}function L9(e,n){if(1&e){const t=A();l(0,"div",36)(1,"label"),h(2,"Name: "),l(3,"input",37),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.billingName,o)||(r.editingStock.billingName=o),C(o)}),u()(),l(4,"label"),h(5,"GSTIN: "),l(6,"input",37),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.billingGSTIN,o)||(r.editingStock.billingGSTIN=o),C(o)}),u()(),l(7,"label"),h(8,"Address: "),l(9,"textarea",37),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.editingStock.billingAddress,o)||(r.editingStock.billingAddress=o),C(o)}),u()()()}if(2&e){const t=m(2);p(3),w("ngModel",t.editingStock.billingName),p(3),w("ngModel",t.editingStock.billingGSTIN),p(3),w("ngModel",t.editingStock.billingAddress)}}function V9(e,n){if(1&e&&(l(0,"option",53),h(1),u()),2&e){const t=n.$implicit;M("value",t.pkgName),p(),L(t.pkgName)}}function B9(e,n){if(1&e){const t=A();l(0,"div",60)(1,"select",50),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.type,o)||(r.type=o),C(o)}),I("change",function(){const o=y(t).$implicit;return C(m(3).onPackageList(o.pkgName))}),N(2,V9,2,2,"option",51),u(),l(3,"input",61),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.amount,o)||(r.amount=o),C(o)}),u(),l(4,"button",58),I("click",function(){const o=y(t).index,r=m().index;return C(m(2).deletePackage(r,o))}),h(5),u()()}if(2&e){const t=n.$implicit,i=n.index,o=m().index,r=m(2);p(),w("ngModel",t.type),p(),M("ngForOf",r.pkgList),p(),w("ngModel",t.amount),p(2),tt("dY-`\ufffd,? Delete Package ",o,"/",i,"")}}function j9(e,n){if(1&e&&(l(0,"option",53),h(1),u()),2&e){const t=n.$implicit;M("value",t.productName),p(),tt(" ",t.hsnNum," - ",t.productName," ")}}function U9(e,n){if(1&e){const t=A();l(0,"div",60)(1,"select",50),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.type,o)||(r.type=o),C(o)}),I("change",function(){const o=y(t).$implicit;return C(m(3).onPackageList(o.productName))}),N(2,j9,2,3,"option",51),u(),l(3,"input",62),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.amount,o)||(r.amount=o),C(o)}),I("focus",function(){const o=y(t).$implicit,r=m(),s=r.$implicit,a=r.index;return C(m(2).onProductAmountFocus(s,o,a))})("ngModelChange",function(o){const r=y(t).$implicit,s=m(),a=s.$implicit,c=s.index;return C(m(2).onProductAmountChange(a,r,o,c))}),u(),l(4,"button",58),I("click",function(){const o=y(t).index,r=m().index;return C(m(2).deleteProduct(r,o))}),h(5),u()()}if(2&e){const t=n.$implicit,i=n.index,o=m().index,r=m(2);p(),w("ngModel",t.type),p(),M("ngForOf",r.productList),p(),w("ngModel",t.amount),p(2),tt("dY-`\ufffd,? Delete Product ",o,"/",i,"")}}function H9(e,n){if(1&e){const t=A();l(0,"div",54)(1,"div",55)(2,"input",56),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.number,o)||(r.number=o),C(o)}),u(),l(3,"input",57),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.value,o)||(r.value=o),C(o)}),u(),l(4,"button",58),I("click",function(){const o=y(t).index;return C(m(2).deleteInvoice(o))}),h(5,"Delete Invoice"),u()(),l(6,"h4"),h(7,"Packages"),u(),N(8,B9,6,5,"div",59),l(9,"button",45),I("click",function(){const o=y(t).index;return C(m(2).addPackage(o))}),h(10,"+ Add Package"),u(),l(11,"h4"),h(12,"Products"),u(),N(13,U9,6,5,"div",59),l(14,"button",45),I("click",function(){const o=y(t).index;return C(m(2).addProduct(o))}),h(15,"+ Add Product"),u()()}if(2&e){const t=n.$implicit;p(2),w("ngModel",t.number),p(),w("ngModel",t.value),p(5),M("ngForOf",t.packages),p(5),M("ngForOf",t.products)}}function G9(e,n){if(1&e){const t=A();l(0,"div",31)(1,"div",32)(2,"div",33)(3,"div")(4,"h3"),h(5,"Edit Stock"),u(),l(6,"p",34),h(7),u()()(),l(8,"div",35)(9,"div",36)(10,"label"),h(11,"E-way Bill No: "),l(12,"input",37),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingStock.ewaybillNumber,o)||(r.editingStock.ewaybillNumber=o),C(o)}),u()(),l(13,"label"),h(14,"Date: "),l(15,"input",38),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingStock.date,o)||(r.editingStock.date=o),C(o)}),u()()()(),l(16,"div",35)(17,"h4"),h(18,"Consignor"),u(),l(19,"div",39)(20,"button",7),I("click",function(){return y(t),C(m().editingStock.consignorTab="consignor")}),h(21,"Consignor"),u(),l(22,"button",7),I("click",function(){return y(t),C(m().editingStock.consignorTab="guest")}),h(23,"Guest"),u()(),N(24,x9,14,5,"div",40)(25,P9,11,4,"div",40),u(),l(26,"div",35)(27,"h4"),h(28,"Consignee"),u(),l(29,"div",39)(30,"button",7),I("click",function(){return y(t),C(m().editingStock.consigneeTab="consignee")}),h(31,"Consignee"),u(),l(32,"button",7),I("click",function(){return y(t),C(m().editingStock.consigneeTab="guest")}),h(33,"Guest"),u()(),N(34,O9,14,5,"div",40)(35,F9,11,4,"div",40),u(),l(36,"div",35)(37,"div",36)(38,"label"),h(39,"Payment Mode: "),l(40,"select",37),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingStock.paymentMode,o)||(r.editingStock.paymentMode=o),C(o)}),l(41,"option"),h(42,"Account Credit"),u(),l(43,"option"),h(44,"Paid"),u(),l(45,"option"),h(46,"To Pay"),u()()(),l(47,"label"),h(48,"External Ref ID: "),l(49,"input",37),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingStock.externalRefId,o)||(r.editingStock.externalRefId=o),C(o)}),u()()(),l(50,"h4"),h(51,"Billing Type"),u(),l(52,"div",41)(53,"label")(54,"input",42),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingStock.billingType,o)||(r.editingStock.billingType=o),C(o)}),u(),h(55," Consignor's GST Address"),u(),l(56,"label")(57,"input",43),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingStock.billingType,o)||(r.editingStock.billingType=o),C(o)}),u(),h(58," Different Address"),u()(),N(59,L9,10,3,"div",40),u(),l(60,"section",35)(61,"h3"),h(62,"4. Invoice"),u(),N(63,H9,16,4,"div",44),l(64,"button",45),I("click",function(){return y(t),C(m().addInvoice())}),h(65,"+ Add Invoice"),u()(),l(66,"div",35)(67,"h4"),h(68,"Charges"),u(),l(69,"div",36)(70,"label"),h(71,"ODC: "),l(72,"input",46),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingStock.charges.odc,o)||(r.editingStock.charges.odc=o),C(o)}),u()(),l(73,"label"),h(74,"Unloading: "),l(75,"input",46),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingStock.charges.unloading,o)||(r.editingStock.charges.unloading=o),C(o)}),u()(),l(76,"label"),h(77,"Docket: "),l(78,"input",46),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingStock.charges.docket,o)||(r.editingStock.charges.docket=o),C(o)}),u()(),l(79,"label"),h(80,"Other: "),l(81,"input",46),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingStock.charges.other,o)||(r.editingStock.charges.other=o),C(o)}),u()(),l(82,"label"),h(83,"CCC: "),l(84,"input",46),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingStock.charges.ccc,o)||(r.editingStock.charges.ccc=o),C(o)}),u()(),l(85,"label"),h(86,"Final Amount: "),l(87,"input",46),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingStock.finalAmount,o)||(r.editingStock.finalAmount=o),C(o)}),u()()()(),l(88,"div",47)(89,"button",48),I("click",function(){return y(t),C(m().calculateFinalAmount())}),h(90,"Calculate"),u(),l(91,"button",49),I("click",function(){return y(t),C(m().saveStockEdit())}),h(92,"Save"),u(),l(93,"button",48),I("click",function(){return y(t),C(m().cancelEdit())}),h(94,"Cancel"),u()()()()}if(2&e){const t=m();p(7),tt("Consignment No: ",t.editingStock.consignmentNumber," | Status: ",t.editingStock.shipmentStatus,""),p(5),w("ngModel",t.editingStock.ewaybillNumber),p(3),w("ngModel",t.editingStock.date),p(5),Oe("active","consignor"===t.editingStock.consignorTab),p(2),Oe("active","guest"===t.editingStock.consignorTab),p(2),M("ngIf","consignor"===t.editingStock.consignorTab),p(),M("ngIf","guest"===t.editingStock.consignorTab),p(5),Oe("active","consignee"===t.editingStock.consigneeTab),p(2),Oe("active","guest"===t.editingStock.consigneeTab),p(2),M("ngIf","consignee"===t.editingStock.consigneeTab),p(),M("ngIf","guest"===t.editingStock.consigneeTab),p(5),w("ngModel",t.editingStock.paymentMode),p(9),w("ngModel",t.editingStock.externalRefId),p(5),w("ngModel",t.editingStock.billingType),p(3),w("ngModel",t.editingStock.billingType),p(2),M("ngIf","different"===t.editingStock.billingType),p(4),M("ngForOf",t.editingStock.invoices),p(9),w("ngModel",t.editingStock.charges.odc),p(3),w("ngModel",t.editingStock.charges.unloading),p(3),w("ngModel",t.editingStock.charges.docket),p(3),w("ngModel",t.editingStock.charges.other),p(3),w("ngModel",t.editingStock.charges.ccc),p(3),w("ngModel",t.editingStock.finalAmount)}}function $9(e,n){if(1&e){const t=A();l(0,"div")(1,"p")(2,"strong"),h(3,"Consignment:"),u(),h(4),u(),l(5,"p")(6,"strong"),h(7,"Product:"),u(),h(8),u(),l(9,"p")(10,"strong"),h(11,"New Total Qty:"),u(),h(12),u(),l(13,"p")(14,"strong"),h(15,"In Stock Qty:"),u(),l(16,"input",68),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.pendingManifestAdjustment.popupInstock,o)||(r.pendingManifestAdjustment.popupInstock=o),C(o)}),I("ngModelChange",function(o){return y(t),C(m(2).onPopupInstockChange(o))}),u()()()}if(2&e){const t=m(2);p(4),U(" ",t.pendingManifestAdjustment.consignmentNumber,""),p(4),U(" ",t.pendingManifestAdjustment.productType,""),p(4),U(" ",t.getPopupTargetTotal()," "),p(4),w("ngModel",t.pendingManifestAdjustment.popupInstock)}}function z9(e,n){if(1&e){const t=A();l(0,"tr")(1,"td"),h(2),u(),l(3,"td"),h(4),Tr(5,"date"),u(),l(6,"td"),h(7),u(),l(8,"td")(9,"input",68),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.newManifestQty,o)||(r.newManifestQty=o),C(o)}),I("ngModelChange",function(){const o=y(t).$implicit;return C(m(3).onManifestQtyChange(o))}),u()()()}if(2&e){const t=n.$implicit;p(2),L(t.manifestationNumber),p(2),L(Er(5,4,t.date,"short")),p(3),L(t.invoiceNumber),p(2),w("ngModel",t.newManifestQty)}}function q9(e,n){if(1&e&&(l(0,"table",9)(1,"thead")(2,"tr")(3,"th"),h(4,"Manifest No."),u(),l(5,"th"),h(6,"Date"),u(),l(7,"th"),h(8,"Invoice"),u(),l(9,"th"),h(10,"Qty"),u()()(),l(11,"tbody"),N(12,z9,10,7,"tr",28),u()()),2&e){const t=m(2);p(12),M("ngForOf",t.manifestAdjustmentLines)}}function W9(e,n){if(1&e){const t=A();l(0,"div",63)(1,"div",64)(2,"h3"),h(3,"Adjust Manifest Quantities"),u(),N(4,$9,17,4,"div",65)(5,q9,13,1,"table",66),l(6,"p")(7,"strong"),h(8,"Manifest Total:"),u(),h(9),l(10,"strong"),h(11,"Delivered Total:"),u(),h(12),u(),l(13,"div",67)(14,"button",7),I("click",function(){return y(t),C(m().applyManifestAdjustments())}),h(15,"Apply"),u(),l(16,"button",7),I("click",function(){return y(t),C(m().cancelManifestAdjustments())}),h(17,"Cancel"),u()()()()}if(2&e){const t=m();p(4),M("ngIf",t.pendingManifestAdjustment),p(),M("ngIf",t.manifestAdjustmentLines.length>0),p(4),U(" ",t.getManifestLineTotal()," | "),p(3),U(" ",t.getPopupDeliveredTotal(),"")}}function Q9(e,n){if(1&e){const t=A();so(0),l(1,"label",84)(2,"input",85),D("ngModelChange",function(o){y(t);const r=m().$implicit;return S(r.ewayBillRequired,o)||(r.ewayBillRequired=o),C(o)}),u(),W(3,"span",86),l(4,"span",87),h(5),u()(),ao()}if(2&e){const t=m().$implicit;p(2),w("ngModel",t.ewayBillRequired),p(3),U(" ",t.ewayBillRequired?"Eway Bill will be created":"Eway Bill not required"," ")}}function Z9(e,n){if(1&e&&(l(0,"p")(1,"strong"),h(2,"Customer created Eway Bill No:"),u(),h(3),u()),2&e){const t=m().$implicit;p(3),U(" ",t.ewaybillNumber,"")}}function K9(e,n){if(1&e){const t=A();l(0,"li")(1,"div",88)(2,"span")(3,"strong"),h(4),u()(),l(5,"span"),h(6),u(),l(7,"span")(8,"input",89),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.manifestQty,o)||(r.manifestQty=o),C(o)}),u()()()()}if(2&e){const t=n.$implicit;p(4),L(t.type),p(2),U(" Total: ",t.amount," "),p(2),M("max",t.instock),w("ngModel",t.manifestQty)}}function Y9(e,n){if(1&e&&(l(0,"li")(1,"strong"),h(2,"Invoice:"),u(),h(3),l(4,"ul"),N(5,K9,9,4,"li",28),u()()),2&e){const t=n.$implicit;p(3),U(" ",t.number," "),p(2),M("ngForOf",t.products)}}function J9(e,n){if(1&e&&(l(0,"div",82)(1,"h4"),h(2),u(),l(3,"div",83),N(4,Q9,6,2,"ng-container",71)(5,Z9,4,1,"ng-template",null,1,Nr),u(),l(7,"p")(8,"strong"),h(9,"Consignor:"),u(),h(10),u(),l(11,"ul"),N(12,Y9,6,2,"li",28),u(),W(13,"hr"),u()),2&e){const t=n.$implicit,i=Ir(6);p(2),U("Consignment: ",t.consignmentNumber,""),p(2),M("ngIf",""===t.ewaybillNumber)("ngIfElse",i),p(6),U(" ",t.consignor,""),p(2),M("ngForOf",t.invoices)}}function X9(e,n){if(1&e&&(l(0,"option",92),h(1),u()),2&e){const t=n.$implicit;M("ngValue",t.key),p(),U(" ",t.text," ")}}function e7(e,n){if(1&e){const t=A();l(0,"div",90)(1,"select",37),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.labelKey,o)||(r.labelKey=o),C(o)}),N(2,X9,2,2,"option",78),u(),l(3,"input",91),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.qty,o)||(r.qty=o),C(o)}),u(),l(4,"button",76),I("click",function(){const o=y(t).index;return C(m(3).removeRouteBasket(o))}),h(5,"Remove"),u()()}if(2&e){const t=n.$implicit,i=m(3);p(),w("ngModel",t.labelKey),p(),M("ngForOf",i.getBasketOptions()),p(),w("ngModel",t.qty)}}function t7(e,n){if(1&e&&(l(0,"option",92),h(1),u()),2&e){const t=n.$implicit;M("ngValue",t),p(),tt(" ",t.name," (",t.type,") ")}}function n7(e,n){if(1&e&&(l(0,"option",53),h(1),u()),2&e){const t=n.$implicit;M("value",t),p(),U(" ",t," ")}}function i7(e,n){if(1&e&&(l(0,"span"),h(1),u()),2&e){const t=m().$implicit;p(),U("- ",t.vehicleNo,"")}}function o7(e,n){if(1&e){const t=A();l(0,"li"),h(1),N(2,i7,2,1,"span",65),l(3,"button",93),I("click",function(){const o=y(t).index;return C(m(3).removeRoutePoint(o))}),h(4,"x"),u()()}if(2&e){const t=n.$implicit,i=n.index;p(),Tl(" ",i+1,". ",t.name," (",t.type,") "),p(),M("ngIf",t.vehicleNo)}}function r7(e,n){if(1&e){const t=A();l(0,"div"),W(1,"hr"),N(2,J9,14,5,"div",72),l(3,"div",73)(4,"h3"),h(5,"Shipment Routing"),u(),l(6,"div",74)(7,"h4"),h(8,"Baskets"),u(),N(9,e7,6,3,"div",75),l(10,"button",76),I("click",function(){return y(t),C(m(2).addRouteBasket())}),h(11,"+ Add basket"),u()(),l(12,"div",77)(13,"select",50),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.selectedRoutePoint,o)||(r.selectedRoutePoint=o),C(o)}),I("change",function(){return y(t),C(m(2).onRoutePointChange())}),N(14,t7,2,3,"option",78),u(),l(15,"select",79),D("ngModelChange",function(o){y(t);const r=m(2);return S(r.selectedRouteVehicle,o)||(r.selectedRouteVehicle=o),C(o)}),l(16,"option",80),h(17,"Select Vehicle"),u(),N(18,n7,2,2,"option",51),u(),l(19,"button",7),I("click",function(){return y(t),C(m(2).addRoutePoint())}),h(20,"Add"),u()(),l(21,"ul",81),N(22,o7,5,4,"li",28),u()(),l(23,"div",67)(24,"button",7),I("click",function(){return y(t),C(m(2).finalizeManifestation())}),h(25,"Manifest"),u(),l(26,"button",7),I("click",function(){return y(t),C(m(2).closeManifestationPopup())}),h(27,"Cancel"),u()()()}if(2&e){const t=m(2);p(2),M("ngForOf",t.selectedForManifestation),p(7),M("ngForOf",t.routeBaskets),p(4),w("ngModel",t.selectedRoutePoint),p(),M("ngForOf",t.availableRoutePoints),p(),w("ngModel",t.selectedRouteVehicle),M("disabled",!(null!=t.selectedRoutePoint&&null!=t.selectedRoutePoint.vehicles&&t.selectedRoutePoint.vehicles.length)),p(3),M("ngForOf",null==t.selectedRoutePoint?null:t.selectedRoutePoint.vehicles),p(4),M("ngForOf",t.shipmentRoute)}}function s7(e,n){if(1&e){const t=A();l(0,"p"),h(1,"No consignments selected for manifestation."),u(),l(2,"button",7),I("click",function(){return y(t),C(m(2).closeManifestationPopup())}),h(3,"Close"),u()}}function a7(e,n){if(1&e){const t=A();l(0,"div",63)(1,"div",69)(2,"span",70),I("click",function(){return y(t),C(m().closeManifestationPopup())}),h(3,"\xd7"),u(),l(4,"h2"),h(5,"Manifestation Terminal"),u(),N(6,r7,28,8,"div",71)(7,s7,4,0,"ng-template",null,0,Nr),u()()}if(2&e){const t=Ir(8),i=m();p(6),M("ngIf",i.selectedForManifestation.length>0)("ngIfElse",t)}}let c7=(()=>{class e{constructor(t,i){this.http=t,this.branchService=i,this.stocks=[],this.filteredStocks=[],this.searchText="",this.filterDate="",this.filterConsignor="",this.selectedStock=null,this.editingStock=null,this.billingType="consignor",this.billingName="",this.billingAddress="",this.billingGSTIN="",this.billingPhone="",this.clientList=[],this.guestList=[],this.pkgList=[],this.productList=[],this.pickupType="consignor",this.pickupName="",this.pickupAddress="",this.pickupPhone="",this.deliveryType="consignee",this.deliveryName="",this.deliveryAddress="",this.deliveryPhone="",this.consignorTab="consignor",this.consigneeTab="consignee",this.email="",this.username="",this.branch=localStorage.getItem("branch")||"All Branches",this.consignmentNumber=localStorage.getItem("consignmentNumber")||"-999",this.date=(new Date).toISOString().split("T")[0],this.ewaybillNumber="",this.consignor="",this.consignorGST="",this.consignorAddress="",this.consignorPhone="",this.consignee="",this.consigneeGST="",this.consigneeAddress="",this.consigneePhone="",this.paymentMode="Account Credit",this.externalRefId="",this.invoices=[{number:"",value:0}],this.packages=[{type:"",amount:1}],this.products=[{type:"",amount:1}],this.charges={odc:0,unloading:0,docket:0,other:0,ccc:0},this.finalAmount=0,this.shipmentStatus="Pending",this.shipmentStatusDetails="",this.branches=[],this.hubs=[],this.availableRoutePoints=[],this.shipmentRoute=[],this.selectedRoutePoint=null,this.selectedRouteVehicle="",this.routeBaskets=[],this.onStorageChange=o=>{"branch"===o.key&&o.newValue&&o.newValue!==this.branch&&(this.branch=o.newValue,this.loadStocks())},this.showManifestAdjustmentPopup=!1,this.pendingManifestAdjustment=null,this.manifestAdjustments=[],this.manifestAdjustmentLines=[],this.manifestEditsById={},this.showManifestationPopup=!1,this.selectedForManifestation=[],this.manifestationNumber=""}addInvoice(){this.editingStock.invoices.push({number:"",value:0,packages:[],products:[]})}deleteInvoice(t){this.editingStock.invoices.splice(t,1)}addPackage(t){const i=this.editingStock.invoices[t];i.packages||(i.packages=[]),i.packages.push({type:"",amount:1})}deletePackage(t,i){const o=this.editingStock.invoices[t];o.packages&&o.packages.length>i&&o.packages.splice(i,1)}addProduct(t){const i=this.editingStock.invoices[t];i.products||(i.products=[]),i.products.push({type:"",amount:1,instock:0,intransitstock:0,deliveredstock:0})}deleteProduct(t,i){const o=this.editingStock.invoices[t];if(o.products&&o.products.length>i){if(this.isProductManifested(o.products[i]))return void alert("This product has been manifested and cannot be deleted.");o.products.splice(i,1)}}calculateFinalAmount(){const t=this.editingStock.invoices.reduce((r,s)=>r+(s.value||0),0),i=this.editingStock.packages.reduce((r,s)=>r+(s.amount||0),0),o=Object.values(this.charges).reduce((r,s)=>r+(Number(s)||0),0);this.editingStock.finalAmount=t+i+o}loadStocks(){const t=this.username||localStorage.getItem("username")||"",i=this.branch||localStorage.getItem("branch")||"All Branches";t?this.http.get("http://localhost:3000/api/newshipments",{params:{username:t,branch:i}}).subscribe({next:o=>{const r=(o||[]).map(s=>({...s,invoices:this.flattenInvoices(s.ewaybills||s.invoices||[])}));this.stocks=r.filter(s=>"Pending"===s.shipmentStatus||"In Transit/Pending"===s.shipmentStatus).sort((s,a)=>new Date(a.createdAt).getTime()-new Date(s.createdAt).getTime()),this.applyFilters()},error:o=>console.error("Error loading shipments:",o)}):console.error("Missing username for loading stocks")}flattenInvoices(t){return(t||[]).flatMap(i=>i.invoices||[])}getInStockAmountTotal(t){let i=0;return(t||[]).forEach(o=>{(o.products||[]).forEach(r=>{i+=Number(r.instock||0)})}),i}getInvoiceAmountTotal(t){let i=0;return(t||[]).forEach(o=>{(o.products||[]).forEach(r=>{i+=Number(r.amount||0)})}),i}getProductTotal(t,i){let o=0;return t.forEach(r=>{r.invoices.forEach(s=>{s.products.forEach(a=>{o+=a[i]||0})})}),o}applyFilters(){this.filteredStocks=this.stocks.filter(t=>(!this.searchText||t.consignmentNumber?.includes(this.searchText)||t.consignor?.includes(this.searchText))&&(!this.filterDate||new Date(t.date).toISOString().split("T")[0]===this.filterDate)&&(!this.filterConsignor||t.consignor?.toLowerCase().includes(this.filterConsignor.toLowerCase())))}toggleAllSelection(t){const i=t.target.checked;this.filteredStocks.forEach(o=>o.selected=i)}openStockDetails(t){this.selectedStock=t}closeStockDetails(){this.selectedStock=null}editStock(t){console.log("\ufffdo?\ufffd,? Edit stock:",t);const i=JSON.parse(JSON.stringify(t));i.invoices=this.flattenInvoices(i.ewaybills||i.invoices||[]),this.editingStock=i,this.manifestEditsById={},this.pendingManifestAdjustment=null,this.manifestAdjustmentLines=[],this.showManifestAdjustmentPopup=!1,this.captureOriginalProductValues(this.editingStock)}saveStockEdit(){if(!this.editingStock||(this.pendingManifestAdjustment||this.showManifestAdjustmentPopup)&&(this.applyManifestAdjustments(),this.pendingManifestAdjustment||this.showManifestAdjustmentPopup))return;this.syncEwaybillsFromInvoices(),console.log("kkkkkkkkkkklllllllllllllllll"+this.editingStock.consignmentNumber);const t=this.buildShipmentPayload(),i=Object.values(this.manifestEditsById||{});(i.length?Yg(i.map(r=>this.http.put(`http://localhost:3000/api/manifest/${r._id}`,r))):X([])).subscribe({next:()=>{this.http.put(`http://localhost:3000/api/newshipments/${t.consignmentNumber}`,t).subscribe({next:()=>{console.log("\ufffdo. Stock updated"),this.loadStocks(),this.editingStock=null},error:r=>console.error("\ufffd?O Error updating stock:",r)})},error:r=>{console.error("\ufffd?O Error updating manifests:",r),alert("Failed to update manifests. Please try again.")}})}cancelEdit(){this.editingStock=null,this.pendingManifestAdjustment=null,this.manifestAdjustmentLines=[],this.showManifestAdjustmentPopup=!1}captureOriginalProductValues(t){(t?.invoices||[]).forEach(i=>{(i.products||[]).forEach(o=>{o._originalAmount=Number(o.amount)||0,o._originalInstock=Number(o.instock)||0,o._originalIntransit=Number(o.intransitstock)||0,o._originalDelivered=Number(o.deliveredstock)||0})})}resetProductToOriginal(t){t.amount=Number(t._originalAmount)||0,t.instock=Number(t._originalInstock)||0,t.intransitstock=Number(t._originalIntransit)||0,t.deliveredstock=Number(t._originalDelivered)||0}normalizeInvoiceNumber(t){return String(t?.number||t?.invoicenum||"").trim()}normalizeProductType(t){return String(t?.type||"").trim()}getManifestTotals(){const t=this.manifestAdjustmentLines||[],i=t.filter(s=>s?.isDelivered).reduce((s,a)=>s+(Number(a.newManifestQty)||0),0),o=t.reduce((s,a)=>s+(Number(a.newManifestQty)||0),0);return{manifestTotal:o,deliveredTotal:i,intransitTotal:Math.max(0,o-i)}}syncEwaybillsFromInvoices(){if(this.editingStock?.ewaybills?.length&&this.editingStock?.invoices?.length)for(const t of this.editingStock.invoices||[]){const i=this.normalizeInvoiceNumber(t);for(const o of this.editingStock.ewaybills||[])for(const r of o.invoices||[])if(this.normalizeInvoiceNumber(r)===i)for(const s of r.products||[]){const a=(t.products||[]).find(c=>this.normalizeProductType(c)===this.normalizeProductType(s));a&&(s.amount=a.amount,s.instock=a.instock,s.intransitstock=a.intransitstock,s.deliveredstock=a.deliveredstock,void 0!==a.manifestQty&&(s.manifestQty=a.manifestQty))}}}applyProductUpdate(t,i,o,r){const s=String(i||"").trim(),a=String(o||"").trim();(t||[]).forEach(c=>{const d=this.normalizeInvoiceNumber(c);s&&d!==s||(c.products||[]).forEach(f=>{this.normalizeProductType(f)===a&&r(f)})})}isProductManifested(t){return Number(t?._originalIntransit??t?.intransitstock??0)>0}onProductAmountFocus(t,i,o){this.isProductManifested(i)&&this.openManifestAdjustmentPopup(t,i,i.amount,o)}onProductAmountChange(t,i,o,r){if(!this.editingStock)return;let s=Number(o);Number.isFinite(s)||(s=0),s<0&&(s=0);const a=Number(i._originalAmount)||0,c=Number(i._originalInstock)||0,d=Number(i._originalIntransit)||0,f=Number(i._originalDelivered)||0;if(!this.isProductManifested(i)){if(s>=a){const v=s-a;return i.amount=s,i.instock=c+v,i.intransitstock=d,void(i.deliveredstock=f)}const _=a-s;return _<=c?(i.amount=s,i.instock=c-_,i.intransitstock=d,void(i.deliveredstock=f)):(alert("Reduction exceeds available in-stock quantity."),void this.resetProductToOriginal(i))}if(a-s>c+d)return alert("Reduction exceeds available in-stock and manifested quantity."),void this.resetProductToOriginal(i);this.pendingManifestAdjustment&&this.pendingManifestAdjustment.productRef===i?(this.pendingManifestAdjustment.targetAmount=s,i.amount=s):this.openManifestAdjustmentPopup(t,i,s,r)}openManifestAdjustmentPopup(t,i,o,r){const s=this.editingStock?.consignmentNumber;if(!s)return;let a=this.normalizeInvoiceNumber(t);!a&&Number.isFinite(r)&&(a=`MAN-${String(s||"").trim()}-${Number(r)+1}`),this.pendingManifestAdjustment={consignmentNumber:s,invoiceNumber:a,productType:this.normalizeProductType(i),targetAmount:Number(o)||0,popupInstock:Number(i._originalInstock)||0,originalAmount:Number(i._originalAmount)||0,originalInstock:Number(i._originalInstock)||0,originalIntransit:Number(i._originalIntransit)||0,originalDelivered:Number(i._originalDelivered)||0,productRef:i},this.http.get(`http://localhost:3000/api/manifest/by-consignment/${encodeURIComponent(s)}`).subscribe({next:c=>{this.manifestAdjustments=c||[],this.buildManifestAdjustmentLines()},error:c=>{console.error("Error loading manifests:",c),alert("Failed to load manifests for adjustment."),this.cancelManifestAdjustments()}})}buildManifestAdjustmentLines(){const t=this.pendingManifestAdjustment;if(!t)return;const i=t.productType,o=t.consignmentNumber,r=[];for(const s of this.manifestAdjustments||[])for(const a of s.consignments||[])if(String(a.consignmentNumber||"").trim()===o)for(const c of a.invoices||[]){const d=this.normalizeInvoiceNumber(c);if(!t.invoiceNumber||d===t.invoiceNumber)for(const f of c.products||[]){if(this.normalizeProductType(f)!==i)continue;const g=Number(f.manifestQty)||0;r.push({manifestId:s._id,manifestationNumber:s.manifestationNumber,date:s.date,manifestStatus:s.mshipmentStatus,consignmentNumber:o,invoiceNumber:d,productType:i,originalManifestQty:g,newManifestQty:g,isDelivered:"delivered"===String(s.mshipmentStatus||"").toLowerCase()})}}if(!r.length)return alert("No manifest lines found for this product."),void this.cancelManifestAdjustments();this.manifestAdjustmentLines=r,this.syncPopupInstockWithTarget(),this.showManifestAdjustmentPopup=!0}onManifestQtyChange(t){let i=Number(t.newManifestQty);Number.isFinite(i)||(i=0),i<0&&(i=0),t.newManifestQty=i;const o=this.pendingManifestAdjustment;if(!o)return;const r=this.getManifestTotals();o.targetAmount=(Number(o.popupInstock)||0)+r.manifestTotal,o.productRef&&(o.productRef.amount=Number(o.targetAmount)||0)}getManifestLineTotal(){return this.getManifestTotals().manifestTotal}getPopupTargetTotal(){const t=this.pendingManifestAdjustment;return t&&Number(t.targetAmount)||0}getPopupDeliveredTotal(){return this.getManifestTotals().deliveredTotal}getPopupInstockTotal(){const t=this.pendingManifestAdjustment;if(!t)return 0;const i=this.getManifestTotals();return(Number(t.targetAmount)||0)-i.manifestTotal}syncPopupInstockWithTarget(){const t=this.pendingManifestAdjustment;if(!t)return;const i=this.getManifestTotals(),r=(Number(t.targetAmount)||0)-i.manifestTotal;t.popupInstock=Math.max(0,r),t.targetAmount=t.popupInstock+i.manifestTotal}syncTargetFromInstock(){const t=this.pendingManifestAdjustment;if(!t)return;const i=Math.max(0,Number(t.popupInstock)||0);t.popupInstock=i;const o=this.getManifestTotals();t.targetAmount=i+o.manifestTotal}onPopupTargetAmountChange(t){const i=this.pendingManifestAdjustment;if(!i)return;let o=Number(t);Number.isFinite(o)||(o=0),o<0&&(o=0),i.targetAmount=o,this.syncPopupInstockWithTarget(),i.productRef&&(i.productRef.amount=o)}onPopupInstockChange(t){const i=this.pendingManifestAdjustment;if(!i)return;let o=Number(t);Number.isFinite(o)||(o=0),o<0&&(o=0),i.popupInstock=o,this.syncTargetFromInstock(),i.productRef&&(i.productRef.amount=Number(i.targetAmount)||0)}applyManifestAdjustments(){const t=this.pendingManifestAdjustment;if(!t)return;const i=this.getManifestTotals(),o=Math.max(0,Number(t.popupInstock)||0),r=o+i.manifestTotal;if(o<0)return void alert("New Total Qty must be at least manifest + delivered quantities.");for(const a of this.manifestAdjustmentLines||[])a.updatedAmount=r,a.updatedInstock=o,a.updatedIntransit=i.intransitTotal,a.updatedDelivered=i.deliveredTotal;for(const a of this.manifestAdjustmentLines||[])this.queueManifestUpdate(a);const s=a=>{a.amount=r,a.instock=o,a.intransitstock=i.intransitTotal,a.deliveredstock=i.deliveredTotal,a.manifestQty=i.manifestTotal};t.productRef&&s(t.productRef),this.applyProductUpdate(this.editingStock?.invoices||[],t.invoiceNumber,t.productType,s),(this.editingStock?.ewaybills||[]).forEach(a=>{this.applyProductUpdate(a.invoices||[],t.invoiceNumber,t.productType,s)}),this.pendingManifestAdjustment=null,this.manifestAdjustmentLines=[],this.showManifestAdjustmentPopup=!1}cancelManifestAdjustments(){const t=this.pendingManifestAdjustment;t?.productRef&&this.resetProductToOriginal(t.productRef),this.pendingManifestAdjustment=null,this.manifestAdjustmentLines=[],this.showManifestAdjustmentPopup=!1}queueManifestUpdate(t){const i=(this.manifestAdjustments||[]).find(o=>o._id===t.manifestId);if(i){for(const o of i.consignments||[])if(String(o.consignmentNumber||"").trim()===t.consignmentNumber)for(const r of o.invoices||[])if(this.normalizeInvoiceNumber(r)===t.invoiceNumber)for(const a of r.products||[])this.normalizeProductType(a)===t.productType&&(a.manifestQty=Number(t.newManifestQty)||0,void 0!==t.updatedAmount&&(a.amount=Number(t.updatedAmount)||0,a.instock=Number(t.updatedInstock)||0,a.intransitstock=Number(t.updatedIntransit)||0,a.deliveredstock=Number(t.updatedDelivered)||0));this.manifestEditsById[i._id]=i}}buildShipmentPayload(){const t=JSON.parse(JSON.stringify(this.editingStock)),i=o=>{delete o._originalAmount,delete o._originalInstock,delete o._originalIntransit,delete o._originalDelivered};return(t.ewaybills||[]).forEach(o=>{(o.invoices||[]).forEach(r=>{(r.products||[]).forEach(s=>i(s))})}),(t.invoices||[]).forEach(o=>{(o.products||[]).forEach(r=>i(r))}),t}onConsignorSelect(t){const i=this.clientList.find(o=>o.clientName===t);i&&(this.editingStock.consignorGST=i.GSTIN,this.editingStock.consignorAddress=i.address,this.editingStock.consignorPhone=i.phoneNum)}onConsigneeSelect(t){const i=this.clientList.find(o=>o.clientName===t);i&&(this.editingStock.consigneeGST=i.GSTIN,this.editingStock.consigneeAddress=i.address,this.editingStock.consigneePhone=i.phoneNum)}onConsignorGuestSelect(t){const i=this.guestList.find(o=>o.guestName===t);i&&(this.editingStock.consignorGST="GUEST",this.editingStock.consignorAddress=i.address,this.editingStock.consignorPhone=i.phoneNum)}onConsigneeGuestSelect(t){const i=this.guestList.find(o=>o.guestName===t);i&&(this.editingStock.consigneeGST="GUEST",this.editingStock.editingStock.consigneeAddress=i.address,this.editingStock.editingStock.consigneePhone=i.phoneNum)}onPackageList(t){this.pkgList.find(o=>o.pkgName===t)}onProductList(t){this.productList.find(o=>o.productName===t)}addRoutePoint(){this.selectedRoutePoint&&(this.shipmentRoute.push({name:this.selectedRoutePoint.name,type:this.selectedRoutePoint.type,vehicleNo:this.selectedRouteVehicle||""}),this.selectedRoutePoint=null,this.selectedRouteVehicle="")}removeRoutePoint(t){this.shipmentRoute.splice(t,1)}loadBranches(){const t=localStorage.getItem("email");this.http.get(`http://localhost:3000/api/branches?email=${t}`).subscribe({next:i=>{console.log("Branches loaded:",i),this.branches=i,this.updateAvailableRoutePoints()},error:i=>console.error("Error loading branches:",i)})}loadHubs(){const t=localStorage.getItem("email");this.http.get(`http://localhost:3000/api/hubs?email=${t}`).subscribe({next:i=>{console.log("Hubs loaded:",i),this.hubs=i,this.updateAvailableRoutePoints()},error:i=>console.error("Error loading hubs:",i)})}updateAvailableRoutePoints(){this.availableRoutePoints=[...this.branches.map(t=>({name:t.branchName,type:"Branch",vehicles:(t.vehicles||[]).map(i=>i.vehicleNo).filter(Boolean)})),...this.hubs.map(t=>({name:t.hubName,type:"Hub",vehicles:(t.deliveryAddresses||[]).flatMap(i=>(i.vehicles||[]).map(o=>o.vehicleNo)).filter(Boolean)}))]}onRoutePointChange(){this.selectedRouteVehicle=this.selectedRoutePoint?.vehicles?.[0]||""}buildRouteString(){return this.shipmentRoute.length?((this.routeBaskets||[]).length>0?`$$${this.buildBasketDescriptor()}$$ `:"$$All$$ ")+this.shipmentRoute.map(o=>{const r=String(o.vehicleNo||"").trim();return r?`${o.name} (${o.type})|${r}`:`${o.name} (${o.type})`}).join(" -> "):""}buildBasketDescriptor(){return(this.routeBaskets||[]).filter(t=>t&&String(t.labelKey||"").trim()&&Number(t.qty)>0).map(t=>{const o=String(t.labelKey||"").trim().split("|"),r=o.shift()||"",s=o.join("|");return`${s?`${r}:${s}`:r}-${Number(t.qty)}`}).join("|")}addRouteBasket(){const t=this.getBasketOptions();this.routeBaskets.push({labelKey:t.length?t[0].key:"",qty:0})}removeRouteBasket(t){t<0||t>=this.routeBaskets.length||this.routeBaskets.splice(t,1)}getBasketOptions(){const t=(this.selectedForManifestation||[])[0];if(!t)return[];const i=[],o=t.consignmentNumber||"";o&&i.push({key:`Consignment|${o}`,text:`Consignment: ${o}`});const r=t.ewaybills||[];return r.length?(r.forEach((s,a)=>{const c=s.number||s.ewaybillNumber||`EWB-${a+1}`;i.push({key:`Ewaybill|${c}`,text:`Ewaybill: ${c}`}),(s.invoices||[]).forEach((d,f)=>{const g=d.number||d.invoicenum||`INV-${f+1}`;i.push({key:`Invoice|${g}`,text:`Invoice: ${g}`}),(d.products||[]).forEach((_,v)=>{const b=_.type||_.productName||`Product-${v+1}`;i.push({key:`Product|${g}:${b}`,text:`Product: ${g} - ${b}`})})})}),i):((t.invoices||[]).forEach((s,a)=>{const c=s.number||s.invoicenum||`INV-${a+1}`;i.push({key:`Invoice|${c}`,text:`Invoice: ${c}`}),(s.products||[]).forEach((d,f)=>{const g=d.type||d.productName||`Product-${f+1}`;i.push({key:`Product|${c}:${g}`,text:`Product: ${c} - ${g}`})})}),i)}ngOnInit(){this.email=localStorage.getItem("email")||"",this.username=localStorage.getItem("username")||"",this.branch=this.branchService.currentBranch||localStorage.getItem("branch")||"All Branches",this.branchSub=this.branchService.branch$.subscribe(t=>{this.branch=t,this.loadStocks()}),this.branchCheck=setInterval(()=>{const t=localStorage.getItem("branch")||"All Branches";t!==this.branch&&(this.branch=t,this.loadStocks())},1e3),window.addEventListener("storage",this.onStorageChange),this.http.get(`http://localhost:3000/api/clients/clientslist?emailId=${this.email}`).subscribe({next:t=>this.clientList=t,error:t=>console.error("Error fetching client list",t),complete:()=>console.log("Client list fetch complete")}),this.http.get(`http://localhost:3000/api/guests/guestslist?emailId=${this.email}`).subscribe({next:t=>this.guestList=t,error:t=>console.error("Error fetching guest list",t),complete:()=>console.log("Guest list fetch complete")}),this.http.get(`http://localhost:3000/api/pkgs/pkglist?emailId=${this.email}`).subscribe({next:t=>this.pkgList=t,error:t=>console.error("Error fetching package list",t),complete:()=>console.log("Package list fetch complete")}),this.http.get(`http://localhost:3000/api/products/productlist?emailId=${this.email}`).subscribe({next:t=>this.productList=t,error:t=>console.error("Error fetching product list",t),complete:()=>console.log("Product list fetch complete")}),this.loadBranches(),this.loadHubs()}ngOnDestroy(){this.branchSub?.unsubscribe(),this.branchCheck&&clearInterval(this.branchCheck),window.removeEventListener("storage",this.onStorageChange)}getEwaybillNumberFromDB(t){return this.stocks.find(o=>o.consignmentNumber===t)?.ewaybillNumber||""}openManifestationPopup(){"All Branches"!==this.branch?(this.selectedForManifestation=this.filteredStocks.filter(t=>t.selected),0!==this.selectedForManifestation.length?(this.routeBaskets=[],this.selectedForManifestation=this.selectedForManifestation.map(t=>{const i={...t,ewayBillRequired:!1,ewaybillNumber:this.getEwaybillNumberFromDB(t.consignmentNumber)};return i.invoices?.forEach(o=>{o.products?.forEach(r=>{const s=Number(r.amount)||0,a=Number(r.intransitstock)||0,c=Number(r.deliveredstock)||0,d=Math.max(0,s-a-c);!Number(r.instock)&&d>0&&(r.instock=d),r.manifestQty=Number(r.instock)||d,r.manifestQtyTouched=!1})}),i}),this.showManifestationPopup=!0):alert("\u26a0\ufe0f Please select at least one consignment to manifest.")):alert("Please select a specific branch before manifesting consignments.")}closeManifestationPopup(){this.showManifestationPopup=!1}finalizeManifestation(){if(0===this.selectedForManifestation.length)return void alert("No consignments selected.");if(this.shipmentRoute.some(o=>!String(o.vehicleNo||"").trim()))return void alert("Please select a vehicle for each route point.");if(this.routeBaskets.length&&!this.buildBasketDescriptor())return void alert("Please add at least one basket with a quantity.");const t=this.buildRouteString();if(!t)return void alert("Please add at least one route point.");const i=(this.selectedForManifestation||[]).map(o=>{const r=(o.ewaybills||[]).map(a=>({...a,routes:t})),s={...o,shipmentStatus:"In Transit",ewaybills:r};return this.http.put(`http://localhost:3000/api/newshipments/${o.consignmentNumber}`,s)});i.length&&Yg(i).subscribe({next:()=>{this.showManifestationPopup=!1,this.selectedForManifestation=[],this.filteredStocks.forEach(o=>o.selected=!1),this.loadStocks()},error:o=>{console.error("Error updating consignment status:",o),alert("Failed to update consignment status.")}})}validateManifestQty(t){t.manifestQtyTouched=!0,t.manifestQty>t.instock&&(alert(`\u26a0\ufe0f Manifest quantity cannot exceed available stock (${t.instock}).`),t.manifestQty=t.instock),t.manifestQty<0&&(alert("\u26a0\ufe0f Manifest quantity cannot be negative."),t.manifestQty=0)}printReceipts(){const t=this.filteredStocks?.filter(i=>i.selected)||[];0!==t.length?fetch("assets/receipt-template.html").then(i=>i.text()).then(i=>{let o="\n        <html>\n          <head>\n            <style>\n              body { font-family: Arial, sans-serif; padding: 20px; }\n              h2 { margin-bottom: 0; }\n              table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n              th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }\n              th { background-color: #f2f2f2; }\n              .page-break { page-break-after: always; }\n            </style>\n          </head>\n          <body>\n      ";t.forEach((s,a)=>{const c=s.invoices.flatMap(f=>f.products.map(g=>`\n            <tr>\n              <td>${f.number}</td>\n              <td>${g.type}</td>\n              <td>${g.instock}</td>\n              <td>${g.manifestQty}</td>\n              <td>${g.amount}</td>\n            </tr>\n          `)).join(""),d=i.replace("{{consignmentNumber}}",s.consignmentNumber).replace("{{consignor}}",s.consignor).replace("{{rows}}",c);o+=d,a<t.length-1&&(o+='<div class="page-break"></div>')}),o+="</body></html>";const r=window.open("","_blank");r&&(r.document.open(),r.document.write(o),r.document.close(),r.print())}):alert("No consignments selected.")}static{this.\u0275fac=function(i){return new(i||e)(O(ot),O(vm))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-stocks"]],standalone:!0,features:[Fe],decls:33,vars:8,consts:[["noSelection",""],["showEwaybill",""],[1,"stocks-container"],[1,"filters"],["type","text","placeholder","Search by consignment no. or consignor",3,"ngModelChange","input","ngModel"],["type","date",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Filter by consignor",3,"ngModelChange","input","ngModel"],[3,"click"],[1,"actions"],[1,"stocks-table"],["type","checkbox",3,"change"],[3,"click",4,"ngFor","ngForOf"],["class","modal details-modal",4,"ngIf"],["class","modal edit-stock-modal",4,"ngIf"],["class","modal",4,"ngIf"],["type","checkbox",3,"ngModelChange","click","ngModel"],[1,"modal","details-modal"],[1,"modal-content","details-content"],["type","button",1,"details-close",3,"click"],[1,"details-header"],[1,"details-sub"],[1,"details-status"],[1,"stock-details","details-grid"],[1,"details-products"],["class","details-invoice",4,"ngFor","ngForOf"],[1,"details-invoice"],[1,"details-invoice-title"],[1,"details-product-list"],[4,"ngFor","ngForOf"],[1,"product-name"],[1,"product-meta"],[1,"modal","edit-stock-modal"],[1,"modal-content","edit-stock-content"],[1,"edit-stock-header"],[1,"edit-stock-meta"],[1,"edit-stock-section"],[1,"edit-stock-grid"],[3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[1,"tabs","edit-stock-tabs"],["class","edit-stock-grid",4,"ngIf"],[1,"edit-stock-radio"],["type","radio","name","billing","value","consignor",3,"ngModelChange","ngModel"],["type","radio","name","billing","value","different",3,"ngModelChange","ngModel"],["class","invoice-block",4,"ngFor","ngForOf"],["type","button",1,"ghost",3,"click"],["type","number",3,"ngModelChange","ngModel"],[1,"edit-stock-actions"],[1,"ghost",3,"click"],[1,"primary",3,"click"],[3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["readonly","",3,"ngModelChange","ngModel"],[3,"value"],[1,"invoice-block"],[1,"grid-3"],["placeholder","Invoice Number",3,"ngModelChange","ngModel"],["placeholder","Invoice Value","type","number",3,"ngModelChange","ngModel"],["type","button",1,"danger",3,"click"],["class","grid-4",4,"ngFor","ngForOf"],[1,"grid-4"],["placeholder","Amount*","type","number",3,"ngModelChange","ngModel"],["placeholder","Amount*","type","number",3,"ngModelChange","focus","ngModel"],[1,"modal"],[1,"modal-content"],[4,"ngIf"],["class","stocks-table",4,"ngIf"],[1,"terminal-buttons"],["type","number","min","0",3,"ngModelChange","ngModel"],[1,"modal-content","terminal-style"],[1,"close",3,"click"],[4,"ngIf","ngIfElse"],["class","consignment-block",4,"ngFor","ngForOf"],[1,"routing-section"],[1,"routing-baskets"],["class","basket-row",4,"ngFor","ngForOf"],["type","button",3,"click"],[1,"routing-controls"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngModelChange","ngModel","disabled"],["value",""],[1,"route-list"],[1,"consignment-block"],[1,"ewaybill-section"],[1,"eway-toggle-label"],["type","checkbox",1,"eway-toggle-input",3,"ngModelChange","ngModel"],[1,"eway-toggle-slider"],[1,"eway-toggle-text"],[1,"product-line"],["type","number","min","0","readonly","","disabled","",1,"manifest-input",3,"ngModelChange","max","ngModel"],[1,"basket-row"],["type","number","min","0","placeholder","Qty",3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"remove-btn",3,"click"]],template:function(i,o){1&i&&(l(0,"div",2)(1,"h2"),h(2,"Stocks"),u(),l(3,"div",3)(4,"input",4),D("ngModelChange",function(s){return S(o.searchText,s)||(o.searchText=s),s}),I("input",function(){return o.applyFilters()}),u(),l(5,"input",5),D("ngModelChange",function(s){return S(o.filterDate,s)||(o.filterDate=s),s}),I("change",function(){return o.applyFilters()}),u(),l(6,"input",6),D("ngModelChange",function(s){return S(o.filterConsignor,s)||(o.filterConsignor=s),s}),I("input",function(){return o.applyFilters()}),u(),l(7,"button",7),I("click",function(){return o.openManifestationPopup()}),h(8,"Manifestation"),u(),l(9,"button",7),I("click",function(){return o.printReceipts()}),h(10,"\u{1f5a8}\ufe0f Print Receipts"),u()(),W(11,"div",8),l(12,"table",9)(13,"thead")(14,"tr")(15,"th")(16,"input",10),I("change",function(s){return o.toggleAllSelection(s)}),u()(),l(17,"th"),h(18,"Consignment No."),u(),l(19,"th"),h(20,"Consignor"),u(),l(21,"th"),h(22,"Delivery Address"),u(),l(23,"th"),h(24,"No. of Products"),u(),l(25,"th"),h(26,"Actions"),u()()(),l(27,"tbody"),N(28,S9,14,5,"tr",11),u()()(),N(29,E9,50,14,"div",12)(30,G9,95,28,"div",13)(31,W9,18,4,"div",14)(32,a7,9,2,"div",14)),2&i&&(p(4),w("ngModel",o.searchText),p(),w("ngModel",o.filterDate),p(),w("ngModel",o.filterConsignor),p(22),M("ngForOf",o.filteredStocks),p(),M("ngIf",o.selectedStock),p(),M("ngIf",o.editingStock),p(),M("ngIf",o.showManifestAdjustmentPopup),p(),M("ngIf",o.showManifestationPopup))},dependencies:[Bt,Et,_t,ru,yt,ci,li,rt,bn,La,Mn,Ku,ft,Ga,Ju,st],styles:['.stocks-container[_ngcontent-%COMP%]{padding:20px;color:var(--stock-text)}[_nghost-%COMP%]{--stock-bg: #f6f8fb;--stock-card: #ffffff;--stock-border: #e5e7eb;--stock-text: #0f172a;--stock-muted: #6b7280;--stock-primary: #2563eb;--stock-primary-strong: #1e3a8a;--stock-danger: #dc2626}.filters[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:15px}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid var(--stock-border);border-radius:10px;background:#fff;color:var(--stock-text)}.filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 14px;border-radius:10px;border:1px solid var(--stock-border);background:#fff;color:var(--stock-text);cursor:pointer}.filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:var(--stock-primary);color:var(--stock-primary-strong)}.stocks-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:var(--stock-card);border:1px solid var(--stock-border);border-radius:12px;overflow:hidden}.stocks-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .stocks-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid var(--stock-border);padding:8px;text-align:left}.stocks-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;font-weight:600}.stocks-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8fafc;cursor:pointer}.stocks-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;border-radius:10px;border:1px solid var(--stock-primary);background:var(--stock-primary);color:#fff;cursor:pointer}.stocks-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--stock-primary-strong);border-color:var(--stock-primary-strong)}.actions[_ngcontent-%COMP%]{margin-top:15px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;align-items:center;justify-content:center}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;width:500px;max-height:80vh;overflow-y:auto;border-radius:8px;position:relative}.details-modal[_ngcontent-%COMP%]{background:#0f172a8c}.details-content[_ngcontent-%COMP%]{background:var(--stock-bg);color:var(--stock-text);width:min(860px,92vw);max-height:85vh;border-radius:16px;border:1px solid var(--stock-border);box-shadow:0 18px 40px #0f172a33}.details-close[_ngcontent-%COMP%]{position:absolute;right:18px;top:12px;background:transparent;border:none;font-size:24px;cursor:pointer;color:var(--stock-muted)}.details-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:16px;gap:12px}.details-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px}.details-sub[_ngcontent-%COMP%]{margin:6px 0 0;color:var(--stock-muted);font-size:13px}.details-status[_ngcontent-%COMP%]{background:#e0f2fe;color:#0ea5e9;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:600;white-space:nowrap}.details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px 16px;background:var(--stock-card);border:1px solid var(--stock-border);border-radius:12px;padding:12px;margin-bottom:16px}.details-products[_ngcontent-%COMP%]{display:grid;gap:12px}.details-invoice[_ngcontent-%COMP%]{background:var(--stock-card);border:1px solid var(--stock-border);border-radius:12px;padding:12px}.details-invoice-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:8px}.details-product-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:grid;gap:8px}.details-product-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;justify-content:space-between;border-bottom:1px solid var(--stock-border);padding-bottom:6px}.details-product-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.product-name[_ngcontent-%COMP%]{font-weight:600}.product-meta[_ngcontent-%COMP%]{color:var(--stock-muted);font-size:13px}@media (max-width: 700px){.details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.details-product-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}.edit-stock-modal[_ngcontent-%COMP%]{background:#0f172a8c}.edit-stock-content[_ngcontent-%COMP%]{background:var(--stock-bg);color:var(--stock-text);width:min(1100px,92vw);max-height:85vh;border-radius:16px;border:1px solid var(--stock-border);box-shadow:0 18px 40px #0f172a33}.edit-stock-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:16px}.edit-stock-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;color:var(--stock-text)}.edit-stock-meta[_ngcontent-%COMP%]{margin:6px 0 0;color:var(--stock-muted);font-size:13px}.edit-stock-section[_ngcontent-%COMP%]{background:var(--stock-card);border:1px solid var(--stock-border);border-radius:12px;padding:14px;margin-bottom:14px}.edit-stock-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:15px}.edit-stock-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}.edit-stock-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-weight:600;font-size:13px;color:var(--stock-text)}.edit-stock-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .edit-stock-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .edit-stock-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:1px solid var(--stock-border);border-radius:10px;padding:8px 10px;font-size:13px;background:#fff;color:var(--stock-text)}.edit-stock-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;resize:vertical}.edit-stock-tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:12px}.edit-stock-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;border-radius:999px;border:1px solid var(--stock-border);background:#fff;color:var(--stock-muted);cursor:pointer}.edit-stock-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#eef2ff;border-color:#c7d2fe;color:var(--stock-primary-strong);font-weight:600}.edit-stock-radio[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;margin:10px 0 4px;color:var(--stock-muted);font-size:13px}.edit-stock-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:12px}.edit-stock-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;border:1px solid var(--stock-border);padding:8px 14px;font-size:13px;cursor:pointer;background:#fff;color:var(--stock-text)}.edit-stock-content[_ngcontent-%COMP%]   button.primary[_ngcontent-%COMP%]{background:var(--stock-primary);border-color:var(--stock-primary);color:#fff}.edit-stock-content[_ngcontent-%COMP%]   button.ghost[_ngcontent-%COMP%]{background:#f8fafc;color:var(--stock-text)}.edit-stock-content[_ngcontent-%COMP%]   button.danger[_ngcontent-%COMP%]{border-color:#fecaca;background:#fef2f2;color:var(--stock-danger)}.edit-stock-content[_ngcontent-%COMP%]   .grid-3[_ngcontent-%COMP%], .edit-stock-content[_ngcontent-%COMP%]   .grid-4[_ngcontent-%COMP%]{gap:10px}.edit-stock-content[_ngcontent-%COMP%]   .grid-3[_ngcontent-%COMP%], .edit-stock-content[_ngcontent-%COMP%]   .grid-4[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr))}@media (max-width: 900px){.edit-stock-grid[_ngcontent-%COMP%], .edit-stock-content[_ngcontent-%COMP%]   .grid-3[_ngcontent-%COMP%], .edit-stock-content[_ngcontent-%COMP%]   .grid-4[_ngcontent-%COMP%]{grid-template-columns:1fr}.edit-stock-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}.close[_ngcontent-%COMP%]{position:absolute;right:15px;top:10px;font-size:24px;cursor:pointer}.modal-content.terminal-style[_ngcontent-%COMP%]{background-color:#1e1e1e;color:#d4d4d4;font-family:Courier New,monospace;border-radius:10px;padding:20px;width:80%;max-height:80vh;overflow-y:auto}.consignment-block[_ngcontent-%COMP%]{background:#2a2a2a;padding:10px;border-radius:6px;margin-bottom:10px}.terminal-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}.terminal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 20px;border:none;border-radius:6px;cursor:pointer}.terminal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background-color:#007acc;color:#fff}.terminal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background-color:#555;color:#fff}.product-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:4px 0}.manifest-input[_ngcontent-%COMP%]{width:60px;padding:4px;margin-left:4px;background-color:#333;color:#fff;border:1px solid #555;border-radius:4px;text-align:right}.eway-toggle-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;position:relative;cursor:pointer;-webkit-user-select:none;user-select:none}.eway-toggle-input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.eway-toggle-slider[_ngcontent-%COMP%]{position:relative;width:40px;height:20px;background-color:#ccc;border-radius:20px;transition:background-color .3s}.eway-toggle-slider[_ngcontent-%COMP%]:before{content:"";position:absolute;height:16px;width:16px;left:2px;bottom:2px;background-color:#fff;border-radius:50%;transition:transform .3s}.eway-toggle-input[_ngcontent-%COMP%]:checked + .eway-toggle-slider[_ngcontent-%COMP%]{background-color:#4caf50}.eway-toggle-input[_ngcontent-%COMP%]:checked + .eway-toggle-slider[_ngcontent-%COMP%]:before{transform:translate(20px)}.eway-toggle-text[_ngcontent-%COMP%]{font-weight:500}.routing-section[_ngcontent-%COMP%]{margin-top:20px}.routing-controls[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.route-list[_ngcontent-%COMP%]{list-style:none;padding-left:0}.route-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.remove-btn[_ngcontent-%COMP%]{background:none;border:none;color:red;cursor:pointer}']})}}return e})();function l7(e,n){if(1&e&&(l(0,"li"),h(1),u()),2&e){const t=n.$implicit;p(),Tl(" ",t.type," \u2014 Manifested: ",t.manifestQty," / Stock: ",t.instock," ")}}function u7(e,n){if(1&e&&(l(0,"li")(1,"b"),h(2),u(),h(3),l(4,"ul"),N(5,l7,2,3,"li",13),u()()),2&e){const t=n.$implicit;p(2),U("#",t.number,""),p(),U(" (\u20b9",t.value,") "),p(2),M("ngForOf",t.products)}}function d7(e,n){if(1&e&&(l(0,"div",19)(1,"strong"),h(2,"Consignment:"),u(),h(3),W(4,"br"),l(5,"strong"),h(6,"Consignor:"),u(),h(7),W(8,"br"),l(9,"strong"),h(10,"Invoices:"),u(),l(11,"ul"),N(12,u7,6,3,"li",13),u()()),2&e){const t=n.$implicit;p(3),U(" ",t.consignmentNumber,""),p(4),U(" ",t.consignor,""),p(5),M("ngForOf",t.invoices)}}function h7(e,n){if(1&e){const t=A();l(0,"tr")(1,"td")(2,"input",15),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.selected,o)||(r.selected=o),C(o)}),u()(),l(3,"td"),h(4),u(),l(5,"td"),h(6),u(),l(7,"td"),h(8),Tr(9,"date"),u(),l(10,"td")(11,"div",16),N(12,d7,13,3,"div",17),u()(),l(13,"td"),h(14),u(),l(15,"td")(16,"button",18),I("click",function(){const o=y(t).$implicit;return C(m().openEditPopup(o))}),h(17,"\u270f\ufe0f Edit"),u()()()}if(2&e){const t=n.$implicit;p(2),w("ngModel",t.selected),p(2),L(t.manifestationNumber),p(2),L(t.mshipmentStatus),p(2),L(Er(9,6,t.date,"mediumDate")),p(4),M("ngForOf",t.consignments),p(2),L(t.branch)}}function f7(e,n){if(1&e){const t=A();l(0,"tr")(1,"td"),h(2),u(),l(3,"td"),h(4),u(),l(5,"td"),h(6),u(),l(7,"td"),h(8),u(),l(9,"td")(10,"input",33),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.productRef.manifestQty,o)||(r.productRef.manifestQty=o),C(o)}),I("ngModelChange",function(){const o=y(t).$implicit;return C(m(3).onManifestQtyChange(o))}),u(),l(11,"div",34),h(12),u()()()}if(2&e){const t=n.$implicit;Oe("row-over-limit",m(3).isRowOverLimit(t)),p(2),L(t.consignmentNumber),p(2),L(t.invoiceNumber),p(2),L(t.productType),p(2),L(t.instock),p(2),w("ngModel",t.productRef.manifestQty),M("min",0)("max",t.maxAllowed),p(2),U("Max: ",t.maxAllowed,"")}}function p7(e,n){1&e&&(l(0,"div",35),h(1," Manifested quantity cannot exceed the previous in-stock quantity. "),u())}function g7(e,n){if(1&e&&(l(0,"div",28)(1,"h4"),h(2,"Consignments & Products"),u(),l(3,"div",29)(4,"table",30)(5,"thead")(6,"tr")(7,"th"),h(8,"Consignment"),u(),l(9,"th"),h(10,"Invoice"),u(),l(11,"th"),h(12,"Product"),u(),l(13,"th"),h(14,"In Stock"),u(),l(15,"th"),h(16,"Manifested Qty"),u()()(),l(17,"tbody"),N(18,f7,13,10,"tr",31),u()()(),N(19,p7,2,0,"div",32),u()),2&e){const t=m(2);p(18),M("ngForOf",t.editManifestRows),p(),M("ngIf",t.hasOverManifestLimit())}}function m7(e,n){if(1&e){const t=A();l(0,"div",20)(1,"div",21)(2,"h3"),h(3,"Edit Manifest"),u(),l(4,"label"),h(5,"Manifest #:"),u(),W(6,"input",22),l(7,"label"),h(8,"Status:"),u(),W(9,"input",22),l(10,"label"),h(11,"Date:"),u(),W(12,"input",23),Tr(13,"date"),l(14,"label"),h(15,"Branch:"),u(),W(16,"input",22),N(17,g7,20,2,"div",24),l(18,"div",25)(19,"button",26),I("click",function(){return y(t),C(m().finalizeEdit())}),h(20,"Save"),u(),l(21,"button",27),I("click",function(){return y(t),C(m().closeEditPopup())}),h(22,"Cancel"),u()()()()}if(2&e){const t=m();p(6),M("value",t.selectedManifest.manifestationNumber),p(3),M("value",t.selectedManifest.mshipmentStatus),p(3),M("value",Er(13,5,t.selectedManifest.date,"yyyy-MM-dd")),p(4),M("value",t.selectedManifest.branch),p(),M("ngIf",t.editManifestRows.length)}}function _7(e,n){if(1&e&&(l(0,"li"),h(1),u()),2&e){const t=n.$implicit;p(),L(t.manifestationNumber)}}function v7(e,n){if(1&e){const t=A();l(0,"div",20)(1,"div",36)(2,"h3"),h(3,"Confirm Delivery"),u(),l(4,"p")(5,"b"),h(6,"Selected Manifests:"),u()(),l(7,"ul"),N(8,_7,2,1,"li",13),u(),l(9,"div",25)(10,"button",26),I("click",function(){return y(t),C(m().finalizeDelivery())}),h(11,"\u2705 Deliver"),u(),l(12,"button",27),I("click",function(){return y(t),C(m().closeDeliveryPopup())}),h(13,"\u274c Cancel"),u()()()()}if(2&e){const t=m();p(8),M("ngForOf",t.selectedForDelivery)}}function y7(e,n){if(1&e&&(l(0,"li"),h(1),u()),2&e){const t=n.$implicit;p(),L(t.manifestationNumber)}}function C7(e,n){if(1&e){const t=A();l(0,"div",20)(1,"div",36)(2,"h3"),h(3,"Confirm Cancellation"),u(),l(4,"p")(5,"b"),h(6,"Selected Manifests:"),u()(),l(7,"ul"),N(8,y7,2,1,"li",13),u(),l(9,"div",25)(10,"button",26),I("click",function(){return y(t),C(m().finalizeCancel())}),h(11,"\u2705 Confirm Cancel"),u(),l(12,"button",27),I("click",function(){return y(t),C(m().closeCancelPopup())}),h(13,"\u274c Close"),u()()()()}if(2&e){const t=m();p(8),M("ngForOf",t.selectedForCancel)}}let b7=(()=>{class e{closeEditPopup(){this.showEditPopup=!1,this.selectedManifest=null,this.editManifestRows=[]}finalizeEdit(){if(!this.selectedManifest)return;if(localStorage.getItem("email"),!this.validateEditManifestRows())return void alert("Please fix manifest quantities that exceed the consignment product quantity.");const i=(this.editManifestRows||[]).map(o=>{const r=Number(o.productRef?.manifestQty)||0,s=Number(o.productRef?.instock)||0,a=Number(o.productRef?.intransitstock)||0,c=r-(Number(o.originalManifestQty)||0),d=s-(Number(o.originalInstock)||0),f=a-(Number(o.originalIntransit)||0);return c||d||f?{consignmentNumber:o.consignmentNumber,invoiceNumber:o.invoiceNumber,productType:o.productType,deltaManifestQty:c,deltaInstock:d,deltaIntransitstock:f,createdBy:this.username}:null}).filter(Boolean);i.length?this.http.post("http://localhost:3000/api/manifest-adjustments/add",{manifestId:this.selectedManifest._id,manifestationNumber:this.selectedManifest.manifestationNumber,adjustments:i}).subscribe({next:()=>{alert("Manifest adjustment saved."),this.loadManifests(),this.closeEditPopup()},error:o=>console.error("\ufffd?O Error saving manifest adjustment:",o)}):alert("No changes to save.")}constructor(t){this.http=t,this.allManifests=[],this.manifests=[],this.filteredManifests=[],this.searchText="",this.filterDate="",this.filterConsignor="",this.selectedManifest=null,this.showDeliveryPopup=!1,this.selectedForDelivery=[],this.email="",this.username="",this.branch=localStorage.getItem("branch")||"All Branches",this.showCancelPopup=!1,this.selectedForCancel=[],this.showEditPopup=!1,this.editManifestRows=[]}ngOnInit(){this.email=localStorage.getItem("email")||"",this.username=localStorage.getItem("username")||"",this.branch=localStorage.getItem("branch")||"All Branches",this.loadManifests(),this.branchCheck=setInterval(()=>{const t=localStorage.getItem("branch")||"All Branches";t!==this.branch&&(this.branch=t,this.loadManifests())},1e3)}loadManifests(){this.http.get("http://localhost:3000/api/manifest",{params:{email:localStorage.getItem("email")||"",branch:localStorage.getItem("branch")||""}}).subscribe({next:t=>{this.allManifests=t.filter(i=>"Cancelled"!=i.mshipmentStatus),this.manifests=t.filter(i=>"Delivered"!=i.mshipmentStatus&&"Cancelled"!=i.mshipmentStatus).sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime()),this.filteredManifests=[...this.manifests]},error:t=>console.error("\u274c Error loading shipments:",t)})}applyFilters(){this.filteredManifests=this.manifests.filter(t=>(!this.searchText||t.manifestationNumber?.includes(this.searchText)||t.consignments?.some(i=>i.consignor?.includes(this.searchText)))&&(!this.filterDate||new Date(t.date).toISOString().split("T")[0]===this.filterDate)&&(!this.filterConsignor||t.consignments?.some(i=>i.consignor?.toLowerCase().includes(this.filterConsignor.toLowerCase()))))}toggleAllSelection(t){const i=t.target.checked;this.filteredManifests.forEach(o=>o.selected=i)}openDeliveryPopup(){"All Branches"!==this.branch?(this.selectedForDelivery=this.filteredManifests.filter(t=>t.selected),0!==this.selectedForDelivery.length?this.showDeliveryPopup=!0:alert("\u26a0\ufe0f Please select at least one manifest to deliver.")):alert("Please select a specific branch before confirming delivery.")}closeDeliveryPopup(){this.showDeliveryPopup=!1}finalizeDelivery(){"All Branches"!==this.branch?0!==this.selectedForDelivery.length?(localStorage.getItem("email"),this.selectedForDelivery.forEach(i=>{i.consignments.forEach(o=>{o.invoices.forEach(a=>{a.products.forEach(c=>{const d=Number(c.intransitstock)||0;d>0&&(c.deliveredstock=(c.deliveredstock||0)+d,c.manifestQty=d),c.intransitstock=0})});const r=o.invoices.every(a=>a.products.every(c=>(Number(c.deliveredstock)||0)>=(Number(c.amount)||0)||0===(Number(c.instock)||0)&&0===(Number(c.intransitstock)||0)));console.log("\u{1f69a} Updating consignment1  to status:",r);const s={...o,mshipmentStatus:"Delivered"};console.log("\u{1f69a} Updating consignment1  to status:",s.mshipmentStatus),this.updateConsignment(this.username,s)}),i={...i,mshipmentStatus:"Delivered"},console.log(`\u{1f69a} Updating consignment ${i.manifestationNumber} to status:`,i),this.http.post("http://localhost:3000/api/manifest/manifestationNumber",i).subscribe({next:()=>{console.log("\u2705 Manifest Stock updated")},error:o=>console.error("\u274c Error updating stock:",o)})}),this.showDeliveryPopup=!1,alert("\u2705 Delivery completed successfully!"),this.filteredManifests.forEach(i=>i.selected=!1),this.loadManifests()):alert("No manifests selected for delivery."):alert("Please select a specific branch before confirming delivery.")}updatedstkConsignmentfn(t){this.http.put(`http://localhost:3000/api/newshipments/${t.consignmentNumber}`,t).subscribe({next:()=>{console.log("\u2705 Stock updated")},error:i=>console.error("\u274c Error updating stock:",i)})}updateConsignment(t,i){const o=[];(i.invoices||[]).forEach(s=>{(s.products||[]).forEach(a=>{const c=String(a.type||"").trim(),d=Number(a.manifestQty)||0;!c||d<=0||o.push({type:c,qty:d})})}),o.length&&this.http.post("http://localhost:3000/api/newshipments/deliver",{consignmentNumber:i.consignmentNumber,items:o}).subscribe({next:()=>{this.loadManifests()},error:s=>console.error("Error updating delivery:",s)})}openCancelPopup(){this.selectedForCancel=this.filteredManifests.filter(t=>t.selected),0!==this.selectedForCancel.length?this.showCancelPopup=!0:alert("\u26a0\ufe0f Please select at least one manifest to cancel.")}closeCancelPopup(){this.showCancelPopup=!1}finalizeCancel(){0!==this.selectedForCancel.length?(this.selectedForCancel.forEach(i=>{i.consignments.forEach(r=>{const s={...r,shipmentStatus:"Pending"};this.updateConsignment(this.username,s)});const o={...i,mshipmentStatus:"Cancelled"};this.http.post("http://localhost:3000/api/manifest/manifestationNumber",o).subscribe({next:()=>{i.consignments.forEach(r=>{console.log(`\u{1f5d1}\ufe0f Manifest ${i.manifestationNumber} cancelled`,r),this.http.get("http://localhost:3000/api/newshipments/getConsignment",{params:{email:localStorage.getItem("email")||"",consignmentNumber:r.consignmentNumber}}).subscribe({next:s=>{let a=s[0];console.log("Manifest cancelled",a);const c=new Map;(r.invoices||[]).forEach(f=>{(f.products||[]).forEach(g=>{const _=String(g.type||"").trim();if(!_)return;const v=Number(g.manifestQty)||0;v<=0||c.set(_,(c.get(_)||0)+v)})}),a.invoices?.forEach(f=>{f.products?.forEach(g=>{const _=String(g.type||"").trim(),v=c.get(_)||0;v&&(g.intransitstock=Math.max(0,(Number(g.intransitstock)||0)-v),g.instock=(Number(g.instock)||0)+v)})});const d=a.invoices.every(f=>f.products.every(g=>0!=g.deliveredstock));console.log("\u{1f5d1}\ufe0f Manifest2 cancelled",d),a.shipmentStatus=d?"Pending":"In Transit/Pending",this.updatedstkConsignmentfn(a)},error:s=>console.error("\u274c Error loading shipments:",s)})})},error:r=>console.error("\u274c Error cancelling manifest:",r)})}),this.showCancelPopup=!1,alert("\u{1f5d1}\ufe0f Cancellation completed successfully!"),this.filteredManifests.forEach(i=>i.selected=!1),this.loadManifests()):alert("No manifests selected for cancellation.")}printManifest(){const t=this.filteredManifests?.filter(i=>i.selected)||[];0!==t.length?fetch("assets/manifest-template.html").then(i=>i.text()).then(i=>{let o="\n        <html>\n          <head>\n            <style>\n              body { font-family: Arial, sans-serif; padding: 20px; }\n              h2 { margin-bottom: 0; }\n              table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n              th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }\n              th { background-color: #f2f2f2; }\n              .page-break { page-break-after: always; }\n            </style>\n          </head>\n          <body>\n      ";t.forEach((s,a)=>{const c=s.consignments.flatMap(f=>f.invoices.flatMap(g=>g.products.map(_=>`\n              <tr>\n                <td>${s.manifestationNumber}</td>\n                <td>${s.mshipmentStatus}</td>\n                <td>${s.date}</td>\n                <td>${f.consignmentNumber}</td>\n                <td>${f.consignor}</td>\n                <td>${g.number}</td>\n                <td>${_.type}</td>\n                <td>${_.manifestQty}</td>\n                <td>${_.instock}</td>\n                <td>${g.value}</td>\n                <td>${s.branch}</td>\n              </tr>\n            `))).join(""),d=i.replace("{{manifestNumber}}",s.manifestationNumber).replace("{{status}}",s.mshipmentStatus).replace("{{date}}",s.date).replace("{{branch}}",s.branch).replace("{{rows}}",c);o+=d,a<t.length-1&&(o+='<div class="page-break"></div>')}),o+="</body></html>";const r=window.open("","_blank");r&&(r.document.open(),r.document.write(o),r.document.close(),r.print())}).catch(i=>console.error("Error loading manifest template:",i)):alert("No manifests selected.")}syncConsignmentStockFromManifest(t){const i=String(t?.consignmentNumber||"").trim();i&&this.http.get("http://localhost:3000/api/newshipments/getConsignment",{params:{email:localStorage.getItem("email")||"",consignmentNumber:i}}).subscribe({next:o=>{const r=o?.[0];if(!r)return;const s=new Map;(t.invoices||[]).forEach(c=>{const d=String(c.number||c.invoicenum||"").trim();d&&s.set(d,c)});const a=c=>{(c||[]).forEach(d=>{const f=String(d.number||"").trim(),g=s.get(f);g&&(d.products||[]).forEach(_=>{const v=String(_.type||"").trim(),b=(g.products||[]).find(T=>String(T.type||"").trim()===v);b&&(_.instock=Number(b.instock)||0,_.intransitstock=Number(b.intransitstock)||0,void 0!==b.deliveredstock&&(_.deliveredstock=Number(b.deliveredstock)||0))})})};a(r.invoices),(r.ewaybills||[]).forEach(c=>a(c.invoices)),this.updatedstkConsignmentfn(r)},error:o=>console.error("Error syncing consignment stock:",o)})}normalizeKey(t){return String(t||"").trim().toLowerCase()}getOtherManifestedQty(t,i,o,r){const s=this.normalizeKey(i),a=this.normalizeKey(o),c=this.normalizeKey(r);if(!s||!c)return 0;let d=0;return(this.allManifests||[]).forEach(f=>{String(f.manifestationNumber)!==String(t)&&(f.consignments||[]).forEach(g=>{this.normalizeKey(g.consignmentNumber)===s&&(g.invoices||[]).forEach(_=>{a&&this.normalizeKey(_.number)!==a||(_.products||[]).forEach(v=>{this.normalizeKey(v.type)===c&&(d+=Number(v.manifestQty)||0)})})})}),d}buildEditManifestRows(t){const i=[];return(t?.consignments||[]).forEach(r=>{(r.invoices||[]).forEach(s=>{(s.products||[]).forEach(a=>{const c=Number(a.amount)||0,d=Number(a.manifestQty)||0,f=Number(a.instock)||0,g=Number(a.intransitstock)||0;i.push({consignmentNumber:r.consignmentNumber,invoiceNumber:s.number,productType:a.type,instock:f,originalInstock:f,originalManifestQty:d,originalIntransit:g,amount:c,productRef:a,maxAllowed:d+f})})})}),i}onManifestQtyChange(t){if(!t||!t.productRef)return;let i=Number(t.productRef.manifestQty);(!Number.isFinite(i)||i<0)&&(i=0);const o=Number(t.originalInstock)||0,r=Number(t.originalManifestQty)||0,s=Number(t.originalIntransit)||0,a=r+o;i>a&&(i=a);const c=i-r,d=Math.max(0,o-c),f=Math.max(0,s+c);t.productRef.manifestQty=i,t.productRef.instock=d,t.productRef.intransitstock=f,t.instock=d,t.maxAllowed=a}isRowOverLimit(t){if(!t)return!1;const i=Number(t.maxAllowed)||0;return(Number(t.productRef?.manifestQty)||0)>i}hasOverManifestLimit(){return(this.editManifestRows||[]).some(t=>this.isRowOverLimit(t))}validateEditManifestRows(){let t=!0;return this.editManifestRows.forEach(i=>{(Number(i.productRef?.manifestQty)||0)>(Number(i.maxAllowed)||0)&&(t=!1)}),t}static{this.\u0275fac=function(i){return new(i||e)(O(ot))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-manifest"]],standalone:!0,features:[Fe],decls:35,vars:7,consts:[[1,"manifest-container"],[1,"filters"],["type","text","placeholder","\u{1f50d} Search Consignor / Manifest #",3,"ngModelChange","input","ngModel"],["type","date",3,"ngModelChange","change","ngModel"],["type","text","placeholder","\u{1f3f7}\ufe0f Filter by Consignor",3,"ngModelChange","input","ngModel"],[1,"actions"],[1,"delivery-btn",3,"click"],[1,"delete-btn",3,"click"],[1,"print-btn",3,"click"],[1,"table-wrapper"],[1,"manifest-table"],[2,"width","50px"],["type","checkbox",3,"change"],[4,"ngFor","ngForOf"],["class","popup",4,"ngIf"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"manifest-consignments"],["class","consignment-card",4,"ngFor","ngForOf"],[1,"edit-btn",3,"click"],[1,"consignment-card"],[1,"popup"],[1,"popup-content","edit-manifest-popup"],["type","text","readonly","",3,"value"],["type","date","readonly","",3,"value"],["class","edit-manifest-section",4,"ngIf"],[1,"popup-actions"],[1,"confirm-btn",3,"click"],[1,"cancel-btn",3,"click"],[1,"edit-manifest-section"],[1,"edit-manifest-table-wrapper"],[1,"edit-manifest-table"],[3,"row-over-limit",4,"ngFor","ngForOf"],["class","row-warning",4,"ngIf"],["type","number",3,"ngModelChange","ngModel","min","max"],[1,"row-hint"],[1,"row-warning"],[1,"popup-content"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"h2"),h(2,"\u{1f4e6} Manifest Records"),u(),l(3,"div",1)(4,"input",2),D("ngModelChange",function(s){return S(o.searchText,s)||(o.searchText=s),s}),I("input",function(){return o.applyFilters()}),u(),l(5,"input",3),D("ngModelChange",function(s){return S(o.filterDate,s)||(o.filterDate=s),s}),I("change",function(){return o.applyFilters()}),u(),l(6,"input",4),D("ngModelChange",function(s){return S(o.filterConsignor,s)||(o.filterConsignor=s),s}),I("input",function(){return o.applyFilters()}),u()(),l(7,"div",5)(8,"button",6),I("click",function(){return o.openDeliveryPopup()}),h(9,"\u{1f69a} Deliver"),u(),l(10,"button",7),I("click",function(){return o.openCancelPopup()}),h(11,"\u{1f5d1}\ufe0f Delete"),u(),l(12,"button",8),I("click",function(){return o.printManifest()}),h(13,"\u{1f5a8}\ufe0f Print Manifest"),u()(),l(14,"div",9)(15,"table",10)(16,"thead")(17,"tr")(18,"th",11)(19,"input",12),I("change",function(s){return o.toggleAllSelection(s)}),u()(),l(20,"th"),h(21,"Manifest #"),u(),l(22,"th"),h(23,"Status #"),u(),l(24,"th"),h(25,"Date"),u(),l(26,"th"),h(27,"Consignor / Consignment Details"),u(),l(28,"th"),h(29,"Branch"),u()()(),l(30,"tbody"),N(31,h7,18,9,"tr",13),u()()(),N(32,m7,23,8,"div",14)(33,v7,14,1,"div",14)(34,C7,14,1,"div",14),u()),2&i&&(p(4),w("ngModel",o.searchText),p(),w("ngModel",o.filterDate),p(),w("ngModel",o.filterConsignor),p(25),M("ngForOf",o.filteredManifests),p(),M("ngIf",o.showEditPopup),p(),M("ngIf",o.showDeliveryPopup),p(),M("ngIf",o.showCancelPopup))},dependencies:[Bt,Et,_t,ru,yt,rt,bn,La,ft,Ga,Ju,st],styles:["[_nghost-%COMP%]{--page-bg: #f6f8fb;--card: #ffffff;--border: #e5e7eb;--text: #0f172a;--muted: #6b7280;--primary: #2563eb;--primary-strong: #1e3a8a;--danger: #dc2626}.manifest-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:100%;box-sizing:border-box}h2[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--text)}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:15px}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1 1 200px;padding:8px 10px;border:1px solid var(--border);border-radius:8px;background:#fff;color:var(--text)}.table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;background:var(--card);border-radius:12px;border:1px solid var(--border);box-shadow:0 4px 16px #0f172a0d}.manifest-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:900px}.manifest-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manifest-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid var(--border);padding:10px;text-align:left;vertical-align:top}.manifest-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8fafc;font-weight:600}.manifest-consignments[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.consignment-card[_ngcontent-%COMP%]{background:#f8fafc;padding:6px 10px;border-radius:8px;border-left:4px solid var(--primary)}.actions[_ngcontent-%COMP%]{margin-top:20px;text-align:right}.delivery-btn[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff;font-weight:600;padding:10px 16px;border:1px solid var(--primary);border-radius:8px;cursor:pointer;transition:background .3s}.delivery-btn[_ngcontent-%COMP%]:hover{background-color:var(--primary-strong)}.popup[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:2000}.popup-content[_ngcontent-%COMP%]{background:var(--card);padding:25px;border-radius:12px;width:90%;max-width:450px;text-align:center;box-shadow:0 4px 10px #0003;border:1px solid var(--border)}.delete-btn[_ngcontent-%COMP%]{background:#fef2f2;color:var(--danger);border:1px solid #fecaca;border-radius:10px;padding:8px 14px;cursor:pointer;font-weight:600;margin-left:8px}.delete-btn[_ngcontent-%COMP%]:hover{background:#fee2e2}.popup-actions[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-around}.confirm-btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:1px solid var(--primary);border-radius:8px;padding:8px 14px;cursor:pointer}.cancel-btn[_ngcontent-%COMP%]{background:#fef2f2;color:var(--danger);border:1px solid #fecaca;border-radius:8px;padding:8px 14px;cursor:pointer}@media (max-width: 768px){.manifest-table[_ngcontent-%COMP%]{min-width:100%}.filters[_ngcontent-%COMP%]{flex-direction:column}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.consignment-card[_ngcontent-%COMP%]{font-size:.9em}}.edit-btn[_ngcontent-%COMP%]{background-color:var(--primary);border:1px solid var(--primary);padding:5px 10px;cursor:pointer;border-radius:4px}.edit-btn[_ngcontent-%COMP%]:hover{background-color:var(--primary-strong)}.print-btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:1px solid var(--primary);padding:6px 12px;border-radius:4px;cursor:pointer;font-weight:500}.print-btn[_ngcontent-%COMP%]:hover{background:var(--primary-strong)}.popup-content.edit-manifest-popup[_ngcontent-%COMP%]{max-width:1000px;width:95%;text-align:left;max-height:80vh;overflow:auto}.edit-manifest-section[_ngcontent-%COMP%]{margin-top:16px}.edit-manifest-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:10px 0}.edit-manifest-table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;border:1px solid var(--border);border-radius:8px}.edit-manifest-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:900px}.edit-manifest-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .edit-manifest-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid var(--border);padding:8px;text-align:left;vertical-align:top}.edit-manifest-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8fafc;font-weight:600}.edit-manifest-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;min-width:90px;padding:4px 6px;border:1px solid var(--border);border-radius:6px}.row-hint[_ngcontent-%COMP%]{font-size:12px;color:var(--muted);margin-top:4px}.row-over-limit[_ngcontent-%COMP%]{background:#fff3f3}.row-warning[_ngcontent-%COMP%]{margin-top:10px;color:var(--danger);font-weight:600}"]})}}return e})();function M7(e,n){if(1&e){const t=A();l(0,"tr")(1,"td")(2,"input",14),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.selected,o)||(r.selected=o),C(o)}),u()(),l(3,"td",6),I("click",function(){const o=y(t).$implicit;return C(m().openInvoiceDetails(o))}),h(4),u(),l(5,"td"),h(6),u(),l(7,"td"),h(8),u(),l(9,"td"),h(10),u(),l(11,"td"),h(12),u(),l(13,"td")(14,"button",15),I("click",function(){const o=y(t).$implicit;return C(m().editInvoice(o))}),h(15,"\u270f\ufe0f Edit"),u()()()}if(2&e){const t=n.$implicit;Oe("selected",t.selected),p(2),w("ngModel",t.selected),p(2),L(t.consignmentNumber),p(2),L(t.shipmentStatus),p(2),L(t.consignor),p(2),L(t.deliveryAddress),p(2),L((null==t.products?null:t.products.length)||0)}}function w7(e,n){if(1&e&&(l(0,"li")(1,"span",30),h(2),u(),l(3,"span",31),h(4),u()()),2&e){const t=n.$implicit;p(2),L(t.productName||t.type),p(2),U("Qty: ",t.quantity||t.amount,"")}}function D7(e,n){if(1&e){const t=A();l(0,"div",16)(1,"div",17)(2,"button",18),I("click",function(){return y(t),C(m().closeInvoiceDetails())}),h(3,"\xd7"),u(),l(4,"div",19)(5,"div")(6,"h2"),h(7,"Consignment Details"),u(),l(8,"p",20),h(9),u()(),l(10,"span",21),h(11),u()(),l(12,"div",22)(13,"div",23)(14,"div",24),h(15,"Consignor"),u(),l(16,"div",25),h(17),u()(),l(18,"div",23)(19,"div",24),h(20,"Delivery Address"),u(),l(21,"div",25),h(22),u()(),l(23,"div",23)(24,"div",24),h(25,"Products"),u(),l(26,"div",25),h(27),u()(),l(28,"div",23)(29,"div",24),h(30,"Status"),u(),l(31,"div",25),h(32),u()()(),l(33,"div",26)(34,"div",27)(35,"h3"),h(36,"Products"),u(),l(37,"ul",28),N(38,w7,5,2,"li",29),u()()()()()}if(2&e){const t=m();p(9),U("Consignment #",null==t.selectedInvoice?null:t.selectedInvoice.consignmentNumber,""),p(2),L(null==t.selectedInvoice?null:t.selectedInvoice.shipmentStatus),p(6),L(null==t.selectedInvoice?null:t.selectedInvoice.consignor),p(5),L(null==t.selectedInvoice?null:t.selectedInvoice.deliveryAddress),p(5),L((null==t.selectedInvoice||null==t.selectedInvoice.products?null:t.selectedInvoice.products.length)||0),p(5),L(null==t.selectedInvoice?null:t.selectedInvoice.shipmentStatus),p(6),M("ngForOf",null==t.selectedInvoice?null:t.selectedInvoice.products)}}function S7(e,n){if(1&e){const t=A();l(0,"tr")(1,"td"),h(2),u(),l(3,"td")(4,"input",51),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.amount,o)||(r.amount=o),C(o)}),I("ngModelChange",function(o){const r=y(t).$implicit,s=m().$implicit;return C(m(3).onTotalQtyChange(s,r,o))}),u()(),l(5,"td")(6,"input",52),D("ngModelChange",function(o){const r=y(t).$implicit;return S(r.deliveredstock,o)||(r.deliveredstock=o),C(o)}),I("ngModelChange",function(o){const r=y(t).$implicit,s=m().$implicit;return C(m(3).onDeliveredQtyChange(s,r,o))}),u()()()}if(2&e){const t=n.$implicit,i=n.index,o=m().index;p(2),L(t.type||t.productName),p(2),Il("name","total-",o,"-",i,""),M("min",t.deliveredstock||0),w("ngModel",t.amount),p(2),Il("name","delivered-",o,"-",i,""),w("ngModel",t.deliveredstock)}}function I7(e,n){if(1&e&&(l(0,"div",48)(1,"div",49),h(2),u(),l(3,"table",50)(4,"thead")(5,"tr")(6,"th"),h(7,"Product"),u(),l(8,"th"),h(9,"Total Qty"),u(),l(10,"th"),h(11,"Delivered Qty"),u()()(),l(12,"tbody"),N(13,S7,7,10,"tr",29),u()()()),2&e){const t=n.$implicit;p(2),U("Invoice #",t.number,""),p(11),M("ngForOf",t.products)}}function T7(e,n){if(1&e&&(l(0,"div",34)(1,"h3"),h(2,"Invoices & Products"),u(),N(3,I7,14,2,"div",47),u()),2&e){const t=m(2);p(3),M("ngForOf",t.editingInvoice.invoices)}}function E7(e,n){if(1&e){const t=A();l(0,"div",32)(1,"div",33)(2,"h2"),h(3,"Edit Details"),u(),l(4,"form")(5,"div",34)(6,"label",35),h(7,"Consignor:"),u(),l(8,"input",36),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingInvoice.consignor,o)||(r.editingInvoice.consignor=o),C(o)}),u()(),l(9,"div",34)(10,"label",37),h(11,"Delivery Address:"),u(),l(12,"textarea",38),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingInvoice.deliveryAddress,o)||(r.editingInvoice.deliveryAddress=o),C(o)}),u()(),l(13,"div",34)(14,"label",39),h(15,"Status:"),u(),l(16,"select",40),D("ngModelChange",function(o){y(t);const r=m();return S(r.editingInvoice.shipmentStatus,o)||(r.editingInvoice.shipmentStatus=o),C(o)}),l(17,"option",41),h(18,"Pending"),u(),l(19,"option",42),h(20,"Delivered"),u(),l(21,"option",43),h(22,"Invoiced"),u()()(),N(23,T7,4,1,"div",44),l(24,"div",45)(25,"button",46),I("click",function(){return y(t),C(m().saveInvoiceEdit())}),h(26,"Save"),u(),l(27,"button",46),I("click",function(){return y(t),C(m().cancelEdit())}),h(28,"Cancel"),u()()()()()}if(2&e){const t=m();p(8),w("ngModel",t.editingInvoice.consignor),p(4),w("ngModel",t.editingInvoice.deliveryAddress),p(4),w("ngModel",t.editingInvoice.shipmentStatus),p(7),M("ngIf",null==t.editingInvoice||null==t.editingInvoice.invoices?null:t.editingInvoice.invoices.length)}}let N7=(()=>{class e{constructor(t,i){this.http=t,this.branchService=i,this.invoices=[],this.filteredInvoices=[],this.searchText="",this.filterDate="",this.filterConsignor="",this.selectedInvoice=null,this.showInvoiceModal=!1,this.branch=localStorage.getItem("branch")||"All Branches",this.editingInvoice=null,this.showEditPopup=!1,this.onStorageChange=o=>{"branch"===o.key&&o.newValue&&o.newValue!==this.branch&&(this.branch=o.newValue,this.loadInvoices())}}ngOnInit(){this.branch=this.branchService.currentBranch||this.branch,this.branchSub=this.branchService.branch$.subscribe(t=>{t!==this.branch&&(this.branch=t,this.loadInvoices())}),window.addEventListener("storage",this.onStorageChange),this.loadInvoices()}ngOnDestroy(){this.branchSub?.unsubscribe(),window.removeEventListener("storage",this.onStorageChange)}loadInvoices(){this.http.get("http://localhost:3000/api/newshipments",{params:{username:localStorage.getItem("username")||"",branch:this.branch||localStorage.getItem("branch")||""}}).subscribe({next:t=>{this.invoices=t.filter(i=>"Delivered"===i.shipmentStatus||"Invoiced"===i.shipmentStatus),this.filteredInvoices=[...this.invoices],console.log("\xf0\u0178\u201c\xa6 Filtered Invoices for Delivered status:",this.filteredInvoices),this.filteredInvoices.forEach(i=>console.log("\xf0\u0178\u201c\xa6 Filtered Invoice:",i.consignmentNumber))},error:t=>console.error("\xe2\x9d\u0152 Error loading invoices:",t)})}applyFilters(){this.filteredInvoices=this.invoices.filter(t=>(!this.searchText||t.consignmentNumber?.includes(this.searchText)||t.consignor?.includes(this.searchText))&&(!this.filterDate||new Date(t.date).toISOString().split("T")[0]===this.filterDate)&&(!this.filterConsignor||t.consignor?.toLowerCase().includes(this.filterConsignor.toLowerCase())))}toggleAllSelection(t){const i=t.target.checked;this.filteredInvoices.forEach(o=>o.selected=i)}openInvoiceDetails(t){this.selectedInvoice=t,this.showInvoiceModal=!0}closeInvoiceDetails(){this.showInvoiceModal=!1,this.selectedInvoice=null}invoiceSelected(){const t=this.filteredInvoices.filter(i=>i.selected);0!==t.length?(t.forEach(i=>{const o={...i,shipmentStatus:"Invoiced"};this.http.put(`http://localhost:3000/api/newshipments/${i.consignmentNumber}`,o).subscribe({next:()=>{console.log(`\xe2\u0153\u2026 Consignment ${i.consignmentNumber} updated to Invoiced`),this.loadInvoices()},error:r=>{console.error(`\xe2\x9d\u0152 Error updating consignment ${i.consignmentNumber}:`,r)}})}),this.filteredInvoices.forEach(i=>i.selected=!1)):console.warn("\xe2\u0161\xa0\xef\xb8\x8f No consignments selected for invoicing.")}editInvoice(t){console.log("Edit invoice:",t);const i=JSON.parse(JSON.stringify(t||{}));i.invoices=Array.isArray(i.ewaybills)&&i.ewaybills.length?this.flattenInvoices(i.ewaybills):i.invoices||[],this.editingInvoice=i,this.captureOriginalDelivered(this.editingInvoice),this.showEditPopup=!0}deleteInvoice(){const t=this.filteredInvoices.filter(i=>i.selected);0!==t.length?(t.forEach(i=>{const o={...i,shipmentStatus:" Cancelled-"+i.shipmentStatus};this.http.put(`http://localhost:3000/api/newshipments/${i.consignmentNumber}`,o).subscribe({next:()=>{console.log(`\xe2\u0153\u2026 Consignment ${i.consignmentNumber} updated to Invoiced`),this.loadInvoices()},error:r=>{console.error(`\xe2\x9d\u0152 Error updating consignment ${i.consignmentNumber}:`,r)}})}),this.filteredInvoices.forEach(i=>i.selected=!1)):console.warn("\xe2\u0161\xa0\xef\xb8\x8f No consignments selected for invoicing.")}saveInvoiceEdit(){if(!this.editingInvoice)return;const t=this.editingInvoice.invoices||[];let i=!0,o=!1;t.forEach(r=>{(r.products||[]).forEach(s=>{const a=Number(s.deliveredstock)||0;let c=Number(s.amount)||0;const d=Number(s.intransitstock)||0;c<a&&(c=a),s.amount=c,s.instock=Math.max(0,c-a-d),a<c&&(i=!1),d>0&&(o=!0)})}),this.editingInvoice.shipmentStatus=i?"Delivered":o?"In Transit/Pending":"Pending",t.forEach(r=>{(r.products||[]).forEach(s=>{delete s._originalDelivered})}),this.syncDeliveredToEwaybills(),this.http.put(`http://localhost:3000/api/newshipments/${this.editingInvoice.consignmentNumber}`,this.editingInvoice).subscribe({next:()=>{console.log("Invoice updated successfully"),this.loadInvoices(),this.editingInvoice=null,this.showEditPopup=!1},error:r=>console.error("Error updating invoice:",r)})}cancelEdit(){this.editingInvoice=null,this.showEditPopup=!1}flattenInvoices(t){return(t||[]).flatMap(i=>i.invoices||[])}captureOriginalDelivered(t){(t?.invoices||[]).forEach(i=>{(i.products||[]).forEach(o=>{o._originalDelivered=Number(o.deliveredstock)||0})})}normalizeInvoiceNumber(t){return String(t?.number||t?.invoicenum||"").trim()}normalizeProductType(t){return String(t?.type||t?.productName||"").trim()}onDeliveredQtyChange(t,i,o){let r=Number(o);Number.isFinite(r)||(r=0),r<0&&(r=0),i.deliveredstock=r,r>(Number(i?.amount)||0)&&(i.amount=r)}onTotalQtyChange(t,i,o){let r=Number(o);Number.isFinite(r)||(r=0),r<0&&(r=0);const s=Number(i?.deliveredstock)||0;r<s&&(r=s),i.amount=r}syncDeliveredToEwaybills(){const t=this.editingInvoice?.ewaybills||[];if(!t.length)return;const i=new Map;(this.editingInvoice?.invoices||[]).forEach(o=>{const r=this.normalizeInvoiceNumber(o);r&&i.set(r,o)}),(t||[]).forEach(o=>{(o.invoices||[]).forEach(r=>{const s=this.normalizeInvoiceNumber(r),a=i.get(s);a&&(r.products||[]).forEach(c=>{const d=this.normalizeProductType(c),f=(a.products||[]).find(g=>this.normalizeProductType(g)===d);f&&(c.deliveredstock=Number(f.deliveredstock)||0,c.amount=Number(f.amount)||0,c.instock=Number(f.instock)||0,void 0!==f.intransitstock&&(c.intransitstock=Number(f.intransitstock)||0))})})})}printInvoice(){const t=this.filteredInvoices?.filter(i=>i.selected)||[];0!==t.length?fetch("assets/invoice-template.html").then(i=>i.text()).then(i=>{let o="\n      <html>\n        <head>\n          <style>\n            body { font-family: Arial, sans-serif; padding: 20px; }\n            h2 { margin-bottom: 0; }\n            table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n            th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }\n            th { background-color: #f2f2f2; }\n            .page-break { page-break-after: always; }\n            .totals { margin-top: 15px; font-weight: bold; }\n          </style>\n        </head>\n        <body>\n    ";t.forEach((s,a)=>{let c=0;const d=(s.invoices||[]).map(b=>(b.products||[]).map(T=>{const E=(T.price||0)*(T.deliveredstock||0);return c+=E,`\n          <tr>\n          <td>${s.consignmentNumber}</td>\n          <td>${s.shipmentStatus}</td>\n          <td>${s.consignor}</td>\n          <td>${s.deliveryAddress}</td>\n          <td>${T.type}</td>\n          <td>${T.deliveredstock}</td>\n          <td>${T.price||0}</td>\n          <td>${E.toFixed(2)}</td>\n          </tr>\n          `}).join("")).join(""),f=localStorage.getItem("companyType")||"default",g=s.finalAmount*(parseInt(f,10)/100),_=s.finalAmount+g,v=i.replace("{{consignmentNumber}}",s.consignmentNumber).replace("{{consignor}}",s.consignor).replace("{{deliveryAddress}}",s.deliveryAddress).replace("{{status}}",s.shipmentStatus).replace("{{rows}}",d).replace("{{subtotal}}",c.toFixed(2)).replace("{{gst}}",g.toFixed(2)).replace("{{grandTotal}}",_.toFixed(2));o+=v,a<t.length-1&&(o+='<div class="page-break"></div>')}),o+="</body></html>";const r=window.open("","_blank");r&&(r.document.open(),r.document.write(o),r.document.close(),r.print())}).catch(i=>console.error("Error loading invoice template:",i)):alert("No invoices selected.")}static{this.\u0275fac=function(i){return new(i||e)(O(ot),O(vm))}}static{this.\u0275cmp=pe({type:e,selectors:[["app-invoice"]],standalone:!0,features:[Fe],decls:35,vars:6,consts:[[1,"invoice-container"],[1,"filters"],["type","text","placeholder","Search by Consignment / Consignor",3,"ngModelChange","input","ngModel"],["type","date",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Filter by Consignor",3,"ngModelChange","input","ngModel"],[1,"action-bar"],[3,"click"],[1,"delete-btn",3,"click"],[1,"print-btn",3,"click"],[1,"invoice-table"],["type","checkbox",3,"change"],[3,"selected",4,"ngFor","ngForOf"],["class","modal details-modal",4,"ngIf"],["class","popup-overlay",4,"ngIf"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"edit-btn",3,"click"],[1,"modal","details-modal"],[1,"modal-content","details-content"],["type","button",1,"details-close",3,"click"],[1,"details-header"],[1,"details-sub"],[1,"details-status"],[1,"details-grid"],[1,"details-item"],[1,"details-label"],[1,"details-value"],[1,"details-products"],[1,"details-invoice"],[1,"details-product-list"],[4,"ngFor","ngForOf"],[1,"product-name"],[1,"product-meta"],[1,"popup-overlay"],[1,"popup-content"],[1,"form-row"],["for","consignor"],["type","text","id","consignor","name","consignor",3,"ngModelChange","ngModel"],["for","deliveryAddress"],["id","deliveryAddress","name","deliveryAddress",3,"ngModelChange","ngModel"],["for","status"],["id","status","name","status",3,"ngModelChange","ngModel"],["value","Pending"],["value","Delivered"],["value","Invoiced"],["class","form-row",4,"ngIf"],[1,"button-section"],["type","button",3,"click"],["class","invoice-block",4,"ngFor","ngForOf"],[1,"invoice-block"],[1,"invoice-title"],[1,"product-table"],["type","number","min","0",3,"ngModelChange","min","ngModel","name"],["type","number","min","0",3,"ngModelChange","ngModel","name"]],template:function(i,o){1&i&&(l(0,"div",0)(1,"h2"),h(2,"\u{1f4e6} Invoice Management"),u(),l(3,"div",1)(4,"input",2),D("ngModelChange",function(s){return S(o.searchText,s)||(o.searchText=s),s}),I("input",function(){return o.applyFilters()}),u(),l(5,"input",3),D("ngModelChange",function(s){return S(o.filterDate,s)||(o.filterDate=s),s}),I("change",function(){return o.applyFilters()}),u(),l(6,"input",4),D("ngModelChange",function(s){return S(o.filterConsignor,s)||(o.filterConsignor=s),s}),I("input",function(){return o.applyFilters()}),u(),l(7,"div",5)(8,"button",6),I("click",function(){return o.invoiceSelected()}),h(9,"\u{1f9fe} Generate Invoice"),u(),l(10,"button",7),I("click",function(){return o.deleteInvoice()}),h(11,"\u{1f5d1}\ufe0f Delete"),u(),l(12,"button",8),I("click",function(){return o.printInvoice()}),h(13,"\u{1f5a8}\ufe0f Print Manifest"),u()()(),l(14,"table",9)(15,"thead")(16,"tr")(17,"th")(18,"input",10),I("change",function(s){return o.toggleAllSelection(s)}),u()(),l(19,"th"),h(20,"Consignment No."),u(),l(21,"th"),h(22,"Status"),u(),l(23,"th"),h(24,"Consignor"),u(),l(25,"th"),h(26,"Delivery Address"),u(),l(27,"th"),h(28,"No. of Products"),u(),l(29,"th"),h(30,"Actions"),u()()(),l(31,"tbody"),N(32,M7,16,8,"tr",11),u()(),N(33,D7,39,7,"div",12)(34,E7,29,4,"div",13),u()),2&i&&(p(4),w("ngModel",o.searchText),p(),w("ngModel",o.filterDate),p(),w("ngModel",o.filterConsignor),p(26),M("ngForOf",o.filteredInvoices),p(),M("ngIf",o.showInvoiceModal),p(),M("ngIf",o.showEditPopup))},dependencies:[Bt,Et,_t,yt,pm,ci,li,rt,bn,La,Mn,ft,tm,Ga,st,Ha],styles:[".invoice-container[_ngcontent-%COMP%]{padding:20px;color:var(--text)}[_nghost-%COMP%]{--page-bg: #f6f8fb;--card: #ffffff;--border: #e5e7eb;--text: #0f172a;--muted: #6b7280;--primary: #2563eb;--primary-strong: #1e3a8a;--danger: #dc2626}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:15px}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:#fff;color:var(--text)}.action-bar[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.action-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 14px;border-radius:10px;border:1px solid var(--border);background:#fff;color:var(--text);cursor:pointer}.action-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:var(--primary);color:var(--primary-strong)}.print-btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:1px solid var(--primary)}.print-btn[_ngcontent-%COMP%]:hover{background:var(--primary-strong);border-color:var(--primary-strong);color:#fff}.invoice-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden}.invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid var(--border);padding:8px;text-align:left}.invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;font-weight:600}.invoice-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#0009;z-index:2000}.modal-content[_ngcontent-%COMP%]{position:relative}.edit-btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:1px solid var(--primary);padding:4px 8px;border-radius:4px;cursor:pointer}.edit-btn[_ngcontent-%COMP%]:hover{background:var(--primary-strong)}.modal-actions[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between}.popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0f172a8c;display:flex;align-items:center;justify-content:center;z-index:1000}.popup-content[_ngcontent-%COMP%]{background:var(--card);padding:20px;border-radius:12px;width:520px;max-width:90%;border:1px solid var(--border);box-shadow:0 18px 40px #0f172a33}.details-modal[_ngcontent-%COMP%]{background:#0f172a8c}.details-content[_ngcontent-%COMP%]{background:#fff;color:var(--text);width:min(860px,92vw);max-height:85vh;border-radius:16px;border:1px solid var(--border);box-shadow:0 18px 40px #0f172a33;padding:20px;position:relative}.details-close[_ngcontent-%COMP%]{position:absolute;right:18px;top:12px;background:transparent;border:none;font-size:24px;cursor:pointer;color:var(--muted)}.details-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:16px;gap:12px}.details-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px}.details-sub[_ngcontent-%COMP%]{margin:6px 0 0;color:var(--muted);font-size:13px}.details-status[_ngcontent-%COMP%]{background:#e0f2fe;color:#0ea5e9;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:600;white-space:nowrap}.details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px 16px;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px;margin-bottom:16px}.details-products[_ngcontent-%COMP%]{display:grid;gap:12px}.details-invoice[_ngcontent-%COMP%]{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px}.details-product-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:grid;gap:8px}.details-product-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;justify-content:space-between;border-bottom:1px solid var(--border);padding-bottom:6px}.details-product-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.product-name[_ngcontent-%COMP%]{font-weight:600}.product-meta[_ngcontent-%COMP%]{color:var(--muted);font-size:13px}@media (max-width: 700px){.details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.details-product-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}.form-row[_ngcontent-%COMP%]{margin-bottom:12px}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:4px;font-weight:700}.form-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:6px;box-sizing:border-box;border:1px solid var(--border);border-radius:8px}.button-section[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}.delete-btn[_ngcontent-%COMP%]{background-color:#fef2f2;color:var(--danger);border:1px solid #fecaca;padding:5px 10px;margin-left:5px;cursor:pointer;border-radius:4px}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#fee2e2}.invoice-block[_ngcontent-%COMP%]{margin-top:12px;padding:10px;border:1px solid #e5e7eb;border-radius:6px;background:#f9fafb}.invoice-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:8px}.product-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.product-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .product-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e5e7eb;padding:6px 8px;text-align:left}.product-table[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;padding:4px 6px;box-sizing:border-box}"]})}}return e})(),x7=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-reports"]],decls:2,vars:0,template:function(i,o){1&i&&(l(0,"h2"),h(1,"Reports"),u())},styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})(),k7=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-configuration"]],decls:2,vars:0,template:function(i,o){1&i&&(l(0,"h2"),h(1,"Configuration"),u())},styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})(),P7=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-locations"]],decls:2,vars:0,template:function(i,o){1&i&&(l(0,"h2"),h(1,"locations"),u())},styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})(),A7=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-logs"]],decls:2,vars:0,template:function(i,o){1&i&&(l(0,"h2"),h(1,"Logs"),u())},styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})(),O7=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-changePass"]],decls:2,vars:0,template:function(i,o){1&i&&(l(0,"h2"),h(1,"changePass"),u())},styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})(),R7=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["app-roles"]],decls:2,vars:0,template:function(i,o){1&i&&(l(0,"h2"),h(1,"roles"),u())},styles:["h2[_ngcontent-%COMP%]{color:#1976d2}"]})}}return e})();const F7=new Set(["Branches","profile","changePass","roles","notifications"]),L7=[{path:"",component:iU},{path:"home",component:hU,canActivateChild:[e=>{const n=F(ai),t=F(ot);return!!F7.has(e.routeConfig?.path||"")||(localStorage.getItem("token")?t.get("http://localhost:3000/api/branches").pipe(ce(r=>(Array.isArray(r)?r.length:0)>0||n.createUrlTree(["/home","Branches"])),mo(()=>X(n.createUrlTree(["/home","Branches"])))):n.createUrlTree(["/"]))}],children:[{path:"dashboard",component:fU},{path:"new-shipment",component:zU},{path:"shipments",component:KU},{path:"admin",component:YU},{path:"Branches",component:D6},{path:"Clients",component:EH},{path:"Guests",component:qH},{path:"Categories",component:WH},{path:"Pkgs",component:t9},{path:"Hubs",component:X6},{path:"Tpartners",component:mH},{path:"Logs",component:A7},{path:"Reports",component:x7},{path:"Invoice",component:N7},{path:"Manifest",component:b7},{path:"Stocks",component:c7},{path:"RoleSettings",component:w9},{path:"Users",component:D9},{path:"Locations",component:P7},{path:"Configuration",component:k7},{path:"Products",component:g9},{path:"settings",component:JU},{path:"profile",component:t6},{path:"roles",component:R7},{path:"changePass",component:O7},{path:"notifications",component:_H}]}];(function Y4(e,n){return mF({rootComponent:e,...N0(n)})})(s5,{providers:[fD(function MB(e){return po(ki.Interceptors,e.map(n=>({provide:ba,useValue:n,multi:!0})))}([(e,n)=>{const t=localStorage.getItem("token");return n(t?e.clone({setHeaders:{Authorization:`Bearer ${t}`}}):e)}])),function n5(e,...n){return Ro([{provide:Fu,multi:!0,useValue:e},[],{provide:jr,useFactory:SS,deps:[ai]},{provide:Al,multi:!0,useFactory:IS},n.map(t=>t.\u0275providers)])}(L7)]}).catch(e=>console.error(e))}},Wr=>{Wr(Wr.s=261)}]);