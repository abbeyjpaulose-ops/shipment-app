<div class="branches-container">
  <h2>Manage Branches</h2>

  <!-- Add Branch Form -->
  <div class="add-branch-form">
    <input [(ngModel)]="newBranch.branchName" placeholder="Branch Name" required>
    <input [(ngModel)]="newBranch.address" placeholder="Address" required>
    <input [(ngModel)]="newBranch.city" placeholder="City">
    <input [(ngModel)]="newBranch.state" placeholder="State">
    <input [(ngModel)]="newBranch.pinCode" placeholder="Pin Code">
    <input [(ngModel)]="newBranch.GSTIN" placeholder="GSTIN" required>
    <button (click)="addBranch()">+ Add Branch</button>
  </div>

  <!-- Branches List -->
  <div class="branches-table-wrapper">
    <table>
      <tr>
        <th>Branch Name</th>
        <th>Address</th>
        <th>City</th>
        <th>State</th>
        <th>Pin</th>
        <th>GSTIN</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
      <tr *ngFor="let b of branches">
        <!-- Branch Name -->
        <td>
          <span *ngIf="editingBranch?._id !== b._id">{{ b.branchName }}</span>
          <div *ngIf="editingBranch?._id === b._id" class="edit-field">
            <input [(ngModel)]="editingBranch.branchName">
          </div>
        </td>

        <!-- Address -->
        <td>
          <span *ngIf="editingBranch?._id !== b._id">{{ b.address }}</span>
          <div *ngIf="editingBranch?._id === b._id" class="edit-field">
            <input [(ngModel)]="editingBranch.address">
          </div>
        </td>

        <!-- City -->
        <td>
          <span *ngIf="editingBranch?._id !== b._id">{{ b.city }}</span>
          <div *ngIf="editingBranch?._id === b._id" class="edit-field">
            <input [(ngModel)]="editingBranch.city">
          </div>
        </td>

        <!-- State -->
        <td>
          <span *ngIf="editingBranch?._id !== b._id">{{ b.state }}</span>
          <div *ngIf="editingBranch?._id === b._id" class="edit-field">
            <input [(ngModel)]="editingBranch.state">
          </div>
        </td>

        <!-- Pin Code -->
        <td>
          <span *ngIf="editingBranch?._id !== b._id">{{ b.pinCode }}</span>
          <div *ngIf="editingBranch?._id === b._id" class="edit-field">
            <input [(ngModel)]="editingBranch.pinCode">
          </div>
        </td>

        <!-- GSTIN -->
        <td>
          <span *ngIf="editingBranch?._id !== b._id">{{ b.GSTIN }}</span>
          <div *ngIf="editingBranch?._id === b._id" class="edit-field">
            <input [(ngModel)]="editingBranch.GSTIN">
          </div>
        </td>

        <!-- Status -->
        <td>
          <button (click)="toggleStatus(b)">
            {{ b.status === 'active' ? 'Deactivate' : 'Activate' }}
          </button>
        </td>

        <!-- Actions -->
        <td>
          <button *ngIf="editingBranch?._id !== b._id" (click)="editBranch(b)">Edit</button>
          <button *ngIf="editingBranch?._id === b._id" (click)="saveEdit()">Save</button>
        </td>
      </tr>
    </table>
  </div>
</div>
