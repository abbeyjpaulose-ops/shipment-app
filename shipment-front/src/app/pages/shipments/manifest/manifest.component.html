<div class="manifest-container">
  <h2>Manifest</h2>

  <!-- ðŸ” Search and Filters (no status filter here) -->
  <div class="filters">
    <input
      type="text"
      placeholder="Search by consignment no. or consignor"
      [(ngModel)]="searchText"
      (input)="applyFilters()" />

    <input
      type="date"
      [(ngModel)]="filterDate"
      (change)="applyFilters()" />

    <input
      type="text"
      placeholder="Filter by consignor"
      [(ngModel)]="filterConsignor"
      (input)="applyFilters()" />
      
      <button (click)="manifestSelected()">Manifestation</button>
  </div>

    <!-- Manifestation Button -->
  <div class="actions">
    
  </div>

  <!-- ðŸ“¦ Manifest Table -->
  <table class="manifest-table">
    <thead>
      <tr>
        <th><input type="checkbox" (change)="toggleAllSelection($event)" /></th>
        <th>Consignment No.</th>
        <th>Consignor</th>
        <th>Delivery Address</th>
        <th>No. of Products</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let s of filteredManifest" (click)="openManifestDetails(s)">
        <td>
          <input type="checkbox" [(ngModel)]="s.selected" (click)="$event.stopPropagation()" />
        </td>
        <td>{{ s.consignmentNumber }}</td>
        <td>{{ s.consignor }}</td>
        <td>{{ s.deliveryAddress }}</td>
        <td>{{ s.products?.length || 0 }}</td>
        <td>
          <button (click)="editManifest(s); $event.stopPropagation()">Edit</button>
        </td>
      </tr>
    </tbody>
  </table>


</div>

<!-- ðŸ“‘ Manifest Details Modal -->
<div class="modal" *ngIf="selectedManifest">
  <div class="modal-content">
    <span class="close" (click)="closeManifestDetails()">&times;</span>
    <h2>Manifest Details</h2>

    <div class="manifest-details">
      <p><strong>Consignment No.:</strong> {{ selectedManifest.consignmentNumber }}</p>
      <p><strong>Consignor:</strong> {{ selectedManifest.consignor }}</p>
      <p><strong>Consignee:</strong> {{ selectedManifest.consignee }}</p>
      <p><strong>Delivery Address:</strong> {{ selectedManifest.deliveryAddress }}</p>
      <p><strong>Date:</strong> {{ selectedManifest.date | date:'short' }}</p>
      <p><strong>No. of Products:</strong> {{ selectedManifest.products?.length || 0 }}</p>
    </div>

    <h3>Products</h3>
    <ul>
      <li *ngFor="let p of selectedManifest.products">
        {{ p.name }} (Qty: {{ p.quantity }})
      </li>
    </ul>
  </div>
</div>

<!-- âœ… Edit Modal -->
<div class="modal" *ngIf="editingManifest">
  <div class="modal-content">
    <h3>Edit Manifest</h3>

    <label>Consignment No:{{editingManifest.consignmentNumber}}  Status:{{editingManifest.shipmentStatus}}</label><br>

    <label>Consignor:</label>
    <input [(ngModel)]="editingManifest.consignor" />

    <label>Delivery Address:</label>
    <input [(ngModel)]="editingManifest.deliveryAddress" />

    <button (click)="saveManifestEdit()">Save</button>
    <button (click)="cancelEdit()">Cancel</button>
  </div>
</div>
